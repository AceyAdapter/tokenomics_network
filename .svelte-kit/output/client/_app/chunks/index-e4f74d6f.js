var Xt=Object.defineProperty;var $t=(I,e,u)=>e in I?Xt(I,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):I[e]=u;var Bt=(I,e,u)=>($t(I,typeof e!="symbol"?e+"":e,u),u),Ht=(I,e,u)=>{if(!e.has(I))throw TypeError("Cannot "+u)};var dt=(I,e,u)=>(Ht(I,e,"read from private field"),u?u.call(I):e.get(I)),xt=(I,e,u)=>{if(e.has(I))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(I):e.set(I,u)},Tt=(I,e,u,n)=>(Ht(I,e,"write to private field"),n?n.call(I,u):e.set(I,u),u),zt=(I,e,u,n)=>({set _(j){Tt(I,e,j,u)},get _(){return dt(I,e,n)}}),Lt=(I,e,u)=>(Ht(I,e,"access private method"),u);import{S as SvelteComponent,i as init,s as safe_not_equal,F as create_slot,e as element,c as claim_element,a as children,d as detach,b as attr,P as null_to_empty,g as insert_hydration,K as update_slot_base,L as get_all_dirty_from_scope,M as get_slot_changes,r as transition_in,Q as add_render_callback,R as create_in_transition,p as transition_out,T as create_out_transition,k as space,m as claim_space,I as append_hydration,J as listen,o as group_outros,q as check_outros,N as run_all,U as bubble,G as svg_element,H as claim_svg_element,V as onDestroy,W as globals,E as tick,X as binding_callbacks,n as noop,x as create_component,t as text,y as claim_component,h as claim_text,z as mount_component,j as set_data,C as destroy_component,Y as set_input_value}from"./index-faf28bcd.js";var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(I){if(I.__esModule)return I;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(I).forEach(function(u){var n=Object.getOwnPropertyDescriptor(I,u);Object.defineProperty(e,u,n.get?n:{enumerable:!0,get:function(){return I[u]}})}),e}function commonjsRequire(I){throw new Error('Could not dynamically require "'+I+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,u){module.exports=u()})(commonjsGlobal,()=>(()=>{var __webpack_modules__=[,(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=q,e.arraysToBytes=B,e.assert=Q,e.bytesToString=x,e.createPromiseCapability=bt,e.createValidAbsoluteUrl=at,e.escapeString=ft,e.getModificationDate=Et,e.getVerbosityLevel=V,e.info=K,e.isArrayBuffer=yt,e.isArrayEqual=St,e.isAscii=pt,e.objectFromMap=$,e.objectSize=W,e.setVerbosityLevel=X,e.shadow=P,e.string32=z,e.stringToBytes=O,e.stringToPDFString=J,e.stringToUTF16BEString=ut,e.stringToUTF8String=mt,e.unreachable=tt,e.utf8StringToString=vt,e.warn=Z,u(2);const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const j=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=j;const F={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=F;const L={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=L;const w={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=w;const b={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=b;const d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=d;const y={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=y;const E={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=E;const R={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=R;const A={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=A;const l={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=l;const g={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=g;const r={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=r;const _={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=_;const C={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=C;const S={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=S;const T={O:"PageOpen",C:"PageClose"};e.PageActionEventType=T;const s={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=s;const c={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=c;const v={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=v;const M={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=M;const k={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=k;const D={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=D;const N={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=N;let U=v.WARNINGS;function X(Y){Number.isInteger(Y)&&(U=Y)}function V(){return U}function K(Y){U>=v.INFOS&&console.log(`Info: ${Y}`)}function Z(Y){U>=v.WARNINGS&&console.log(`Warning: ${Y}`)}function tt(Y){throw new Error(Y)}function Q(Y,H){Y||tt(H)}function et(Y){if(!Y)return!1;switch(Y.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function at(Y,H=null,G=null){if(!Y)return null;try{if(G&&typeof Y=="string"){if(G.addDefaultProtocol&&Y.startsWith("www.")){const ht=Y.match(/\./g);ht&&ht.length>=2&&(Y=`http://${Y}`)}if(G.tryConvertEncoding)try{Y=mt(Y)}catch{}}const ot=H?new URL(Y,H):new URL(Y);if(et(ot))return ot}catch{}return null}function P(Y,H,G){return Object.defineProperty(Y,H,{value:G,enumerable:!0,configurable:!0,writable:!1}),G}const h=function(){function H(G,ot){this.constructor===H&&tt("Cannot initialize BaseException."),this.message=G,this.name=ot}return H.prototype=new Error,H.constructor=H,H}();e.BaseException=h;class o extends h{constructor(H,G){super(H,"PasswordException"),this.code=G}}e.PasswordException=o;class m extends h{constructor(H,G){super(H,"UnknownErrorException"),this.details=G}}e.UnknownErrorException=m;class t extends h{constructor(H){super(H,"InvalidPDFException")}}e.InvalidPDFException=t;class i extends h{constructor(H){super(H,"MissingPDFException")}}e.MissingPDFException=i;class a extends h{constructor(H,G){super(H,"UnexpectedResponseException"),this.status=G}}e.UnexpectedResponseException=a;class f extends h{constructor(H){super(H,"FormatError")}}e.FormatError=f;class p extends h{constructor(H){super(H,"AbortException")}}e.AbortException=p;function x(Y){(typeof Y!="object"||Y===null||Y.length===void 0)&&tt("Invalid argument for bytesToString");const H=Y.length,G=8192;if(H<G)return String.fromCharCode.apply(null,Y);const ot=[];for(let ht=0;ht<H;ht+=G){const _t=Math.min(ht+G,H),gt=Y.subarray(ht,_t);ot.push(String.fromCharCode.apply(null,gt))}return ot.join("")}function O(Y){typeof Y!="string"&&tt("Invalid argument for stringToBytes");const H=Y.length,G=new Uint8Array(H);for(let ot=0;ot<H;++ot)G[ot]=Y.charCodeAt(ot)&255;return G}function q(Y){if(Y.length!==void 0)return Y.length;if(Y.byteLength!==void 0)return Y.byteLength;tt("Invalid argument for arrayByteLength")}function B(Y){const H=Y.length;if(H===1&&Y[0]instanceof Uint8Array)return Y[0];let G=0;for(let _t=0;_t<H;_t++)G+=q(Y[_t]);let ot=0;const ht=new Uint8Array(G);for(let _t=0;_t<H;_t++){let gt=Y[_t];gt instanceof Uint8Array||(typeof gt=="string"?gt=O(gt):gt=new Uint8Array(gt));const Pt=gt.byteLength;ht.set(gt,ot),ot+=Pt}return ht}function z(Y){return String.fromCharCode(Y>>24&255,Y>>16&255,Y>>8&255,Y&255)}function W(Y){return Object.keys(Y).length}function $(Y){const H=Object.create(null);for(const[G,ot]of Y)H[G]=ot;return H}function st(){const Y=new Uint8Array(4);return Y[0]=1,new Uint32Array(Y.buffer,0,1)[0]===1}function rt(){try{return new Function(""),!0}catch{return!1}}class it{static get isLittleEndian(){return P(this,"isLittleEndian",st())}static get isEvalSupported(){return P(this,"isEvalSupported",rt())}static get isOffscreenCanvasSupported(){return P(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!="undefined")}}e.FeatureTest=it;const nt=[...Array(256).keys()].map(Y=>Y.toString(16).padStart(2,"0"));class lt{static makeHexColor(H,G,ot){return`#${nt[H]}${nt[G]}${nt[ot]}`}static scaleMinMax(H,G){let ot;H[0]?(H[0]<0&&(ot=G[0],G[0]=G[1],G[1]=ot),G[0]*=H[0],G[1]*=H[0],H[3]<0&&(ot=G[2],G[2]=G[3],G[3]=ot),G[2]*=H[3],G[3]*=H[3]):(ot=G[0],G[0]=G[2],G[2]=ot,ot=G[1],G[1]=G[3],G[3]=ot,H[1]<0&&(ot=G[2],G[2]=G[3],G[3]=ot),G[2]*=H[1],G[3]*=H[1],H[2]<0&&(ot=G[0],G[0]=G[1],G[1]=ot),G[0]*=H[2],G[1]*=H[2]),G[0]+=H[4],G[1]+=H[4],G[2]+=H[5],G[3]+=H[5]}static transform(H,G){return[H[0]*G[0]+H[2]*G[1],H[1]*G[0]+H[3]*G[1],H[0]*G[2]+H[2]*G[3],H[1]*G[2]+H[3]*G[3],H[0]*G[4]+H[2]*G[5]+H[4],H[1]*G[4]+H[3]*G[5]+H[5]]}static applyTransform(H,G){const ot=H[0]*G[0]+H[1]*G[2]+G[4],ht=H[0]*G[1]+H[1]*G[3]+G[5];return[ot,ht]}static applyInverseTransform(H,G){const ot=G[0]*G[3]-G[1]*G[2],ht=(H[0]*G[3]-H[1]*G[2]+G[2]*G[5]-G[4]*G[3])/ot,_t=(-H[0]*G[1]+H[1]*G[0]+G[4]*G[1]-G[5]*G[0])/ot;return[ht,_t]}static getAxialAlignedBoundingBox(H,G){const ot=lt.applyTransform(H,G),ht=lt.applyTransform(H.slice(2,4),G),_t=lt.applyTransform([H[0],H[3]],G),gt=lt.applyTransform([H[2],H[1]],G);return[Math.min(ot[0],ht[0],_t[0],gt[0]),Math.min(ot[1],ht[1],_t[1],gt[1]),Math.max(ot[0],ht[0],_t[0],gt[0]),Math.max(ot[1],ht[1],_t[1],gt[1])]}static inverseTransform(H){const G=H[0]*H[3]-H[1]*H[2];return[H[3]/G,-H[1]/G,-H[2]/G,H[0]/G,(H[2]*H[5]-H[4]*H[3])/G,(H[4]*H[1]-H[5]*H[0])/G]}static apply3dTransform(H,G){return[H[0]*G[0]+H[1]*G[1]+H[2]*G[2],H[3]*G[0]+H[4]*G[1]+H[5]*G[2],H[6]*G[0]+H[7]*G[1]+H[8]*G[2]]}static singularValueDecompose2dScale(H){const G=[H[0],H[2],H[1],H[3]],ot=H[0]*G[0]+H[1]*G[2],ht=H[0]*G[1]+H[1]*G[3],_t=H[2]*G[0]+H[3]*G[2],gt=H[2]*G[1]+H[3]*G[3],Pt=(ot+gt)/2,Rt=Math.sqrt((ot+gt)**2-4*(ot*gt-_t*ht))/2,Ft=Pt+Rt||1,Ct=Pt-Rt||1;return[Math.sqrt(Ft),Math.sqrt(Ct)]}static normalizeRect(H){const G=H.slice(0);return H[0]>H[2]&&(G[0]=H[2],G[2]=H[0]),H[1]>H[3]&&(G[1]=H[3],G[3]=H[1]),G}static intersect(H,G){const ot=Math.max(Math.min(H[0],H[2]),Math.min(G[0],G[2])),ht=Math.min(Math.max(H[0],H[2]),Math.max(G[0],G[2]));if(ot>ht)return null;const _t=Math.max(Math.min(H[1],H[3]),Math.min(G[1],G[3])),gt=Math.min(Math.max(H[1],H[3]),Math.max(G[1],G[3]));return _t>gt?null:[ot,_t,ht,gt]}static bezierBoundingBox(H,G,ot,ht,_t,gt,Pt,Rt){const Ft=[],Ct=[[],[]];let Mt,kt,It,At,Nt,jt,Ut,Wt;for(let qt=0;qt<2;++qt){if(qt===0?(kt=6*H-12*ot+6*_t,Mt=-3*H+9*ot-9*_t+3*Pt,It=3*ot-3*H):(kt=6*G-12*ht+6*gt,Mt=-3*G+9*ht-9*gt+3*Rt,It=3*ht-3*G),Math.abs(Mt)<1e-12){if(Math.abs(kt)<1e-12)continue;At=-It/kt,0<At&&At<1&&Ft.push(At);continue}Ut=kt*kt-4*It*Mt,Wt=Math.sqrt(Ut),!(Ut<0)&&(Nt=(-kt+Wt)/(2*Mt),0<Nt&&Nt<1&&Ft.push(Nt),jt=(-kt-Wt)/(2*Mt),0<jt&&jt<1&&Ft.push(jt))}let Ot=Ft.length,wt;const Dt=Ot;for(;Ot--;)At=Ft[Ot],wt=1-At,Ct[0][Ot]=wt*wt*wt*H+3*wt*wt*At*ot+3*wt*At*At*_t+At*At*At*Pt,Ct[1][Ot]=wt*wt*wt*G+3*wt*wt*At*ht+3*wt*At*At*gt+At*At*At*Rt;return Ct[0][Dt]=H,Ct[1][Dt]=G,Ct[0][Dt+1]=Pt,Ct[1][Dt+1]=Rt,Ct[0].length=Ct[1].length=Dt+2,[Math.min(...Ct[0]),Math.min(...Ct[1]),Math.max(...Ct[0]),Math.max(...Ct[1])]}}e.Util=lt;const ct=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function J(Y){if(Y[0]>="\xEF"){let G;if(Y[0]==="\xFE"&&Y[1]==="\xFF"?G="utf-16be":Y[0]==="\xFF"&&Y[1]==="\xFE"?G="utf-16le":Y[0]==="\xEF"&&Y[1]==="\xBB"&&Y[2]==="\xBF"&&(G="utf-8"),G)try{const ot=new TextDecoder(G,{fatal:!0}),ht=O(Y);return ot.decode(ht)}catch(ot){Z(`stringToPDFString: "${ot}".`)}}const H=[];for(let G=0,ot=Y.length;G<ot;G++){const ht=ct[Y.charCodeAt(G)];H.push(ht?String.fromCharCode(ht):Y.charAt(G))}return H.join("")}function ft(Y){return Y.replace(/([()\\\n\r])/g,H=>H===`
`?"\\n":H==="\r"?"\\r":`\\${H}`)}function pt(Y){return/^[\x00-\x7F]*$/.test(Y)}function ut(Y){const H=["\xFE\xFF"];for(let G=0,ot=Y.length;G<ot;G++){const ht=Y.charCodeAt(G);H.push(String.fromCharCode(ht>>8&255),String.fromCharCode(ht&255))}return H.join("")}function mt(Y){return decodeURIComponent(escape(Y))}function vt(Y){return unescape(encodeURIComponent(Y))}function yt(Y){return typeof Y=="object"&&Y!==null&&Y.byteLength!==void 0}function St(Y,H){if(Y.length!==H.length)return!1;for(let G=0,ot=Y.length;G<ot;G++)if(Y[G]!==H[G])return!1;return!0}function Et(Y=new Date){return[Y.getUTCFullYear().toString(),(Y.getUTCMonth()+1).toString().padStart(2,"0"),Y.getUTCDate().toString().padStart(2,"0"),Y.getUTCHours().toString().padStart(2,"0"),Y.getUTCMinutes().toString().padStart(2,"0"),Y.getUTCSeconds().toString().padStart(2,"0")].join("")}function bt(){const Y=Object.create(null);let H=!1;return Object.defineProperty(Y,"settled",{get(){return H}}),Y.promise=new Promise(function(G,ot){Y.resolve=function(ht){H=!0,G(ht)},Y.reject=function(ht){H=!0,ot(ht)}}),Y}},(I,e,u)=>{u(3)},(I,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const u=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=u},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var I,u,n,j,F,L,w,b,d,Gt,E;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:A,NodeCMapReaderFactory:l,NodeStandardFontDataFactory:g}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=A,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=l,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=g}let createPDFNetworkStream;function setPDFNetworkStreamFactory(A){createPDFNetworkStream=A}function getDocument(A){const l=new PDFDocumentLoadingTask;let g;if(typeof A=="string"||A instanceof URL)g={url:A};else if((0,_util.isArrayBuffer)(A))g={data:A};else if(A instanceof PDFDataRangeTransport)g={range:A};else{if(typeof A!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!A.url&&!A.data&&!A.range)throw new Error("Invalid parameter object: need either .data, .range or .url");g=A}const r=Object.create(null);let _=null,C=null;for(const T in g){const s=g[T];switch(T){case"url":if(typeof window!="undefined")try{r[T]=new URL(s,window.location).href;continue}catch(c){(0,_util.warn)(`Cannot create valid URL: "${c}".`)}else if(typeof s=="string"||s instanceof URL){r[T]=s.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":_=s;continue;case"worker":C=s;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer!="undefined"&&s instanceof Buffer)r[T]=new Uint8Array(s);else{if(s instanceof Uint8Array)break;if(typeof s=="string")r[T]=(0,_util.stringToBytes)(s);else if(typeof s=="object"&&s!==null&&!isNaN(s.length))r[T]=new Uint8Array(s);else if((0,_util.isArrayBuffer)(s))r[T]=new Uint8Array(s);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}r[T]=s}if(r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory,r.ignoreErrors=r.stopAtErrors!==!0,r.fontExtraProperties=r.fontExtraProperties===!0,r.pdfBug=r.pdfBug===!0,r.enableXfa=r.enableXfa===!0,(!Number.isInteger(r.rangeChunkSize)||r.rangeChunkSize<1)&&(r.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof r.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),(!Number.isInteger(r.maxImageSize)||r.maxImageSize<-1)&&(r.maxImageSize=-1),typeof r.cMapUrl!="string"&&(r.cMapUrl=null),typeof r.standardFontDataUrl!="string"&&(r.standardFontDataUrl=null),typeof r.useWorkerFetch!="boolean"&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof r.isEvalSupported!="boolean"&&(r.isEvalSupported=!0),typeof r.disableFontFace!="boolean"&&(r.disableFontFace=_is_node.isNodeJS),typeof r.useSystemFonts!="boolean"&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace),(typeof r.ownerDocument!="object"||r.ownerDocument===null)&&(r.ownerDocument=globalThis.document),typeof r.disableRange!="boolean"&&(r.disableRange=!1),typeof r.disableStream!="boolean"&&(r.disableStream=!1),typeof r.disableAutoFetch!="boolean"&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!C){const T={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};C=T.port?PDFWorker.fromPort(T):new PDFWorker(T),l._worker=C}const S=l.docId;return C.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const T=_fetchDocument(C,r,_,S),s=new Promise(function(c){let v;_?v=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},_):r.data||(v=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),c(v)});return Promise.all([T,s]).then(function([c,v]){if(l.destroyed)throw new Error("Loading aborted");const M=new _message_handler.MessageHandler(S,c,C.port),k=new WorkerTransport(M,l,v,r);l._transport=k,M.send("Ready",null)})}).catch(l._capability.reject),l}async function _fetchDocument(A,l,g,r){if(A.destroyed)throw new Error("Worker was destroyed");g&&(l.length=g.length,l.initialData=g.initialData,l.progressiveDone=g.progressiveDone,l.contentDispositionFilename=g.contentDispositionFilename);const _=await A.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.14.305",source:{data:l.data,url:l.url,password:l.password,disableAutoFetch:l.disableAutoFetch,rangeChunkSize:l.rangeChunkSize,length:l.length},maxImageSize:l.maxImageSize,disableFontFace:l.disableFontFace,docBaseUrl:l.docBaseUrl,ignoreErrors:l.ignoreErrors,isEvalSupported:l.isEvalSupported,fontExtraProperties:l.fontExtraProperties,enableXfa:l.enableXfa,useSystemFonts:l.useSystemFonts,cMapUrl:l.useWorkerFetch?l.cMapUrl:null,standardFontDataUrl:l.useWorkerFetch?l.standardFontDataUrl:null});if(A.destroyed)throw new Error("Worker was destroyed");return _}const e=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${zt(e,I)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var l;this.destroyed=!0,await((l=this._transport)==null?void 0:l.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=e;I=new WeakMap,xt(PDFDocumentLoadingTask,I,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,g,r=!1,_=null){this.length=l,this.initialData=g,this.progressiveDone=r,this.contentDispositionFilename=_,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,g){for(const r of this._rangeListeners)r(l,g)}onDataProgress(l,g){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(l,g)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const g of this._progressiveReadListeners)g(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,g){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,g){this._pdfInfo=l,this._transport=g,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,g,r,_,C=!1){this._pageIndex=l,this._pageInfo=g,this._ownerDocument=_,this._transport=r,this._stats=C?new _display_utils.StatTimer:null,this._pdfBug=C,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:g=this.rotate,offsetX:r=0,offsetY:_=0,dontFlip:C=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:g,offsetX:r,offsetY:_,dontFlip:C})}getAnnotations({intent:l="display"}={}){const g=this._transport.getRenderingIntent(l);let r=this._annotationPromises.get(g.cacheKey);return r||(r=this._transport.getAnnotations(this._pageIndex,g.renderingIntent),this._annotationPromises.set(g.cacheKey,r),r=r.then(_=>{for(const C of _)C.titleObj!==void 0&&Object.defineProperty(C,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),C.titleObj.str}}),C.contentsObj!==void 0&&Object.defineProperty(C,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),C.contentsObj.str}});return _})),r}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var l;return((l=this._transport._htmlForXfa)==null?void 0:l.children[this._pageIndex])||null}render({canvasContext:l,viewport:g,intent:r="display",annotationMode:_=_util.AnnotationMode.ENABLE,transform:C=null,imageLayer:S=null,canvasFactory:T=null,background:s=null,optionalContentConfigPromise:c=null,annotationCanvasMap:v=null,pageColors:M=null}){var Z,tt;((Z=arguments[0])==null?void 0:Z.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&_===_util.AnnotationMode.ENABLE&&(_=_util.AnnotationMode.ENABLE_FORMS)),((tt=arguments[0])==null?void 0:tt.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&_===_util.AnnotationMode.ENABLE&&(_=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const k=this._transport.getRenderingIntent(r,_);this.pendingCleanup=!1,c||(c=this._transport.getOptionalContentConfig());let D=this._intentStates.get(k.cacheKey);D||(D=Object.create(null),this._intentStates.set(k.cacheKey,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const N=T||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),U=!!(k.renderingIntent&_util.RenderingIntentFlag.PRINT);D.displayReadyCapability||(D.displayReadyCapability=(0,_util.createPromiseCapability)(),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(k));const X=Q=>{D.renderTasks.delete(V),(this.cleanupAfterRender||U)&&(this.pendingCleanup=!0),this._tryCleanup(),Q?(V.capability.reject(Q),this._abortOperatorList({intentState:D,reason:Q instanceof Error?Q:new Error(Q)})):V.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},V=new InternalRenderTask({callback:X,params:{canvasContext:l,viewport:g,transform:C,imageLayer:S,background:s},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:v,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:N,useRequestAnimationFrame:!U,pdfBug:this._pdfBug,pageColors:M});(D.renderTasks||(D.renderTasks=new Set)).add(V);const K=V.task;return Promise.all([D.displayReadyCapability.promise,c]).then(([Q,et])=>{if(this.pendingCleanup){X();return}this._stats&&this._stats.time("Rendering"),V.initializeGraphics({transparency:Q,optionalContentConfig:et}),V.operatorListChanged()}).catch(X),K}getOperatorList({intent:l="display",annotationMode:g=_util.AnnotationMode.ENABLE}={}){function r(){C.operatorList.lastChunk&&(C.opListReadCapability.resolve(C.operatorList),C.renderTasks.delete(S))}const _=this._transport.getRenderingIntent(l,g,!0);let C=this._intentStates.get(_.cacheKey);C||(C=Object.create(null),this._intentStates.set(_.cacheKey,C));let S;return C.opListReadCapability||(S=Object.create(null),S.operatorListChanged=r,C.opListReadCapability=(0,_util.createPromiseCapability)(),(C.renderTasks||(C.renderTasks=new Set)).add(S),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(_)),C.opListReadCapability.promise}streamTextContent({disableCombineTextItems:l=!1,includeMarkedContent:g=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:l!==!0,includeMarkedContent:g===!0},{highWaterMark:100,size(_){return _.items.length}})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));const g=this.streamTextContent(l);return new Promise(function(r,_){function C(){S.read().then(function({value:s,done:c}){if(c){r(T);return}Object.assign(T.styles,s.styles),T.items.push(...s.items),C()},_)}const S=g.getReader(),T={items:[],styles:Object.create(null)};C()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const l=[];for(const g of this._intentStates.values())if(this._abortOperatorList({intentState:g,reason:new Error("Page was destroyed."),force:!0}),!g.opListReadCapability)for(const r of g.renderTasks)l.push(r.completed),r.cancel();this.objs.clear();for(const g of this._bitmaps)g.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(l)}cleanup(l=!1){return this.pendingCleanup=!0,this._tryCleanup(l)}_tryCleanup(l=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:g,operatorList:r}of this._intentStates.values())if(g.size>0||!r.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,l&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const g of this._bitmaps)g.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(l,g){const r=this._intentStates.get(g);!r||(this._stats&&this._stats.timeEnd("Page Request"),r.displayReadyCapability&&r.displayReadyCapability.resolve(l))}_renderPageChunk(l,g){for(let r=0,_=l.length;r<_;r++)g.operatorList.fnArray.push(l.fnArray[r]),g.operatorList.argsArray.push(l.argsArray[r]);g.operatorList.lastChunk=l.lastChunk;for(const r of g.renderTasks)r.operatorListChanged();l.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:l,cacheKey:g}){const _=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:g,annotationStorage:l&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),C=this._intentStates.get(g);C.streamReader=_;const S=()=>{_.read().then(({value:T,done:s})=>{if(s){C.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(T,C),S())},T=>{if(C.streamReader=null,!this._transport.destroyed){if(C.operatorList){C.operatorList.lastChunk=!0;for(const s of C.renderTasks)s.operatorListChanged();this._tryCleanup()}if(C.displayReadyCapability)C.displayReadyCapability.reject(T);else if(C.opListReadCapability)C.opListReadCapability.reject(T);else throw T}})};S()}_abortOperatorList({intentState:l,reason:g,force:r=!1}){if(!!l.streamReader){if(!r){if(l.renderTasks.size>0)return;if(g instanceof _display_utils.RenderingCancelledException){l.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:l,reason:g,force:!0}),l.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(l.streamReader.cancel(new _util.AbortException(g.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[_,C]of this._intentStates)if(C===l){this._intentStates.delete(_);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(l,g){const r={data:structuredClone(l,g)};this._deferred.then(()=>{for(const _ of this._listeners)_.call(this,r)})}addEventListener(l,g){this._listeners.push(g)}removeEventListener(l,g){const r=this._listeners.indexOf(g);this._listeners.splice(r,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const A=(u=document==null?void 0:document.currentScript)==null?void 0:u.src;A&&(PDFWorkerUtil.fallbackWorkerSrc=A.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(A,l){let g;try{if(g=new URL(A),!g.origin||g.origin==="null")return!1}catch{return!1}const r=new URL(l,g);return g.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(A){const l=`importScripts("${A}");`;return URL.createObjectURL(new Blob([l]))}}const _PDFWorker=class{constructor({name:A=null,port:l=null,verbosity:g=(0,_util.getVerbosityLevel)()}={}){if(l&&dt(_PDFWorker,n).has(l))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=A,this.destroyed=!1,this.verbosity=g,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,l){dt(_PDFWorker,n).set(l,this),this._initializeFromPort(l);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(A){this._port=A,this._messageHandler=new _message_handler.MessageHandler("main","worker",A),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker!="undefined"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let A=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,A)||(A=PDFWorkerUtil.createCDNWrapper(new URL(A,window.location).href));const l=new Worker(A),g=new _message_handler.MessageHandler("main","worker",l),r=()=>{l.removeEventListener("error",_),g.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},_=()=>{this._webWorker||r()};l.addEventListener("error",_),g.on("test",S=>{if(l.removeEventListener("error",_),this.destroyed){r();return}S?(this._messageHandler=g,this._port=l,this._webWorker=l,this._readyCapability.resolve(),g.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),g.destroy(),l.terminate())}),g.on("ready",S=>{if(l.removeEventListener("error",_),this.destroyed){r();return}try{C()}catch{this._setupFakeWorker()}});const C=()=>{const S=new Uint8Array;g.send("test",S,[S.buffer])};C();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(A=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const l=new LoopbackPort;this._port=l;const g=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(g+"_worker",g,l);A.setup(r,l);const _=new _message_handler.MessageHandler(g,g+"_worker",l);this._messageHandler=_,this._readyCapability.resolve(),_.send("configure",{verbosity:this.verbosity})}).catch(A=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${A.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),dt(_PDFWorker,n).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(A){if(!(A!=null&&A.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return dt(this,n).has(A.port)?dt(this,n).get(A.port):new _PDFWorker(A)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var A;try{return((A=globalThis.pdfjsWorker)==null?void 0:A.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;n=new WeakMap,xt(PDFWorker,n,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(l,g,r,_){xt(this,j,null);xt(this,F,new Map);xt(this,L,new Map);xt(this,w,null);this.messageHandler=l,this.loadingTask=g,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:g.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:_.ownerDocument,styleElement:_.styleElement}),this._params=_,_.useWorkerFetch||(this.CMapReaderFactory=new _.CMapReaderFactory({baseUrl:_.cMapUrl,isCompressed:_.cMapPacked}),this.StandardFontDataFactory=new _.StandardFontDataFactory({baseUrl:_.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return dt(this,j)}getRenderingIntent(l,g=_util.AnnotationMode.ENABLE,r=!1){let _=_util.RenderingIntentFlag.DISPLAY,C="";switch(l){case"any":_=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":_=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${l}`)}switch(g){case _util.AnnotationMode.DISABLE:_+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:_+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:_+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,C=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${g}`)}return r&&(_+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:_,cacheKey:`${_}_${C}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const r of dt(this,F).values())l.push(r._destroy());dt(this,F).clear(),dt(this,L).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const g=this.messageHandler.sendWithPromise("Terminate",null);return l.push(g),Promise.all(l).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Tt(this,w,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:g}=this;l.on("GetReader",(r,_)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=C=>{this._lastProgress={loaded:C.loaded,total:C.total}},_.onPull=()=>{this._fullReader.read().then(function({value:C,done:S}){if(S){_.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(C),"GetReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array(C),1,[C])}).catch(C=>{_.error(C)})},_.onCancel=C=>{this._fullReader.cancel(C),_.ready.catch(S=>{if(!this.destroyed)throw S})}}),l.on("ReaderHeadersReady",r=>{const _=(0,_util.createPromiseCapability)(),C=this._fullReader;return C.headersReady.then(()=>{var S;(!C.isStreamingSupported||!C.isRangeSupported)&&(this._lastProgress&&((S=g.onProgress)==null||S.call(g,this._lastProgress)),C.onProgress=T=>{var s;(s=g.onProgress)==null||s.call(g,{loaded:T.loaded,total:T.total})}),_.resolve({isStreamingSupported:C.isStreamingSupported,isRangeSupported:C.isRangeSupported,contentLength:C.contentLength})},_.reject),_.promise}),l.on("GetRangeReader",(r,_)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const C=this._networkStream.getRangeReader(r.begin,r.end);if(!C){_.close();return}_.onPull=()=>{C.read().then(function({value:S,done:T}){if(T){_.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(S),"GetRangeReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array(S),1,[S])}).catch(S=>{_.error(S)})},_.onCancel=S=>{C.cancel(S),_.ready.catch(T=>{if(!this.destroyed)throw T})}}),l.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,g._capability.resolve(new PDFDocumentProxy(r,this))}),l.on("DocException",function(r){let _;switch(r.name){case"PasswordException":_=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":_=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":_=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":_=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":_=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}g._capability.reject(_)}),l.on("PasswordRequest",r=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),g.onPassword){const _=C=>{C instanceof Error?this._passwordCapability.reject(C):this._passwordCapability.resolve({password:C})};try{g.onPassword(_,r.code)}catch(C){this._passwordCapability.reject(C)}}else this._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return this._passwordCapability.promise}),l.on("DataLoaded",r=>{var _;(_=g.onProgress)==null||_.call(g,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),l.on("StartRenderPage",r=>{if(this.destroyed)return;dt(this,F).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),l.on("commonobj",([r,_,C])=>{var S;if(!this.destroyed&&!this.commonObjs.has(r))switch(_){case"Font":const T=this._params;if("error"in C){const v=C.error;(0,_util.warn)(`Error during font loading: ${v}`),this.commonObjs.resolve(r,v);break}let s=null;T.pdfBug&&((S=globalThis.FontInspector)==null?void 0:S.enabled)&&(s={registerFont(v,M){globalThis.FontInspector.fontAdded(v,M)}});const c=new _font_loader.FontFaceObject(C,{isEvalSupported:T.isEvalSupported,disableFontFace:T.disableFontFace,ignoreErrors:T.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:s});this.fontLoader.bind(c).catch(v=>l.sendWithPromise("FontFallback",{id:r})).finally(()=>{!T.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(r,c)});break;case"FontPath":case"Image":this.commonObjs.resolve(r,C);break;default:throw new Error(`Got unknown common object type ${_}`)}}),l.on("obj",([r,_,C,S])=>{var s;if(this.destroyed)return;const T=dt(this,F).get(_);if(!T.objs.has(r))switch(C){case"Image":T.objs.resolve(r,S);const c=8e6;if(S){let v;if(S.bitmap){const{bitmap:M,width:k,height:D}=S;v=k*D*4,T._bitmaps.add(M)}else v=((s=S.data)==null?void 0:s.length)||0;v>c&&(T.cleanupAfterRender=!0)}break;case"Pattern":T.objs.resolve(r,S);break;default:throw new Error(`Got unknown object type ${C}`)}}),l.on("DocProgress",r=>{var _;this.destroyed||(_=g.onProgress)==null||_.call(g,{loaded:r.loaded,total:r.total})}),l.on("DocStats",r=>{this.destroyed||Tt(this,j,Object.freeze({streamTypes:Object.freeze(r.streamTypes),fontTypes:Object.freeze(r.fontTypes)}))}),l.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),l.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:l}){var g,r;this.destroyed||(r=(g=this.loadingTask).onUnsupportedFeature)==null||r.call(g,l)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const g=l-1,r=dt(this,L).get(g);if(r)return r;const _=this.messageHandler.sendWithPromise("GetPage",{pageIndex:g}).then(C=>{if(this.destroyed)throw new Error("Transport destroyed");const S=new PDFPageProxy(g,C,this,this._params.ownerDocument,this._params.pdfBug);return dt(this,F).set(g,S),S});return dt(this,L).set(g,_),_}getPageIndex(l){return typeof l!="object"||l===null||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,g){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:g})}saveDocument(){var l,g;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(g=(l=this._fullReader)==null?void 0:l.filename)!=null?g:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return typeof l!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return dt(this,w)||Tt(this,w,this.messageHandler.sendWithPromise("GetMetadata",null).then(l=>{var g,r,_,C;return{info:l[0],metadata:l[1]?new _metadata.Metadata(l[1]):null,contentDispositionFilename:(r=(g=this._fullReader)==null?void 0:g.filename)!=null?r:null,contentLength:(C=(_=this._fullReader)==null?void 0:_.contentLength)!=null?C:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(l=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const g of dt(this,F).values())if(!g.cleanup())throw new Error(`startCleanup: Page ${g.pageNumber} is currently rendering.`);this.commonObjs.clear(),l||this.fontLoader.clear(),Tt(this,w,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const l=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l.disableAutoFetch,enableXfa:l.enableXfa})}}j=new WeakMap,F=new WeakMap,L=new WeakMap,w=new WeakMap;class PDFObjects{constructor(){xt(this,d);xt(this,b,Object.create(null))}get(l,g=null){if(g){const _=Lt(this,d,Gt).call(this,l);return _.capability.promise.then(()=>g(_.data)),null}const r=dt(this,b)[l];if(!(r!=null&&r.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${l}.`);return r.data}has(l){const g=dt(this,b)[l];return(g==null?void 0:g.capability.settled)||!1}resolve(l,g=null){const r=Lt(this,d,Gt).call(this,l);r.data=g,r.capability.resolve()}clear(){Tt(this,b,Object.create(null))}}b=new WeakMap,d=new WeakSet,Gt=function(l){const g=dt(this,b)[l];return g||(dt(this,b)[l]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(l){this._internalRenderTask=l,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;const R=class{constructor({callback:l,params:g,objs:r,commonObjs:_,annotationCanvasMap:C,operatorList:S,pageIndex:T,canvasFactory:s,useRequestAnimationFrame:c=!1,pdfBug:v=!1,pageColors:M=null}){this.callback=l,this.params=g,this.objs=r,this.commonObjs=_,this.annotationCanvasMap=C,this.operatorListIdx=null,this.operatorList=S,this._pageIndex=T,this.canvasFactory=s,this._pdfBug=v,this.pageColors=M,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=g.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:g}){var s;if(this.cancelled)return;if(this._canvas){if(dt(R,E).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");dt(R,E).add(this._canvas)}this._pdfBug&&((s=globalThis.StepperManager)==null?void 0:s.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:_,transform:C,imageLayer:S,background:T}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,S,g,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:C,viewport:_,transparency:l,background:T}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(l=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&dt(R,E).delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&dt(R,E).delete(this._canvas),this.callback())))}};let InternalRenderTask=R;E=new WeakMap,xt(InternalRenderTask,E,new WeakSet);const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=s,e.getFilenameFromUrl=r,e.getPdfFilenameFromUrl=_,e.getXfaPageViewport=M,e.isDataScheme=l,e.isPdfFile=g,e.isValidFetchUrl=S,e.loadScript=T;var n=u(6),j=u(1);const F="http://www.w3.org/2000/svg",k=class{};let L=k;Bt(L,"CSS",96),Bt(L,"PDF",72),Bt(L,"PDF_TO_CSS_UNITS",k.CSS/k.PDF),e.PixelsPerInch=L;class w extends n.BaseCanvasFactory{constructor({ownerDocument:N=globalThis.document}={}){super(),this._document=N}_createCanvas(N,U){const X=this._document.createElement("canvas");return X.width=N,X.height=U,X}}e.DOMCanvasFactory=w;async function b(D,N=!1){if(S(D,document.baseURI)){const U=await fetch(D);if(!U.ok)throw new Error(U.statusText);return N?new Uint8Array(await U.arrayBuffer()):(0,j.stringToBytes)(await U.text())}return new Promise((U,X)=>{const V=new XMLHttpRequest;V.open("GET",D,!0),N&&(V.responseType="arraybuffer"),V.onreadystatechange=()=>{if(V.readyState===XMLHttpRequest.DONE){if(V.status===200||V.status===0){let K;if(N&&V.response?K=new Uint8Array(V.response):!N&&V.responseText&&(K=(0,j.stringToBytes)(V.responseText)),K){U(K);return}}X(new Error(V.statusText))}},V.send(null)})}class d extends n.BaseCMapReaderFactory{_fetchData(N,U){return b(N,this.isCompressed).then(X=>({cMapData:X,compressionType:U}))}}e.DOMCMapReaderFactory=d;class y extends n.BaseStandardFontDataFactory{_fetchData(N){return b(N,!0)}}e.DOMStandardFontDataFactory=y;class E extends n.BaseSVGFactory{_createSVG(N){return document.createElementNS(F,N)}}e.DOMSVGFactory=E;class R{constructor({viewBox:N,scale:U,rotation:X,offsetX:V=0,offsetY:K=0,dontFlip:Z=!1}){this.viewBox=N,this.scale=U,this.rotation=X,this.offsetX=V,this.offsetY=K;const tt=(N[2]+N[0])/2,Q=(N[3]+N[1])/2;let et,at,P,h;switch(X%=360,X<0&&(X+=360),X){case 180:et=-1,at=0,P=0,h=1;break;case 90:et=0,at=1,P=1,h=0;break;case 270:et=0,at=-1,P=-1,h=0;break;case 0:et=1,at=0,P=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Z&&(P=-P,h=-h);let o,m,t,i;et===0?(o=Math.abs(Q-N[1])*U+V,m=Math.abs(tt-N[0])*U+K,t=Math.abs(N[3]-N[1])*U,i=Math.abs(N[2]-N[0])*U):(o=Math.abs(tt-N[0])*U+V,m=Math.abs(Q-N[1])*U+K,t=Math.abs(N[2]-N[0])*U,i=Math.abs(N[3]-N[1])*U),this.transform=[et*U,at*U,P*U,h*U,o-et*U*tt-P*U*Q,m-at*U*tt-h*U*Q],this.width=t,this.height=i}clone({scale:N=this.scale,rotation:U=this.rotation,offsetX:X=this.offsetX,offsetY:V=this.offsetY,dontFlip:K=!1}={}){return new R({viewBox:this.viewBox.slice(),scale:N,rotation:U,offsetX:X,offsetY:V,dontFlip:K})}convertToViewportPoint(N,U){return j.Util.applyTransform([N,U],this.transform)}convertToViewportRectangle(N){const U=j.Util.applyTransform([N[0],N[1]],this.transform),X=j.Util.applyTransform([N[2],N[3]],this.transform);return[U[0],U[1],X[0],X[1]]}convertToPdfPoint(N,U){return j.Util.applyInverseTransform([N,U],this.transform)}}e.PageViewport=R;class A extends j.BaseException{constructor(N,U){super(N,"RenderingCancelledException"),this.type=U}}e.RenderingCancelledException=A;function l(D){const N=D.length;let U=0;for(;U<N&&D[U].trim()==="";)U++;return D.substring(U,U+5).toLowerCase()==="data:"}function g(D){return typeof D=="string"&&/\.pdf$/i.test(D)}function r(D){const N=D.indexOf("#"),U=D.indexOf("?"),X=Math.min(N>0?N:D.length,U>0?U:D.length);return D.substring(D.lastIndexOf("/",X)+1,X)}function _(D,N="document.pdf"){if(typeof D!="string")return N;if(l(D))return(0,j.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),N;const U=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,X=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,V=U.exec(D);let K=X.exec(V[1])||X.exec(V[2])||X.exec(V[3]);if(K&&(K=K[0],K.includes("%")))try{K=X.exec(decodeURIComponent(K))[0]}catch{}return K||N}class C{constructor(){this.started=Object.create(null),this.times=[]}time(N){N in this.started&&(0,j.warn)(`Timer is already running for ${N}`),this.started[N]=Date.now()}timeEnd(N){N in this.started||(0,j.warn)(`Timer has not been started for ${N}`),this.times.push({name:N,start:this.started[N],end:Date.now()}),delete this.started[N]}toString(){const N=[];let U=0;for(const X of this.times){const V=X.name;V.length>U&&(U=V.length)}for(const X of this.times){const V=X.end-X.start;N.push(`${X.name.padEnd(U)} ${V}ms
`)}return N.join("")}}e.StatTimer=C;function S(D,N){try{const{protocol:U}=N?new URL(D,N):new URL(D);return U==="http:"||U==="https:"}catch{return!1}}function T(D,N=!1){return new Promise((U,X)=>{const V=document.createElement("script");V.src=D,V.onload=function(K){N&&V.remove(),U(K)},V.onerror=function(){X(new Error(`Cannot load script at: ${V.src}`))},(document.head||document.documentElement).appendChild(V)})}function s(D){console.log("Deprecated API usage: "+D)}let c;class v{static toDateObject(N){if(!N||typeof N!="string")return null;c||(c=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const U=c.exec(N);if(!U)return null;const X=parseInt(U[1],10);let V=parseInt(U[2],10);V=V>=1&&V<=12?V-1:0;let K=parseInt(U[3],10);K=K>=1&&K<=31?K:1;let Z=parseInt(U[4],10);Z=Z>=0&&Z<=23?Z:0;let tt=parseInt(U[5],10);tt=tt>=0&&tt<=59?tt:0;let Q=parseInt(U[6],10);Q=Q>=0&&Q<=59?Q:0;const et=U[7]||"Z";let at=parseInt(U[8],10);at=at>=0&&at<=23?at:0;let P=parseInt(U[9],10)||0;return P=P>=0&&P<=59?P:0,et==="-"?(Z+=at,tt+=P):et==="+"&&(Z-=at,tt-=P),new Date(Date.UTC(X,V,K,Z,tt,Q))}}e.PDFDateString=v;function M(D,{scale:N=1,rotation:U=0}){const{width:X,height:V}=D.attributes.style,K=[0,0,parseInt(X),parseInt(V)];return new R({viewBox:K,scale:N,rotation:U})}},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=u(1);class j{constructor(){this.constructor===j&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,y){if(d<=0||y<=0)throw new Error("Invalid canvas size");const E=this._createCanvas(d,y);return{canvas:E,context:E.getContext("2d")}}reset(d,y,E){if(!d.canvas)throw new Error("Canvas is not specified");if(y<=0||E<=0)throw new Error("Invalid canvas size");d.canvas.width=y,d.canvas.height=E}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,y){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=j;class F{constructor({baseUrl:d=null,isCompressed:y=!1}){this.constructor===F&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=y}async fetch({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");const y=this.baseUrl+d+(this.isCompressed?".bcmap":""),E=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(y,E).catch(R=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${y}`)})}_fetchData(d,y){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=F;class L{constructor({baseUrl:d=null}){this.constructor===L&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");const y=`${this.baseUrl}${d}`;return this._fetchData(y).catch(E=>{throw new Error(`Unable to load font data at: ${y}`)})}_fetchData(d){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=L;class w{constructor(){this.constructor===w&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,y){if(d<=0||y<=0)throw new Error("Invalid SVG dimensions");const E=this._createSVG("svg:svg");return E.setAttribute("version","1.1"),E.setAttribute("width",`${d}px`),E.setAttribute("height",`${y}px`),E.setAttribute("preserveAspectRatio","none"),E.setAttribute("viewBox",`0 0 ${d} ${y}`),E}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=w},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=u(1);class j{constructor({docId:b,onUnsupportedFeature:d,ownerDocument:y=globalThis.document,styleElement:E=null}){this.constructor===j&&(0,n.unreachable)("Cannot initialize BaseFontLoader."),this.docId=b,this._onUnsupportedFeature=d,this._document=y,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(b){this.nativeFontFaces.push(b),this._document.fonts.add(b)}insertRule(b){let d=this.styleElement;d||(d=this.styleElement=this._document.createElement("style"),d.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(d));const y=d.sheet;y.insertRule(b,y.cssRules.length)}clear(){for(const b of this.nativeFontFaces)this._document.fonts.delete(b);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(b){if(b.attached||b.missingFile)return;if(b.attached=!0,this.isFontLoadingAPISupported){const y=b.createNativeFontFace();if(y){this.addNativeFontFace(y);try{await y.loaded}catch(E){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${y.family}': '${E}'.`),b.disableFontFace=!0,E}}return}const d=b.createFontFaceRule();if(d){if(this.insertRule(d),this.isSyncFontLoadingSupported)return;await new Promise(y=>{const E=this._queueLoadingCallback(y);this._prepareFontLoadEvent([d],[b],E)})}}_queueLoadingCallback(b){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var d;const b=!!((d=this._document)!=null&&d.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",b)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(b,d,y){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let F;e.FontLoader=F,e.FontLoader=F=class extends j{constructor(b){super(b),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let b=!1;if(typeof navigator=="undefined")b=!0;else{const d=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(d==null?void 0:d[1])>=14&&(b=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",b)}_queueLoadingCallback(b){function d(){for((0,n.assert)(!E.done,"completeRequest() cannot be called twice."),E.done=!0;y.requests.length>0&&y.requests[0].done;){const R=y.requests.shift();setTimeout(R.callback,0)}}const y=this.loadingContext,E={id:`pdfjs-font-loading-${y.nextRequestId++}`,done:!1,complete:d,callback:b};return y.requests.push(E),E}get _loadTestFont(){const b=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,n.shadow)(this,"_loadTestFont",b())}_prepareFontLoadEvent(b,d,y){function E(X,V){return X.charCodeAt(V)<<24|X.charCodeAt(V+1)<<16|X.charCodeAt(V+2)<<8|X.charCodeAt(V+3)&255}function R(X,V,K,Z){const tt=X.substring(0,V),Q=X.substring(V+K);return tt+Z+Q}let A,l;const g=this._document.createElement("canvas");g.width=1,g.height=1;const r=g.getContext("2d");let _=0;function C(X,V){if(_++,_>30){(0,n.warn)("Load test font never loaded."),V();return}if(r.font="30px "+X,r.fillText(".",0,20),r.getImageData(0,0,1,1).data[3]>0){V();return}setTimeout(C.bind(null,X,V))}const S=`lt${Date.now()}${this.loadTestFontId++}`;let T=this._loadTestFont;T=R(T,976,S.length,S);const c=16,v=1482184792;let M=E(T,c);for(A=0,l=S.length-3;A<l;A+=4)M=M-v+E(S,A)|0;A<S.length&&(M=M-v+E(S+"XXX",A)|0),T=R(T,c,4,(0,n.string32)(M));const k=`url(data:font/opentype;base64,${btoa(T)});`,D=`@font-face {font-family:"${S}";src:${k}}`;this.insertRule(D);const N=[];for(const X of d)N.push(X.loadedName);N.push(S);const U=this._document.createElement("div");U.style.visibility="hidden",U.style.width=U.style.height="10px",U.style.position="absolute",U.style.top=U.style.left="0px";for(const X of N){const V=this._document.createElement("span");V.textContent="Hi",V.style.fontFamily=X,U.appendChild(V)}this._document.body.appendChild(U),C(S,()=>{U.remove(),y.complete()})}};class L{constructor(b,{isEvalSupported:d=!0,disableFontFace:y=!1,ignoreErrors:E=!1,onUnsupportedFeature:R,fontRegistry:A=null}){this.compiledGlyphs=Object.create(null);for(const l in b)this[l]=b[l];this.isEvalSupported=d!==!1,this.disableFontFace=y===!0,this.ignoreErrors=E===!0,this._onUnsupportedFeature=R,this.fontRegistry=A}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let b;if(!this.cssFontInfo)b=new FontFace(this.loadedName,this.data,{});else{const d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),b=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return this.fontRegistry&&this.fontRegistry.registerFont(this),b}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const b=(0,n.bytesToString)(this.data),d=`url(data:${this.mimetype};base64,${btoa(b)});`;let y;if(!this.cssFontInfo)y=`@font-face {font-family:"${this.loadedName}";src:${d}}`;else{let E=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(E+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),y=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${E}src:${d}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,d),y}getPathGenerator(b,d){if(this.compiledGlyphs[d]!==void 0)return this.compiledGlyphs[d];let y;try{y=b.get(this.loadedName+"_path_"+d)}catch(E){if(!this.ignoreErrors)throw E;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${E}".`),this.compiledGlyphs[d]=function(R,A){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const E=[];for(const R of y){const A=R.args!==void 0?R.args.join(","):"";E.push("c.",R.cmd,"(",A,`);
`)}return this.compiledGlyphs[d]=new Function("c","size",E.join(""))}return this.compiledGlyphs[d]=function(E,R){for(const A of y)A.cmd==="scale"&&(A.args=[R,-R]),E[A.cmd].apply(E,A.args)}}}e.FontFaceObject=L},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationStorage=void 0;var n=u(9),j=u(1);class F{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(w,b){const d=this._storage.get(w);return d===void 0?b:Object.assign(b,d)}getRawValue(w){return this._storage.get(w)}setValue(w,b){const d=this._storage.get(w);let y=!1;if(d!==void 0)for(const[E,R]of Object.entries(b))d[E]!==R&&(y=!0,d[E]=R);else y=!0,this._storage.set(w,b);y&&this._setModified()}getAll(){return this._storage.size>0?(0,j.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const w=new n.MurmurHash3_64;for(const[b,d]of this._storage)w.update(`${b}:${JSON.stringify(d)}`);return w.hexdigest()}}e.AnnotationStorage=F},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=u(1);const j=3285377520,F=4294901760,L=65535;class w{constructor(d){this.h1=d?d&4294967295:j,this.h2=d?d&4294967295:j}update(d){let y,E;if(typeof d=="string"){y=new Uint8Array(d.length*2),E=0;for(let v=0,M=d.length;v<M;v++){const k=d.charCodeAt(v);k<=255?y[E++]=k:(y[E++]=k>>>8,y[E++]=k&255)}}else if((0,n.isArrayBuffer)(d))y=d.slice(),E=y.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const R=E>>2,A=E-R*4,l=new Uint32Array(y.buffer,0,R);let g=0,r=0,_=this.h1,C=this.h2;const S=3432918353,T=461845907,s=S&L,c=T&L;for(let v=0;v<R;v++)v&1?(g=l[v],g=g*S&F|g*s&L,g=g<<15|g>>>17,g=g*T&F|g*c&L,_^=g,_=_<<13|_>>>19,_=_*5+3864292196):(r=l[v],r=r*S&F|r*s&L,r=r<<15|r>>>17,r=r*T&F|r*c&L,C^=r,C=C<<13|C>>>19,C=C*5+3864292196);switch(g=0,A){case 3:g^=y[R*4+2]<<16;case 2:g^=y[R*4+1]<<8;case 1:g^=y[R*4],g=g*S&F|g*s&L,g=g<<15|g>>>17,g=g*T&F|g*c&L,R&1?_^=g:C^=g}this.h1=_,this.h2=C}hexdigest(){let d=this.h1,y=this.h2;d^=y>>>1,d=d*3981806797&F|d*36045&L,y=y*4283543511&F|((y<<16|d>>>16)*2950163797&F)>>>16,d^=y>>>1,d=d*444984403&F|d*60499&L,y=y*3301882366&F|((y<<16|d>>>16)*3120437893&F)>>>16,d^=y>>>1;const E=(d>>>0).toString(16),R=(y>>>0).toString(16);return E.padStart(8,"0")+R.padStart(8,"0")}}e.MurmurHash3_64=w},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=u(1),j=u(11),F=u(12),L=u(3),w=u(5);const b=16,d=100,y=4096,E=15,R=10,A=1e3,l=16,g=1.000001;function r(P,h){if(P._removeMirroring)throw new Error("Context is already forwarding operations.");P.__originalSave=P.save,P.__originalRestore=P.restore,P.__originalRotate=P.rotate,P.__originalScale=P.scale,P.__originalTranslate=P.translate,P.__originalTransform=P.transform,P.__originalSetTransform=P.setTransform,P.__originalResetTransform=P.resetTransform,P.__originalClip=P.clip,P.__originalMoveTo=P.moveTo,P.__originalLineTo=P.lineTo,P.__originalBezierCurveTo=P.bezierCurveTo,P.__originalRect=P.rect,P.__originalClosePath=P.closePath,P.__originalBeginPath=P.beginPath,P._removeMirroring=()=>{P.save=P.__originalSave,P.restore=P.__originalRestore,P.rotate=P.__originalRotate,P.scale=P.__originalScale,P.translate=P.__originalTranslate,P.transform=P.__originalTransform,P.setTransform=P.__originalSetTransform,P.resetTransform=P.__originalResetTransform,P.clip=P.__originalClip,P.moveTo=P.__originalMoveTo,P.lineTo=P.__originalLineTo,P.bezierCurveTo=P.__originalBezierCurveTo,P.rect=P.__originalRect,P.closePath=P.__originalClosePath,P.beginPath=P.__originalBeginPath,delete P._removeMirroring},P.save=function(){h.save(),this.__originalSave()},P.restore=function(){h.restore(),this.__originalRestore()},P.translate=function(m,t){h.translate(m,t),this.__originalTranslate(m,t)},P.scale=function(m,t){h.scale(m,t),this.__originalScale(m,t)},P.transform=function(m,t,i,a,f,p){h.transform(m,t,i,a,f,p),this.__originalTransform(m,t,i,a,f,p)},P.setTransform=function(m,t,i,a,f,p){h.setTransform(m,t,i,a,f,p),this.__originalSetTransform(m,t,i,a,f,p)},P.resetTransform=function(){h.resetTransform(),this.__originalResetTransform()},P.rotate=function(m){h.rotate(m),this.__originalRotate(m)},P.clip=function(m){h.clip(m),this.__originalClip(m)},P.moveTo=function(o,m){h.moveTo(o,m),this.__originalMoveTo(o,m)},P.lineTo=function(o,m){h.lineTo(o,m),this.__originalLineTo(o,m)},P.bezierCurveTo=function(o,m,t,i,a,f){h.bezierCurveTo(o,m,t,i,a,f),this.__originalBezierCurveTo(o,m,t,i,a,f)},P.rect=function(o,m,t,i){h.rect(o,m,t,i),this.__originalRect(o,m,t,i)},P.closePath=function(){h.closePath(),this.__originalClosePath()},P.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}function _(P){if(P._transformStack&&(P._transformStack=[]),!P.mozCurrentTransform){P._originalSave=P.save,P._originalRestore=P.restore,P._originalRotate=P.rotate,P._originalScale=P.scale,P._originalTranslate=P.translate,P._originalTransform=P.transform,P._originalSetTransform=P.setTransform,P._originalResetTransform=P.resetTransform,P._transformMatrix=P._transformMatrix||[1,0,0,1,0,0],P._transformStack=[];try{const h=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(P),"lineWidth");P._setLineWidth=h.set,P._getLineWidth=h.get,Object.defineProperty(P,"lineWidth",{set:function(m){this._setLineWidth(m*g)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(P,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(P,"mozCurrentTransformInverse",{get:function(){const[o,m,t,i,a,f]=this._transformMatrix,p=o*i-m*t,x=m*t-o*i;return[i/p,m/x,t/x,o/p,(i*a-t*f)/x,(m*a-o*f)/p]}}),P.save=function(){const o=this._transformMatrix;this._transformStack.push(o),this._transformMatrix=o.slice(0,6),this._originalSave()},P.restore=function(){this._transformStack.length===0&&(0,n.warn)("Tried to restore a ctx when the stack was already empty.");const o=this._transformStack.pop();o&&(this._transformMatrix=o,this._originalRestore())},P.translate=function(o,m){const t=this._transformMatrix;t[4]=t[0]*o+t[2]*m+t[4],t[5]=t[1]*o+t[3]*m+t[5],this._originalTranslate(o,m)},P.scale=function(o,m){const t=this._transformMatrix;t[0]*=o,t[1]*=o,t[2]*=m,t[3]*=m,this._originalScale(o,m)},P.transform=function(o,m,t,i,a,f){const p=this._transformMatrix;this._transformMatrix=[p[0]*o+p[2]*m,p[1]*o+p[3]*m,p[0]*t+p[2]*i,p[1]*t+p[3]*i,p[0]*a+p[2]*f+p[4],p[1]*a+p[3]*f+p[5]],P._originalTransform(o,m,t,i,a,f)},P.setTransform=function(o,m,t,i,a,f){this._transformMatrix=[o,m,t,i,a,f],P._originalSetTransform(o,m,t,i,a,f)},P.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],P._originalResetTransform()},P.rotate=function(o){const m=Math.cos(o),t=Math.sin(o),i=this._transformMatrix;this._transformMatrix=[i[0]*m+i[2]*t,i[1]*m+i[3]*t,i[0]*-t+i[2]*m,i[1]*-t+i[3]*m,i[4],i[5]],this._originalRotate(o)}}}class C{constructor(h){this.canvasFactory=h,this.cache=Object.create(null)}getCanvas(h,o,m,t){let i;return this.cache[h]!==void 0?(i=this.cache[h],this.canvasFactory.reset(i,o,m),i.context.setTransform(1,0,0,1,0,0)):(i=this.canvasFactory.create(o,m),this.cache[h]=i),t&&_(i.context),i}delete(h){delete this.cache[h]}clear(){for(const h in this.cache){const o=this.cache[h];this.canvasFactory.destroy(o),delete this.cache[h]}}}function S(P,h,o,m,t,i,a,f,p,x){const[O,q,B,z,W,$]=P.mozCurrentTransform;if(q===0&&B===0){const it=a*O+W,nt=Math.round(it),lt=f*z+$,ct=Math.round(lt),J=(a+p)*O+W,ft=Math.abs(Math.round(J)-nt)||1,pt=(f+x)*z+$,ut=Math.abs(Math.round(pt)-ct)||1;return P.setTransform(Math.sign(O),0,0,Math.sign(z),nt,ct),P.drawImage(h,o,m,t,i,0,0,ft,ut),P.setTransform(O,q,B,z,W,$),[ft,ut]}if(O===0&&z===0){const it=f*B+W,nt=Math.round(it),lt=a*q+$,ct=Math.round(lt),J=(f+x)*B+W,ft=Math.abs(Math.round(J)-nt)||1,pt=(a+p)*q+$,ut=Math.abs(Math.round(pt)-ct)||1;return P.setTransform(0,Math.sign(q),Math.sign(B),0,nt,ct),P.drawImage(h,o,m,t,i,0,0,ut,ft),P.setTransform(O,q,B,z,W,$),[ut,ft]}P.drawImage(h,o,m,t,i,a,f,p,x);const st=Math.hypot(O,q),rt=Math.hypot(B,z);return[st*p,rt*x]}function T(P){const{width:h,height:o}=P;if(h>A||o>A)return null;const m=1e3,t=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=h+1;let a=new Uint8Array(i*(o+1)),f,p,x;const O=h+7&-8;let q=new Uint8Array(O*o),B=0;for(const nt of P.data){let lt=128;for(;lt>0;)q[B++]=nt&lt?0:255,lt>>=1}let z=0;for(B=0,q[B]!==0&&(a[0]=1,++z),p=1;p<h;p++)q[B]!==q[B+1]&&(a[p]=q[B]?2:1,++z),B++;for(q[B]!==0&&(a[p]=2,++z),f=1;f<o;f++){B=f*O,x=f*i,q[B-O]!==q[B]&&(a[x]=q[B]?1:8,++z);let nt=(q[B]?4:0)+(q[B-O]?8:0);for(p=1;p<h;p++)nt=(nt>>2)+(q[B+1]?4:0)+(q[B-O+1]?8:0),t[nt]&&(a[x+p]=t[nt],++z),B++;if(q[B-O]!==q[B]&&(a[x+p]=q[B]?2:4,++z),z>m)return null}for(B=O*(o-1),x=f*i,q[B]!==0&&(a[x]=8,++z),p=1;p<h;p++)q[B]!==q[B+1]&&(a[x+p]=q[B]?4:8,++z),B++;if(q[B]!==0&&(a[x+p]=4,++z),z>m)return null;const W=new Int32Array([0,i,-1,0,-i,0,0,0,1]);let $,st,rt;for(L.isNodeJS?st=[]:$=new Path2D,f=0;z&&f<=o;f++){let nt=f*i;const lt=nt+h;for(;nt<lt&&!a[nt];)nt++;if(nt===lt)continue;$?$.moveTo(nt%i,f):rt=[nt%i,f];const ct=nt;let J=a[nt];do{const ft=W[J];do nt+=ft;while(!a[nt]);const pt=a[nt];pt!==5&&pt!==10?(J=pt,a[nt]=0):(J=pt&51*J>>4,a[nt]&=J>>2|J<<2),$?$.lineTo(nt%i,nt/i|0):rt.push(nt%i,nt/i|0),a[nt]||--z}while(ct!==nt);$||st.push(rt),--f}return q=null,a=null,function(nt){if(nt.save(),nt.scale(1/h,-1/o),nt.translate(0,-o),$)nt.fill($);else{nt.beginPath();for(const lt of st){nt.moveTo(lt[0],lt[1]);for(let ct=2,J=lt.length;ct<J;ct+=2)nt.lineTo(lt[ct],lt[ct+1])}nt.fill()}nt.beginPath(),nt.restore()}}class s{constructor(h,o){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,h,o])}clone(){const h=Object.create(this);return h.clipBox=this.clipBox.slice(),h}setCurrentPoint(h,o){this.x=h,this.y=o}updatePathMinMax(h,o,m){[o,m]=n.Util.applyTransform([o,m],h),this.minX=Math.min(this.minX,o),this.minY=Math.min(this.minY,m),this.maxX=Math.max(this.maxX,o),this.maxY=Math.max(this.maxY,m)}updateRectMinMax(h,o){const m=n.Util.applyTransform(o,h),t=n.Util.applyTransform(o.slice(2),h);this.minX=Math.min(this.minX,m[0],t[0]),this.minY=Math.min(this.minY,m[1],t[1]),this.maxX=Math.max(this.maxX,m[0],t[0]),this.maxY=Math.max(this.maxY,m[1],t[1])}updateScalingPathMinMax(h,o){n.Util.scaleMinMax(h,o),this.minX=Math.min(this.minX,o[0]),this.maxX=Math.max(this.maxX,o[1]),this.minY=Math.min(this.minY,o[2]),this.maxY=Math.max(this.maxY,o[3])}updateCurvePathMinMax(h,o,m,t,i,a,f,p,x,O){const q=n.Util.bezierBoundingBox(o,m,t,i,a,f,p,x);if(O){O[0]=Math.min(O[0],q[0],q[2]),O[1]=Math.max(O[1],q[0],q[2]),O[2]=Math.min(O[2],q[1],q[3]),O[3]=Math.max(O[3],q[1],q[3]);return}this.updateRectMinMax(h,q)}getPathBoundingBox(h=j.PathType.FILL,o=null){const m=[this.minX,this.minY,this.maxX,this.maxY];if(h===j.PathType.STROKE){o||(0,n.unreachable)("Stroke bounding box must include transform.");const t=n.Util.singularValueDecompose2dScale(o),i=t[0]*this.lineWidth/2,a=t[1]*this.lineWidth/2;m[0]-=i,m[1]-=a,m[2]+=i,m[3]+=a}return m}updateClipFromPath(){const h=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(h||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(h){this.clipBox=h,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(h=j.PathType.FILL,o=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(h,o))}}function c(P,h,o=null){if(typeof ImageData!="undefined"&&h instanceof ImageData){P.putImageData(h,0,0);return}const m=h.height,t=h.width,i=m%l,a=(m-i)/l,f=i===0?a:a+1,p=P.createImageData(t,l);let x=0,O;const q=h.data,B=p.data;let z,W,$,st,rt,it,nt,lt;if(o)switch(o.length){case 1:rt=o[0],it=o[0],nt=o[0],lt=o[0];break;case 4:rt=o[0],it=o[1],nt=o[2],lt=o[3];break}if(h.kind===n.ImageKind.GRAYSCALE_1BPP){const ct=q.byteLength,J=new Uint32Array(B.buffer,0,B.byteLength>>2),ft=J.length,pt=t+7>>3;let ut=4294967295,mt=n.FeatureTest.isLittleEndian?4278190080:255;for(lt&&lt[0]===255&&lt[255]===0&&([ut,mt]=[mt,ut]),z=0;z<f;z++){for($=z<a?l:i,O=0,W=0;W<$;W++){const vt=ct-x;let yt=0;const St=vt>pt?t:vt*8-7,Et=St&-8;let bt=0,Y=0;for(;yt<Et;yt+=8)Y=q[x++],J[O++]=Y&128?ut:mt,J[O++]=Y&64?ut:mt,J[O++]=Y&32?ut:mt,J[O++]=Y&16?ut:mt,J[O++]=Y&8?ut:mt,J[O++]=Y&4?ut:mt,J[O++]=Y&2?ut:mt,J[O++]=Y&1?ut:mt;for(;yt<St;yt++)bt===0&&(Y=q[x++],bt=128),J[O++]=Y&bt?ut:mt,bt>>=1}for(;O<ft;)J[O++]=0;P.putImageData(p,0,z*l)}}else if(h.kind===n.ImageKind.RGBA_32BPP){const ct=!!(rt||it||nt);for(W=0,st=t*l*4,z=0;z<a;z++){if(B.set(q.subarray(x,x+st)),x+=st,ct)for(let J=0;J<st;J+=4)rt&&(B[J+0]=rt[B[J+0]]),it&&(B[J+1]=it[B[J+1]]),nt&&(B[J+2]=nt[B[J+2]]);P.putImageData(p,0,W),W+=l}if(z<f){if(st=t*i*4,B.set(q.subarray(x,x+st)),ct)for(let J=0;J<st;J+=4)rt&&(B[J+0]=rt[B[J+0]]),it&&(B[J+1]=it[B[J+1]]),nt&&(B[J+2]=nt[B[J+2]]);P.putImageData(p,0,W)}}else if(h.kind===n.ImageKind.RGB_24BPP){const ct=!!(rt||it||nt);for($=l,st=t*$,z=0;z<f;z++){for(z>=a&&($=i,st=t*$),O=0,W=st;W--;)B[O++]=q[x++],B[O++]=q[x++],B[O++]=q[x++],B[O++]=255;if(ct)for(let J=0;J<O;J+=4)rt&&(B[J+0]=rt[B[J+0]]),it&&(B[J+1]=it[B[J+1]]),nt&&(B[J+2]=nt[B[J+2]]);P.putImageData(p,0,z*l)}}else throw new Error(`bad image kind: ${h.kind}`)}function v(P,h){if(h.bitmap){P.drawImage(h.bitmap,0,0);return}const o=h.height,m=h.width,t=o%l,i=(o-t)/l,a=t===0?i:i+1,f=P.createImageData(m,l);let p=0;const x=h.data,O=f.data;for(let q=0;q<a;q++){const B=q<i?l:t;({srcPos:p}=(0,F.applyMaskImageData)({src:x,srcPos:p,dest:O,width:m,height:B})),P.putImageData(f,0,q*l)}}function M(P,h){const o=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let m=0,t=o.length;m<t;m++){const i=o[m];P[i]!==void 0&&(h[i]=P[i])}P.setLineDash!==void 0&&(h.setLineDash(P.getLineDash()),h.lineDashOffset=P.lineDashOffset)}function k(P,h){P.strokeStyle=P.fillStyle=h||"#000000",P.fillRule="nonzero",P.globalAlpha=1,P.lineWidth=1,P.lineCap="butt",P.lineJoin="miter",P.miterLimit=10,P.globalCompositeOperation="source-over",P.font="10px sans-serif",P.setLineDash!==void 0&&(P.setLineDash([]),P.lineDashOffset=0)}function D(P,h,o,m){const t=P.length;for(let i=3;i<t;i+=4){const a=P[i];if(a===0)P[i-3]=h,P[i-2]=o,P[i-1]=m;else if(a<255){const f=255-a;P[i-3]=P[i-3]*a+h*f>>8,P[i-2]=P[i-2]*a+o*f>>8,P[i-1]=P[i-1]*a+m*f>>8}}}function N(P,h,o){const m=P.length,t=1/255;for(let i=3;i<m;i+=4){const a=o?o[P[i]]:P[i];h[i]=h[i]*a*t|0}}function U(P,h,o){const m=P.length;for(let t=3;t<m;t+=4){const i=P[t-3]*77+P[t-2]*152+P[t-1]*28;h[t]=o?h[t]*o[i>>8]>>8:h[t]*i>>16}}function X(P,h,o,m,t,i,a,f,p,x,O){const q=!!i,B=q?i[0]:0,z=q?i[1]:0,W=q?i[2]:0;let $;t==="Luminosity"?$=U:$=N;const rt=Math.min(m,Math.ceil(1048576/o));for(let it=0;it<m;it+=rt){const nt=Math.min(rt,m-it),lt=P.getImageData(f-x,it+(p-O),o,nt),ct=h.getImageData(f,it+p,o,nt);q&&D(lt.data,B,z,W),$(lt.data,ct.data,a),h.putImageData(ct,f,it+p)}}function V(P,h,o,m){const t=m[0],i=m[1],a=m[2]-t,f=m[3]-i;a===0||f===0||(X(h.context,o,a,f,h.subtype,h.backdrop,h.transferMap,t,i,h.offsetX,h.offsetY),P.save(),P.globalAlpha=1,P.globalCompositeOperation="source-over",P.setTransform(1,0,0,1,0,0),P.drawImage(o.canvas,0,0),P.restore())}function K(P,h){const o=n.Util.singularValueDecompose2dScale(P);o[0]=Math.fround(o[0]),o[1]=Math.fround(o[1]);const m=Math.fround((globalThis.devicePixelRatio||1)*w.PixelsPerInch.PDF_TO_CSS_UNITS);return h!==void 0?h:o[0]<=m||o[1]<=m}const Z=["butt","round","square"],tt=["miter","round","bevel"],Q={},et={};class at{constructor(h,o,m,t,i,a,f,p){this.ctx=h,this.current=new s(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=o,this.objs=m,this.canvasFactory=t,this.imageLayer=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=a,this.cachedCanvases=new C(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(p==null?void 0:p.background)||null,this.foregroundColor=(p==null?void 0:p.foreground)||null,h&&_(h),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(h,o=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):o}beginDrawing({transform:h,viewport:o,transparency:m=!1,background:t=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,f=t||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const p=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const x=this.backgroundColor=this.ctx.fillStyle;let O=!0,q=f;if(this.ctx.fillStyle=f,q=this.ctx.fillStyle,O=typeof q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(q),p==="#000000"&&x==="#ffffff"||p===x||!O)this.foregroundColor=this.backgroundColor=null;else{const B=parseInt(q.slice(1),16),z=(B&&16711680)>>16,W=(B&&65280)>>8,$=B&&255,st=it=>(it/=255,it<=.03928?it/12.92:((it+.055)/1.055)**2.4),rt=Math.round(.2126*st(z)+.7152*st(W)+.0722*st($));this.selectColor=(it,nt,lt)=>{const ct=.2126*st(it)+.7152*st(nt)+.0722*st(lt);return Math.round(ct)===rt?x:p}}}if(this.ctx.fillStyle=this.backgroundColor||f,this.ctx.fillRect(0,0,i,a),this.ctx.restore(),m){const p=this.cachedCanvases.getCanvas("transparent",i,a,!0);this.compositeCtx=this.ctx,this.transparentCanvas=p.canvas,this.ctx=p.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),k(this.ctx,this.foregroundColor),h&&(this.ctx.transform.apply(this.ctx,h),this.outputScaleX=h[0],this.outputScaleY=h[0]),this.ctx.transform.apply(this.ctx,o.transform),this.viewportScale=o.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(h,o,m,t){const i=h.argsArray,a=h.fnArray;let f=o||0;const p=i.length;if(p===f)return f;const x=p-f>R&&typeof m=="function",O=x?Date.now()+E:0;let q=0;const B=this.commonObjs,z=this.objs;let W;for(;;){if(t!==void 0&&f===t.nextBreakPoint)return t.breakIt(f,m),f;if(W=a[f],W!==n.OPS.dependency)this[W].apply(this,i[f]);else for(const $ of i[f]){const st=$.startsWith("g_")?B:z;if(!st.has($))return st.get($,m),f}if(f++,f===p)return f;if(x&&++q>R){if(Date.now()>O)return m(),f;q=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const h of this._cachedBitmapsMap.values()){for(const o of h.values())typeof HTMLCanvasElement!="undefined"&&o instanceof HTMLCanvasElement&&(o.width=o.height=0);h.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(h,o){const m=h.width,t=h.height;let i=Math.max(Math.hypot(o[0],o[1]),1),a=Math.max(Math.hypot(o[2],o[3]),1),f=m,p=t,x="prescale1",O,q;for(;i>2&&f>1||a>2&&p>1;){let B=f,z=p;i>2&&f>1&&(B=Math.ceil(f/2),i/=f/B),a>2&&p>1&&(z=Math.ceil(p/2),a/=p/z),O=this.cachedCanvases.getCanvas(x,B,z,!1),q=O.context,q.clearRect(0,0,B,z),q.drawImage(h,0,0,f,p,0,0,B,z),h=O.canvas,f=B,p=z,x=x==="prescale1"?"prescale2":"prescale1"}return{img:h,paintWidth:f,paintHeight:p}}_createMaskCanvas(h){const o=this.ctx,{width:m,height:t}=h,i=this.current.fillColor,a=this.current.patternFill,f=o.mozCurrentTransform;let p,x,O,q;if((h.bitmap||h.data)&&h.count>1){const ft=h.bitmap||h.data.buffer,pt=f.slice(0,4);x=JSON.stringify(a?pt:[pt,i]),p=this._cachedBitmapsMap.get(ft),p||(p=new Map,this._cachedBitmapsMap.set(ft,p));const ut=p.get(x);if(ut&&!a){const mt=Math.round(Math.min(f[0],f[2])+f[4]),vt=Math.round(Math.min(f[1],f[3])+f[5]);return{canvas:ut,offsetX:mt,offsetY:vt}}O=ut}O||(q=this.cachedCanvases.getCanvas("maskCanvas",m,t,!1),v(q.context,h));let B=n.Util.transform(f,[1/m,0,0,-1/t,0,0]);B=n.Util.transform(B,[1,0,0,1,0,-t]);const z=n.Util.applyTransform([0,0],B),W=n.Util.applyTransform([m,t],B),$=n.Util.normalizeRect([z[0],z[1],W[0],W[1]]),st=Math.round($[2]-$[0])||1,rt=Math.round($[3]-$[1])||1,it=this.cachedCanvases.getCanvas("fillCanvas",st,rt,!0),nt=it.context,lt=Math.min(z[0],W[0]),ct=Math.min(z[1],W[1]);nt.translate(-lt,-ct),nt.transform.apply(nt,B),O||(O=this._scaleImage(q.canvas,nt.mozCurrentTransformInverse),O=O.img,p&&a&&p.set(x,O)),nt.imageSmoothingEnabled=K(nt.mozCurrentTransform,h.interpolate),S(nt,O,0,0,O.width,O.height,0,0,m,t),nt.globalCompositeOperation="source-in";const J=n.Util.transform(nt.mozCurrentTransformInverse,[1,0,0,1,-lt,-ct]);return nt.fillStyle=a?i.getPattern(o,this,J,j.PathType.FILL):i,nt.fillRect(0,0,m,t),p&&!a&&(this.cachedCanvases.delete("fillCanvas"),p.set(x,it.canvas)),{canvas:it.canvas,offsetX:Math.round(lt),offsetY:Math.round(ct)}}setLineWidth(h){h!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=h,this.ctx.lineWidth=h}setLineCap(h){this.ctx.lineCap=Z[h]}setLineJoin(h){this.ctx.lineJoin=tt[h]}setMiterLimit(h){this.ctx.miterLimit=h}setDash(h,o){const m=this.ctx;m.setLineDash!==void 0&&(m.setLineDash(h),m.lineDashOffset=o)}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(let o=0,m=h.length;o<m;o++){const t=h[o],i=t[0],a=t[1];switch(i){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a[0],a[1]);break;case"CA":this.current.strokeAlpha=t[1];break;case"ca":this.current.fillAlpha=t[1],this.ctx.globalAlpha=t[1];break;case"BM":this.ctx.globalCompositeOperation=a;break;case"SMask":this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=a}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const h=this.inSMaskMode;this.current.activeSMask&&!h?this.beginSMaskMode():!this.current.activeSMask&&h&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const h=this.ctx.canvas.width,o=this.ctx.canvas.height,m="smaskGroupAt"+this.groupLevel,t=this.cachedCanvases.getCanvas(m,h,o,!0);this.suspendedCtx=this.ctx,this.ctx=t.context;const i=this.ctx;i.setTransform.apply(i,this.suspendedCtx.mozCurrentTransform),M(this.suspendedCtx,i),r(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),M(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(h){if(!this.current.activeSMask)return;h?(h[0]=Math.floor(h[0]),h[1]=Math.floor(h[1]),h[2]=Math.ceil(h[2]),h[3]=Math.ceil(h[3])):h=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const o=this.current.activeSMask,m=this.suspendedCtx;V(m,o,this.ctx,h),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(M(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const h=this.current;this.stateStack.push(h),this.current=h.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),M(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(h,o,m,t,i,a){this.ctx.transform(h,o,m,t,i,a),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(h,o,m){const t=this.ctx,i=this.current;let a=i.x,f=i.y,p,x;const O=t.mozCurrentTransform,q=O[0]===0&&O[3]===0||O[1]===0&&O[2]===0,B=q?m.slice(0):null;for(let z=0,W=0,$=h.length;z<$;z++)switch(h[z]|0){case n.OPS.rectangle:a=o[W++],f=o[W++];const st=o[W++],rt=o[W++],it=a+st,nt=f+rt;t.moveTo(a,f),st===0||rt===0?t.lineTo(it,nt):(t.lineTo(it,f),t.lineTo(it,nt),t.lineTo(a,nt)),q||i.updateRectMinMax(O,[a,f,it,nt]),t.closePath();break;case n.OPS.moveTo:a=o[W++],f=o[W++],t.moveTo(a,f),q||i.updatePathMinMax(O,a,f);break;case n.OPS.lineTo:a=o[W++],f=o[W++],t.lineTo(a,f),q||i.updatePathMinMax(O,a,f);break;case n.OPS.curveTo:p=a,x=f,a=o[W+4],f=o[W+5],t.bezierCurveTo(o[W],o[W+1],o[W+2],o[W+3],a,f),i.updateCurvePathMinMax(O,p,x,o[W],o[W+1],o[W+2],o[W+3],a,f,B),W+=6;break;case n.OPS.curveTo2:p=a,x=f,t.bezierCurveTo(a,f,o[W],o[W+1],o[W+2],o[W+3]),i.updateCurvePathMinMax(O,p,x,a,f,o[W],o[W+1],o[W+2],o[W+3],B),a=o[W+2],f=o[W+3],W+=4;break;case n.OPS.curveTo3:p=a,x=f,a=o[W+2],f=o[W+3],t.bezierCurveTo(o[W],o[W+1],a,f,a,f),i.updateCurvePathMinMax(O,p,x,o[W],o[W+1],a,f,a,f,B),W+=4;break;case n.OPS.closePath:t.closePath();break}q&&i.updateScalingPathMinMax(O,B),i.setCurrentPoint(a,f)}closePath(){this.ctx.closePath()}stroke(h){h=typeof h!="undefined"?h:!0;const o=this.ctx,m=this.current.strokeColor;o.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof m=="object"&&(m==null?void 0:m.getPattern)?(o.save(),o.strokeStyle=m.getPattern(o,this,o.mozCurrentTransformInverse,j.PathType.STROKE),this.rescaleAndStroke(!1),o.restore()):this.rescaleAndStroke(!0)),h&&this.consumePath(this.current.getClippedPathBoundingBox()),o.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(h){h=typeof h!="undefined"?h:!0;const o=this.ctx,m=this.current.fillColor,t=this.current.patternFill;let i=!1;t&&(o.save(),o.fillStyle=m.getPattern(o,this,o.mozCurrentTransformInverse,j.PathType.FILL),i=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(o.fill("evenodd"),this.pendingEOFill=!1):o.fill()),i&&o.restore(),h&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Q}eoClip(){this.pendingClip=et}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const h=this.pendingTextPaths,o=this.ctx;if(h===void 0){o.beginPath();return}o.save(),o.beginPath();for(let m=0;m<h.length;m++){const t=h[m];o.setTransform.apply(o,t.transform),o.translate(t.x,t.y),t.addToPath(o,t.fontSize)}o.restore(),o.clip(),o.beginPath(),delete this.pendingTextPaths}setCharSpacing(h){this.current.charSpacing=h}setWordSpacing(h){this.current.wordSpacing=h}setHScale(h){this.current.textHScale=h/100}setLeading(h){this.current.leading=-h}setFont(h,o){const m=this.commonObjs.get(h),t=this.current;if(!m)throw new Error(`Can't find font for ${h}`);if(t.fontMatrix=m.fontMatrix||n.FONT_IDENTITY_MATRIX,(t.fontMatrix[0]===0||t.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+h),o<0?(o=-o,t.fontDirection=-1):t.fontDirection=1,this.current.font=m,this.current.fontSize=o,m.isType3Font)return;const i=m.loadedName||"sans-serif";let a="normal";m.black?a="900":m.bold&&(a="bold");const f=m.italic?"italic":"normal",p=`"${i}", ${m.fallbackName}`;let x=o;o<b?x=b:o>d&&(x=d),this.current.fontSizeScale=o/x,this.ctx.font=`${f} ${a} ${x}px ${p}`}setTextRenderingMode(h){this.current.textRenderingMode=h}setTextRise(h){this.current.textRise=h}moveText(h,o){this.current.x=this.current.lineX+=h,this.current.y=this.current.lineY+=o}setLeadingMoveText(h,o){this.setLeading(-o),this.moveText(h,o)}setTextMatrix(h,o,m,t,i,a){this.current.textMatrix=[h,o,m,t,i,a],this.current.textMatrixScale=Math.hypot(h,o),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(h,o,m,t){const i=this.ctx,a=this.current,f=a.font,p=a.textRenderingMode,x=a.fontSize/a.fontSizeScale,O=p&n.TextRenderingMode.FILL_STROKE_MASK,q=!!(p&n.TextRenderingMode.ADD_TO_PATH_FLAG),B=a.patternFill&&!f.missingFile;let z;(f.disableFontFace||q||B)&&(z=f.getPathGenerator(this.commonObjs,h)),f.disableFontFace||B?(i.save(),i.translate(o,m),i.beginPath(),z(i,x),t&&i.setTransform.apply(i,t),(O===n.TextRenderingMode.FILL||O===n.TextRenderingMode.FILL_STROKE)&&i.fill(),(O===n.TextRenderingMode.STROKE||O===n.TextRenderingMode.FILL_STROKE)&&i.stroke(),i.restore()):((O===n.TextRenderingMode.FILL||O===n.TextRenderingMode.FILL_STROKE)&&i.fillText(h,o,m),(O===n.TextRenderingMode.STROKE||O===n.TextRenderingMode.FILL_STROKE)&&i.strokeText(h,o,m)),q&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:i.mozCurrentTransform,x:o,y:m,fontSize:x,addToPath:z})}get isFontSubpixelAAEnabled(){const{context:h}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);h.scale(1.5,1),h.fillText("I",0,10);const o=h.getImageData(0,0,10,10).data;let m=!1;for(let t=3;t<o.length;t+=4)if(o[t]>0&&o[t]<255){m=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",m)}showText(h){const o=this.current,m=o.font;if(m.isType3Font)return this.showType3Text(h);const t=o.fontSize;if(t===0)return;const i=this.ctx,a=o.fontSizeScale,f=o.charSpacing,p=o.wordSpacing,x=o.fontDirection,O=o.textHScale*x,q=h.length,B=m.vertical,z=B?1:-1,W=m.defaultVMetrics,$=t*o.fontMatrix[0],st=o.textRenderingMode===n.TextRenderingMode.FILL&&!m.disableFontFace&&!o.patternFill;i.save(),i.transform.apply(i,o.textMatrix),i.translate(o.x,o.y+o.textRise),x>0?i.scale(O,-1):i.scale(O,1);let rt;if(o.patternFill){i.save();const J=o.fillColor.getPattern(i,this,i.mozCurrentTransformInverse,j.PathType.FILL);rt=i.mozCurrentTransform,i.restore(),i.fillStyle=J}let it=o.lineWidth;const nt=o.textMatrixScale;if(nt===0||it===0){const J=o.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(J===n.TextRenderingMode.STROKE||J===n.TextRenderingMode.FILL_STROKE)&&(it=this.getSinglePixelWidth())}else it/=nt;a!==1&&(i.scale(a,a),it/=a),i.lineWidth=it;let lt=0,ct;for(ct=0;ct<q;++ct){const J=h[ct];if(typeof J=="number"){lt+=z*J*t/1e3;continue}let ft=!1;const pt=(J.isSpace?p:0)+f,ut=J.fontChar,mt=J.accent;let vt,yt,St=J.width;if(B){const bt=J.vmetric||W,Y=-(J.vmetric?bt[1]:St*.5)*$,H=bt[2]*$;St=bt?-bt[0]:St,vt=Y/a,yt=(lt+H)/a}else vt=lt/a,yt=0;if(m.remeasure&&St>0){const bt=i.measureText(ut).width*1e3/t*a;if(St<bt&&this.isFontSubpixelAAEnabled){const Y=St/bt;ft=!0,i.save(),i.scale(Y,1),vt/=Y}else St!==bt&&(vt+=(St-bt)/2e3*t/a)}if(this.contentVisible&&(J.isInFont||m.missingFile)){if(st&&!mt)i.fillText(ut,vt,yt);else if(this.paintChar(ut,vt,yt,rt),mt){const bt=vt+t*mt.offset.x/a,Y=yt-t*mt.offset.y/a;this.paintChar(mt.fontChar,bt,Y,rt)}}let Et;B?Et=St*$-pt*x:Et=St*$+pt*x,lt+=Et,ft&&i.restore()}B?o.y-=lt:o.x+=lt*O,i.restore(),this.compose()}showType3Text(h){const o=this.ctx,m=this.current,t=m.font,i=m.fontSize,a=m.fontDirection,f=t.vertical?1:-1,p=m.charSpacing,x=m.wordSpacing,O=m.textHScale*a,q=m.fontMatrix||n.FONT_IDENTITY_MATRIX,B=h.length,z=m.textRenderingMode===n.TextRenderingMode.INVISIBLE;let W,$,st,rt;if(!(z||i===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,o.save(),o.transform.apply(o,m.textMatrix),o.translate(m.x,m.y),o.scale(O,a),W=0;W<B;++W){if($=h[W],typeof $=="number"){rt=f*$*i/1e3,this.ctx.translate(rt,0),m.x+=rt*O;continue}const it=($.isSpace?x:0)+p,nt=t.charProcOperatorList[$.operatorListId];if(!nt){(0,n.warn)(`Type3 character "${$.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=$,this.save(),o.scale(i,i),o.transform.apply(o,q),this.executeOperatorList(nt),this.restore()),st=n.Util.applyTransform([$.width,0],q)[0]*i+it,o.translate(st,0),m.x+=st*O}o.restore(),this.processingType3=null}}setCharWidth(h,o){}setCharWidthAndBounds(h,o,m,t,i,a){this.ctx.rect(m,t,i-m,a-t),this.ctx.clip(),this.endPath()}getColorN_Pattern(h){let o;if(h[0]==="TilingPattern"){const m=h[1],t=this.baseTransform||this.ctx.mozCurrentTransform.slice(),i={createCanvasGraphics:a=>new at(a,this.commonObjs,this.objs,this.canvasFactory)};o=new j.TilingPattern(h,m,this.ctx,i,t)}else o=this._getPattern(h[1],h[2]);return o}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(h,o,m){var i;const t=((i=this.selectColor)==null?void 0:i.call(this,h,o,m))||n.Util.makeHexColor(h,o,m);this.ctx.strokeStyle=t,this.current.strokeColor=t}setFillRGBColor(h,o,m){var i;const t=((i=this.selectColor)==null?void 0:i.call(this,h,o,m))||n.Util.makeHexColor(h,o,m);this.ctx.fillStyle=t,this.current.fillColor=t,this.current.patternFill=!1}_getPattern(h,o=null){let m;return this.cachedPatterns.has(h)?m=this.cachedPatterns.get(h):(m=(0,j.getShadingPattern)(this.objs.get(h)),this.cachedPatterns.set(h,m)),o&&(m.matrix=o),m}shadingFill(h){if(!this.contentVisible)return;const o=this.ctx;this.save();const m=this._getPattern(h);o.fillStyle=m.getPattern(o,this,o.mozCurrentTransformInverse,j.PathType.SHADING);const t=o.mozCurrentTransformInverse;if(t){const i=o.canvas,a=i.width,f=i.height,p=n.Util.applyTransform([0,0],t),x=n.Util.applyTransform([0,f],t),O=n.Util.applyTransform([a,0],t),q=n.Util.applyTransform([a,f],t),B=Math.min(p[0],x[0],O[0],q[0]),z=Math.min(p[1],x[1],O[1],q[1]),W=Math.max(p[0],x[0],O[0],q[0]),$=Math.max(p[1],x[1],O[1],q[1]);this.ctx.fillRect(B,z,W-B,$-z)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(h,o){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(h)&&h.length===6&&this.transform.apply(this,h),this.baseTransform=this.ctx.mozCurrentTransform,o)){const m=o[2]-o[0],t=o[3]-o[1];this.ctx.rect(o[0],o[1],m,t),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,o),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(h){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const o=this.ctx;h.isolated||(0,n.info)("TODO: Support non-isolated groups."),h.knockout&&(0,n.warn)("Knockout groups not supported.");const m=o.mozCurrentTransform;if(h.matrix&&o.transform.apply(o,h.matrix),!h.bbox)throw new Error("Bounding box is required.");let t=n.Util.getAxialAlignedBoundingBox(h.bbox,o.mozCurrentTransform);const i=[0,0,o.canvas.width,o.canvas.height];t=n.Util.intersect(t,i)||[0,0,0,0];const a=Math.floor(t[0]),f=Math.floor(t[1]);let p=Math.max(Math.ceil(t[2])-a,1),x=Math.max(Math.ceil(t[3])-f,1),O=1,q=1;p>y&&(O=p/y,p=y),x>y&&(q=x/y,x=y),this.current.startNewPathAndClipBox([0,0,p,x]);let B="groupAt"+this.groupLevel;h.smask&&(B+="_smask_"+this.smaskCounter++%2);const z=this.cachedCanvases.getCanvas(B,p,x,!0),W=z.context;W.scale(1/O,1/q),W.translate(-a,-f),W.transform.apply(W,m),h.smask?this.smaskStack.push({canvas:z.canvas,context:W,offsetX:a,offsetY:f,scaleX:O,scaleY:q,subtype:h.smask.subtype,backdrop:h.smask.backdrop,transferMap:h.smask.transferMap||null,startTransformInverse:null}):(o.setTransform(1,0,0,1,0,0),o.translate(a,f),o.scale(O,q),o.save()),M(o,W),this.ctx=W,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(o),this.groupLevel++}endGroup(h){if(!this.contentVisible)return;this.groupLevel--;const o=this.ctx,m=this.groupStack.pop();if(this.ctx=m,this.ctx.imageSmoothingEnabled=!1,h.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,t);const i=n.Util.getAxialAlignedBoundingBox([0,0,o.canvas.width,o.canvas.height],t);this.ctx.drawImage(o.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(h,o,m,t,i){if(this.save(),Array.isArray(o)&&o.length===4){const a=o[2]-o[0],f=o[3]-o[1];if(i&&this.annotationCanvasMap){m=m.slice(),m[4]-=o[0],m[5]-=o[1],o=o.slice(),o[0]=o[1]=0,o[2]=a,o[3]=f;const[p,x]=n.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:O}=this,q=Math.ceil(a*this.outputScaleX*O),B=Math.ceil(f*this.outputScaleY*O);this.annotationCanvas=this.canvasFactory.create(q,B);const{canvas:z,context:W}=this.annotationCanvas,$=`var(--zoom-factor) * ${w.PixelsPerInch.PDF_TO_CSS_UNITS}`;z.style.width=`calc(${a}px * ${$})`,z.style.height=`calc(${f}px * ${$})`,this.annotationCanvasMap.set(h,z),this.annotationCanvas.savedCtx=this.ctx,this.ctx=W,this.ctx.setTransform(p,0,0,-x,0,f*x),_(this.ctx),k(this.ctx,this.foregroundColor)}else k(this.ctx,this.foregroundColor),this.ctx.rect(o[0],o[1],a,f),this.ctx.clip(),this.endPath()}this.current=new s(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,m),this.transform.apply(this,t)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(h){if(!this.contentVisible)return;const o=h.count;h=this.getObject(h.data,h),h.count=o;const m=this.ctx,t=this.processingType3;if(t&&(t.compiled===void 0&&(t.compiled=T(h)),t.compiled)){t.compiled(m);return}const i=this._createMaskCanvas(h),a=i.canvas;m.save(),m.setTransform(1,0,0,1,0,0),m.drawImage(a,i.offsetX,i.offsetY),m.restore(),this.compose()}paintImageMaskXObjectRepeat(h,o,m=0,t=0,i,a){if(!this.contentVisible)return;h=this.getObject(h.data,h);const f=this.ctx;f.save();const p=f.mozCurrentTransform;f.transform(o,m,t,i,0,0);const x=this._createMaskCanvas(h);f.setTransform(1,0,0,1,0,0);for(let O=0,q=a.length;O<q;O+=2){const B=n.Util.transform(p,[o,m,t,i,a[O],a[O+1]]),[z,W]=n.Util.applyTransform([0,0],B);f.drawImage(x.canvas,z,W)}f.restore(),this.compose()}paintImageMaskXObjectGroup(h){if(!this.contentVisible)return;const o=this.ctx,m=this.current.fillColor,t=this.current.patternFill;for(let i=0,a=h.length;i<a;i++){const f=h[i],p=f.width,x=f.height,O=this.cachedCanvases.getCanvas("maskCanvas",p,x,!1),q=O.context;q.save(),v(q,f),q.globalCompositeOperation="source-in",q.fillStyle=t?m.getPattern(q,this,o.mozCurrentTransformInverse,j.PathType.FILL):m,q.fillRect(0,0,p,x),q.restore(),o.save(),o.transform.apply(o,f.transform),o.scale(1,-1),S(o,O.canvas,0,0,p,x,0,-1,1,1),o.restore()}this.compose()}paintImageXObject(h){if(!this.contentVisible)return;const o=this.getObject(h);if(!o){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(o)}paintImageXObjectRepeat(h,o,m,t){if(!this.contentVisible)return;const i=this.getObject(h);if(!i){(0,n.warn)("Dependent image isn't ready yet");return}const a=i.width,f=i.height,p=[];for(let x=0,O=t.length;x<O;x+=2)p.push({transform:[o,0,0,m,t[x],t[x+1]],x:0,y:0,w:a,h:f});this.paintInlineImageXObjectGroup(i,p)}paintInlineImageXObject(h){if(!this.contentVisible)return;const o=h.width,m=h.height,t=this.ctx;this.save(),t.scale(1/o,-1/m);let i;if(typeof HTMLElement=="function"&&h instanceof HTMLElement||!h.data)i=h;else{const x=this.cachedCanvases.getCanvas("inlineImage",o,m,!1),O=x.context;c(O,h,this.current.transferMaps),i=x.canvas}const a=this._scaleImage(i,t.mozCurrentTransformInverse);t.imageSmoothingEnabled=K(t.mozCurrentTransform,h.interpolate);const[f,p]=S(t,a.img,0,0,a.paintWidth,a.paintHeight,0,-m,o,m);if(this.imageLayer){const x=this.getCanvasPosition(0,-m);this.imageLayer.appendImage({imgData:h,left:x[0],top:x[1],width:f,height:p})}this.compose(),this.restore()}paintInlineImageXObjectGroup(h,o){if(!this.contentVisible)return;const m=this.ctx,t=h.width,i=h.height,a=this.cachedCanvases.getCanvas("inlineImage",t,i,!1),f=a.context;c(f,h,this.current.transferMaps);for(let p=0,x=o.length;p<x;p++){const O=o[p];if(m.save(),m.transform.apply(m,O.transform),m.scale(1,-1),S(m,a.canvas,O.x,O.y,O.w,O.h,0,-1,1,1),this.imageLayer){const q=this.getCanvasPosition(O.x,O.y);this.imageLayer.appendImage({imgData:h,left:q[0],top:q[1],width:t,height:i})}m.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(h){}markPointProps(h,o){}beginMarkedContent(h){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(h,o){h==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(o)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(h){const o=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(h);const m=this.ctx;this.pendingClip&&(o||(this.pendingClip===et?m.clip("evenodd"):m.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),m.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const h=this.ctx.mozCurrentTransform;if(h[1]===0&&h[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(h[0]),Math.abs(h[3]));else{const o=Math.abs(h[0]*h[3]-h[2]*h[1]),m=Math.hypot(h[0],h[2]),t=Math.hypot(h[1],h[3]);this._cachedGetSinglePixelWidth=Math.max(m,t)/o}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:h}=this.current,o=this.ctx.mozCurrentTransform;let m,t;if(o[1]===0&&o[2]===0){const i=Math.abs(o[0]),a=Math.abs(o[3]);if(h===0)m=1/i,t=1/a;else{const f=i*h,p=a*h;m=f<1?1/f:1,t=p<1?1/p:1}}else{const i=Math.abs(o[0]*o[3]-o[2]*o[1]),a=Math.hypot(o[0],o[1]),f=Math.hypot(o[2],o[3]);if(h===0)m=f/i,t=a/i;else{const p=h*i;m=f>p?f/p:1,t=a>p?a/p:1}}this._cachedScaleForStroking=[m,t]}return this._cachedScaleForStroking}rescaleAndStroke(h){const{ctx:o}=this,{lineWidth:m}=this.current,[t,i]=this.getScaleForStroking();if(o.lineWidth=m||1,t===1&&i===1){o.stroke();return}let a,f,p;h&&(a=o.mozCurrentTransform.slice(),f=o.getLineDash().slice(),p=o.lineDashOffset),o.scale(t,i);const x=Math.max(t,i);o.setLineDash(o.getLineDash().map(O=>O/x)),o.lineDashOffset/=x,o.stroke(),h&&(o.setTransform(...a),o.setLineDash(f),o.lineDashOffset=p)}getCanvasPosition(h,o){const m=this.ctx.mozCurrentTransform;return[m[0]*h+m[2]*o+m[4],m[1]*h+m[3]*o+m[5]]}isContentVisible(){for(let h=this.markedContentStack.length-1;h>=0;h--)if(!this.markedContentStack[h].visible)return!1;return!0}}e.CanvasGraphics=at;for(const P in n.OPS)at.prototype[P]!==void 0&&(at.prototype[n.OPS[P]]=at.prototype[P])},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=A;var n=u(1),j=u(3);const F={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=F;function L(r,_){if(!_||j.isNodeJS)return;const C=_[2]-_[0],S=_[3]-_[1],T=new Path2D;T.rect(_[0],_[1],C,S),r.clip(T)}class w{constructor(){this.constructor===w&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class b extends w{constructor(_){super(),this._type=_[1],this._bbox=_[2],this._colorStops=_[3],this._p0=_[4],this._p1=_[5],this._r0=_[6],this._r1=_[7],this.matrix=null}_createGradient(_){let C;this._type==="axial"?C=_.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(C=_.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const S of this._colorStops)C.addColorStop(S[0],S[1]);return C}getPattern(_,C,S,T){let s;if(T===F.STROKE||T===F.FILL){const c=C.current.getClippedPathBoundingBox(T,_.mozCurrentTransform)||[0,0,0,0],v=Math.ceil(c[2]-c[0])||1,M=Math.ceil(c[3]-c[1])||1,k=C.cachedCanvases.getCanvas("pattern",v,M,!0),D=k.context;D.clearRect(0,0,D.canvas.width,D.canvas.height),D.beginPath(),D.rect(0,0,D.canvas.width,D.canvas.height),D.translate(-c[0],-c[1]),S=n.Util.transform(S,[1,0,0,1,c[0],c[1]]),D.transform.apply(D,C.baseTransform),this.matrix&&D.transform.apply(D,this.matrix),L(D,this._bbox),D.fillStyle=this._createGradient(D),D.fill(),s=_.createPattern(k.canvas,"no-repeat");const N=new DOMMatrix(S);try{s.setTransform(N)}catch(U){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${U==null?void 0:U.message}".`)}}else L(_,this._bbox),s=this._createGradient(_);return s}}function d(r,_,C,S,T,s,c,v){const M=_.coords,k=_.colors,D=r.data,N=r.width*4;let U;M[C+1]>M[S+1]&&(U=C,C=S,S=U,U=s,s=c,c=U),M[S+1]>M[T+1]&&(U=S,S=T,T=U,U=c,c=v,v=U),M[C+1]>M[S+1]&&(U=C,C=S,S=U,U=s,s=c,c=U);const X=(M[C]+_.offsetX)*_.scaleX,V=(M[C+1]+_.offsetY)*_.scaleY,K=(M[S]+_.offsetX)*_.scaleX,Z=(M[S+1]+_.offsetY)*_.scaleY,tt=(M[T]+_.offsetX)*_.scaleX,Q=(M[T+1]+_.offsetY)*_.scaleY;if(V>=Q)return;const et=k[s],at=k[s+1],P=k[s+2],h=k[c],o=k[c+1],m=k[c+2],t=k[v],i=k[v+1],a=k[v+2],f=Math.round(V),p=Math.round(Q);let x,O,q,B,z,W,$,st;for(let rt=f;rt<=p;rt++){if(rt<Z){let J;rt<V?J=0:J=(V-rt)/(V-Z),x=X-(X-K)*J,O=et-(et-h)*J,q=at-(at-o)*J,B=P-(P-m)*J}else{let J;rt>Q?J=1:Z===Q?J=0:J=(Z-rt)/(Z-Q),x=K-(K-tt)*J,O=h-(h-t)*J,q=o-(o-i)*J,B=m-(m-a)*J}let it;rt<V?it=0:rt>Q?it=1:it=(V-rt)/(V-Q),z=X-(X-tt)*it,W=et-(et-t)*it,$=at-(at-i)*it,st=P-(P-a)*it;const nt=Math.round(Math.min(x,z)),lt=Math.round(Math.max(x,z));let ct=N*rt+nt*4;for(let J=nt;J<=lt;J++)it=(x-J)/(x-z),it<0?it=0:it>1&&(it=1),D[ct++]=O-(O-W)*it|0,D[ct++]=q-(q-$)*it|0,D[ct++]=B-(B-st)*it|0,D[ct++]=255}}function y(r,_,C){const S=_.coords,T=_.colors;let s,c;switch(_.type){case"lattice":const v=_.verticesPerRow,M=Math.floor(S.length/v)-1,k=v-1;for(s=0;s<M;s++){let D=s*v;for(let N=0;N<k;N++,D++)d(r,C,S[D],S[D+1],S[D+v],T[D],T[D+1],T[D+v]),d(r,C,S[D+v+1],S[D+1],S[D+v],T[D+v+1],T[D+1],T[D+v])}break;case"triangles":for(s=0,c=S.length;s<c;s+=3)d(r,C,S[s],S[s+1],S[s+2],T[s],T[s+1],T[s+2]);break;default:throw new Error("illegal figure")}}class E extends w{constructor(_){super(),this._coords=_[2],this._colors=_[3],this._figures=_[4],this._bounds=_[5],this._bbox=_[7],this._background=_[8],this.matrix=null}_createMeshCanvas(_,C,S){const v=Math.floor(this._bounds[0]),M=Math.floor(this._bounds[1]),k=Math.ceil(this._bounds[2])-v,D=Math.ceil(this._bounds[3])-M,N=Math.min(Math.ceil(Math.abs(k*_[0]*1.1)),3e3),U=Math.min(Math.ceil(Math.abs(D*_[1]*1.1)),3e3),X=k/N,V=D/U,K={coords:this._coords,colors:this._colors,offsetX:-v,offsetY:-M,scaleX:1/X,scaleY:1/V},Z=N+2*2,tt=U+2*2,Q=S.getCanvas("mesh",Z,tt,!1),et=Q.context,at=et.createImageData(N,U);if(C){const h=at.data;for(let o=0,m=h.length;o<m;o+=4)h[o]=C[0],h[o+1]=C[1],h[o+2]=C[2],h[o+3]=255}for(const h of this._figures)y(at,h,K);return et.putImageData(at,2,2),{canvas:Q.canvas,offsetX:v-2*X,offsetY:M-2*V,scaleX:X,scaleY:V}}getPattern(_,C,S,T){L(_,this._bbox);let s;if(T===F.SHADING)s=n.Util.singularValueDecompose2dScale(_.mozCurrentTransform);else if(s=n.Util.singularValueDecompose2dScale(C.baseTransform),this.matrix){const v=n.Util.singularValueDecompose2dScale(this.matrix);s=[s[0]*v[0],s[1]*v[1]]}const c=this._createMeshCanvas(s,T===F.SHADING?null:this._background,C.cachedCanvases);return T!==F.SHADING&&(_.setTransform.apply(_,C.baseTransform),this.matrix&&_.transform.apply(_,this.matrix)),_.translate(c.offsetX,c.offsetY),_.scale(c.scaleX,c.scaleY),_.createPattern(c.canvas,"no-repeat")}}class R extends w{getPattern(){return"hotpink"}}function A(r){switch(r[0]){case"RadialAxial":return new b(r);case"Mesh":return new E(r);case"Dummy":return new R}throw new Error(`Unknown IR type: ${r[0]}`)}const l={COLORED:1,UNCOLORED:2};class g{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(_,C,S,T,s){this.operatorList=_[2],this.matrix=_[3]||[1,0,0,1,0,0],this.bbox=_[4],this.xstep=_[5],this.ystep=_[6],this.paintType=_[7],this.tilingType=_[8],this.color=C,this.ctx=S,this.canvasGraphicsFactory=T,this.baseTransform=s}createPatternCanvas(_){const C=this.operatorList,S=this.bbox,T=this.xstep,s=this.ystep,c=this.paintType,v=this.tilingType,M=this.color,k=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+v);const D=S[0],N=S[1],U=S[2],X=S[3],V=n.Util.singularValueDecompose2dScale(this.matrix),K=n.Util.singularValueDecompose2dScale(this.baseTransform),Z=[V[0]*K[0],V[1]*K[1]],tt=this.getSizeAndScale(T,this.ctx.canvas.width,Z[0]),Q=this.getSizeAndScale(s,this.ctx.canvas.height,Z[1]),et=_.cachedCanvases.getCanvas("pattern",tt.size,Q.size,!0),at=et.context,P=k.createCanvasGraphics(at);P.groupLevel=_.groupLevel,this.setFillAndStrokeStyleToContext(P,c,M);let h=D,o=N,m=U,t=X;return D<0&&(h=0,m+=Math.abs(D)),N<0&&(o=0,t+=Math.abs(N)),at.translate(-(tt.scale*h),-(Q.scale*o)),P.transform(tt.scale,0,0,Q.scale,0,0),at.save(),this.clipBbox(P,h,o,m,t),P.baseTransform=P.ctx.mozCurrentTransform.slice(),P.executeOperatorList(C),P.endDrawing(),{canvas:et.canvas,scaleX:tt.scale,scaleY:Q.scale,offsetX:h,offsetY:o}}getSizeAndScale(_,C,S){_=Math.abs(_);const T=Math.max(g.MAX_PATTERN_SIZE,C);let s=Math.ceil(_*S);return s>=T?s=T:S=s/_,{scale:S,size:s}}clipBbox(_,C,S,T,s){const c=T-C,v=s-S;_.ctx.rect(C,S,c,v),_.current.updateRectMinMax(_.ctx.mozCurrentTransform,[C,S,T,s]),_.clip(),_.endPath()}setFillAndStrokeStyleToContext(_,C,S){const T=_.ctx,s=_.current;switch(C){case l.COLORED:const c=this.ctx;T.fillStyle=c.fillStyle,T.strokeStyle=c.strokeStyle,s.fillColor=c.fillStyle,s.strokeColor=c.strokeStyle;break;case l.UNCOLORED:const v=n.Util.makeHexColor(S[0],S[1],S[2]);T.fillStyle=v,T.strokeStyle=v,s.fillColor=v,s.strokeColor=v;break;default:throw new n.FormatError(`Unsupported paint type: ${C}`)}}getPattern(_,C,S,T){let s=S;T!==F.SHADING&&(s=n.Util.transform(s,C.baseTransform),this.matrix&&(s=n.Util.transform(s,this.matrix)));const c=this.createPatternCanvas(C);let v=new DOMMatrix(s);v=v.translate(c.offsetX,c.offsetY),v=v.scale(1/c.scaleX,1/c.scaleY);const M=_.createPattern(c.canvas,"repeat");try{M.setTransform(v)}catch(k){(0,n.warn)(`TilingPattern.getPattern: "${k==null?void 0:k.message}".`)}return M}}e.TilingPattern=g},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=j;var n=u(1);function j({src:F,srcPos:L=0,dest:w,destPos:b=0,width:d,height:y,inverseDecode:E=!1}){const R=n.FeatureTest.isLittleEndian?4278190080:255,[A,l]=E?[0,R]:[R,0],g=d>>3,r=d&7,_=F.length;w=new Uint32Array(w.buffer);for(let C=0;C<y;C++){for(const T=L+g;L<T;L++){const s=L<_?F[L]:255;w[b++]=s&128?l:A,w[b++]=s&64?l:A,w[b++]=s&32?l:A,w[b++]=s&16?l:A,w[b++]=s&8?l:A,w[b++]=s&4?l:A,w[b++]=s&2?l:A,w[b++]=s&1?l:A}if(r===0)continue;const S=L<_?F[L++]:255;for(let T=0;T<r;T++)w[b++]=S&1<<7-T?l:A}return{srcPos:L,destPos:b}}},(I,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const u=Object.create(null);e.GlobalWorkerOptions=u,u.workerPort=u.workerPort===void 0?null:u.workerPort,u.workerSrc=u.workerSrc===void 0?"":u.workerSrc},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=u(1);const j={UNKNOWN:0,DATA:1,ERROR:2},F={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function L(b){switch(b instanceof Error||typeof b=="object"&&b!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),b.name){case"AbortException":return new n.AbortException(b.message);case"MissingPDFException":return new n.MissingPDFException(b.message);case"PasswordException":return new n.PasswordException(b.message,b.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(b.message,b.status);case"UnknownErrorException":return new n.UnknownErrorException(b.message,b.details);default:return new n.UnknownErrorException(b.message,b.toString())}}class w{constructor(d,y,E){this.sourceName=d,this.targetName=y,this.comObj=E,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=R=>{const A=R.data;if(A.targetName!==this.sourceName)return;if(A.stream){this._processStreamMessage(A);return}if(A.callback){const g=A.callbackId,r=this.callbackCapabilities[g];if(!r)throw new Error(`Cannot resolve callback ${g}`);if(delete this.callbackCapabilities[g],A.callback===j.DATA)r.resolve(A.data);else if(A.callback===j.ERROR)r.reject(L(A.reason));else throw new Error("Unexpected callback case");return}const l=this.actionHandler[A.action];if(!l)throw new Error(`Unknown action from worker: ${A.action}`);if(A.callbackId){const g=this.sourceName,r=A.sourceName;new Promise(function(_){_(l(A.data))}).then(function(_){E.postMessage({sourceName:g,targetName:r,callback:j.DATA,callbackId:A.callbackId,data:_})},function(_){E.postMessage({sourceName:g,targetName:r,callback:j.ERROR,callbackId:A.callbackId,reason:L(_)})});return}if(A.streamId){this._createStreamSink(A);return}l(A.data)},E.addEventListener("message",this._onComObjOnMessage)}on(d,y){const E=this.actionHandler;if(E[d])throw new Error(`There is already an actionName called "${d}"`);E[d]=y}send(d,y,E){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,data:y},E)}sendWithPromise(d,y,E){const R=this.callbackId++,A=(0,n.createPromiseCapability)();this.callbackCapabilities[R]=A;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,callbackId:R,data:y},E)}catch(l){A.reject(l)}return A.promise}sendWithStream(d,y,E,R){const A=this.streamId++,l=this.sourceName,g=this.targetName,r=this.comObj;return new ReadableStream({start:_=>{const C=(0,n.createPromiseCapability)();return this.streamControllers[A]={controller:_,startCall:C,pullCall:null,cancelCall:null,isClosed:!1},r.postMessage({sourceName:l,targetName:g,action:d,streamId:A,data:y,desiredSize:_.desiredSize},R),C.promise},pull:_=>{const C=(0,n.createPromiseCapability)();return this.streamControllers[A].pullCall=C,r.postMessage({sourceName:l,targetName:g,stream:F.PULL,streamId:A,desiredSize:_.desiredSize}),C.promise},cancel:_=>{(0,n.assert)(_ instanceof Error,"cancel must have a valid reason");const C=(0,n.createPromiseCapability)();return this.streamControllers[A].cancelCall=C,this.streamControllers[A].isClosed=!0,r.postMessage({sourceName:l,targetName:g,stream:F.CANCEL,streamId:A,reason:L(_)}),C.promise}},E)}_createStreamSink(d){const y=d.streamId,E=this.sourceName,R=d.sourceName,A=this.comObj,l=this,g=this.actionHandler[d.action],r={enqueue(_,C=1,S){if(this.isCancelled)return;const T=this.desiredSize;this.desiredSize-=C,T>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),A.postMessage({sourceName:E,targetName:R,stream:F.ENQUEUE,streamId:y,chunk:_},S)},close(){this.isCancelled||(this.isCancelled=!0,A.postMessage({sourceName:E,targetName:R,stream:F.CLOSE,streamId:y}),delete l.streamSinks[y])},error(_){(0,n.assert)(_ instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,A.postMessage({sourceName:E,targetName:R,stream:F.ERROR,streamId:y,reason:L(_)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:d.desiredSize,ready:null};r.sinkCapability.resolve(),r.ready=r.sinkCapability.promise,this.streamSinks[y]=r,new Promise(function(_){_(g(d.data,r))}).then(function(){A.postMessage({sourceName:E,targetName:R,stream:F.START_COMPLETE,streamId:y,success:!0})},function(_){A.postMessage({sourceName:E,targetName:R,stream:F.START_COMPLETE,streamId:y,reason:L(_)})})}_processStreamMessage(d){const y=d.streamId,E=this.sourceName,R=d.sourceName,A=this.comObj,l=this.streamControllers[y],g=this.streamSinks[y];switch(d.stream){case F.START_COMPLETE:d.success?l.startCall.resolve():l.startCall.reject(L(d.reason));break;case F.PULL_COMPLETE:d.success?l.pullCall.resolve():l.pullCall.reject(L(d.reason));break;case F.PULL:if(!g){A.postMessage({sourceName:E,targetName:R,stream:F.PULL_COMPLETE,streamId:y,success:!0});break}g.desiredSize<=0&&d.desiredSize>0&&g.sinkCapability.resolve(),g.desiredSize=d.desiredSize,new Promise(function(r){r(g.onPull&&g.onPull())}).then(function(){A.postMessage({sourceName:E,targetName:R,stream:F.PULL_COMPLETE,streamId:y,success:!0})},function(r){A.postMessage({sourceName:E,targetName:R,stream:F.PULL_COMPLETE,streamId:y,reason:L(r)})});break;case F.ENQUEUE:if((0,n.assert)(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(d.chunk);break;case F.CLOSE:if((0,n.assert)(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this._deleteStreamController(l,y);break;case F.ERROR:(0,n.assert)(l,"error should have stream controller"),l.controller.error(L(d.reason)),this._deleteStreamController(l,y);break;case F.CANCEL_COMPLETE:d.success?l.cancelCall.resolve():l.cancelCall.reject(L(d.reason)),this._deleteStreamController(l,y);break;case F.CANCEL:if(!g)break;new Promise(function(r){r(g.onCancel&&g.onCancel(L(d.reason)))}).then(function(){A.postMessage({sourceName:E,targetName:R,stream:F.CANCEL_COMPLETE,streamId:y,success:!0})},function(r){A.postMessage({sourceName:E,targetName:R,stream:F.CANCEL_COMPLETE,streamId:y,reason:L(r)})}),g.sinkCapability.reject(L(d.reason)),g.isCancelled=!0,delete this.streamSinks[y];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(d,y){await Promise.allSettled([d.startCall&&d.startCall.promise,d.pullCall&&d.pullCall.promise,d.cancelCall&&d.cancelCall.promise]),delete this.streamControllers[y]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=w},(I,e,u)=>{var F,L;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=u(1);class j{constructor({parsedData:b,rawData:d}){xt(this,F,void 0);xt(this,L,void 0);Tt(this,F,b),Tt(this,L,d)}getRaw(){return dt(this,L)}get(b){var d;return(d=dt(this,F).get(b))!=null?d:null}getAll(){return(0,n.objectFromMap)(dt(this,F))}has(b){return dt(this,F).has(b)}}F=new WeakMap,L=new WeakMap,e.Metadata=j},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=u(1);class j{constructor(w,b){this.visible=!0,this.name=w,this.intent=b}}class F{constructor(w){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,w!==null){this.name=w.name,this.creator=w.creator,this._order=w.order;for(const b of w.groups)this._groups.set(b.id,new j(b.name,b.intent));if(w.baseState==="OFF")for(const b of this._groups)b.visible=!1;for(const b of w.on)this._groups.get(b).visible=!0;for(const b of w.off)this._groups.get(b).visible=!1}}_evaluateVisibilityExpression(w){const b=w.length;if(b<2)return!0;const d=w[0];for(let y=1;y<b;y++){const E=w[y];let R;if(Array.isArray(E))R=this._evaluateVisibilityExpression(E);else if(this._groups.has(E))R=this._groups.get(E).visible;else return(0,n.warn)(`Optional content group not found: ${E}`),!0;switch(d){case"And":if(!R)return!1;break;case"Or":if(R)return!0;break;case"Not":return!R;default:return!0}}return d==="And"}isVisible(w){if(this._groups.size===0)return!0;if(!w)return(0,n.warn)("Optional content group not defined."),!0;if(w.type==="OCG")return this._groups.has(w.id)?this._groups.get(w.id).visible:((0,n.warn)(`Optional content group not found: ${w.id}`),!0);if(w.type==="OCMD"){if(w.expression)return this._evaluateVisibilityExpression(w.expression);if(!w.policy||w.policy==="AnyOn"){for(const b of w.ids){if(!this._groups.has(b))return(0,n.warn)(`Optional content group not found: ${b}`),!0;if(this._groups.get(b).visible)return!0}return!1}else if(w.policy==="AllOn"){for(const b of w.ids){if(!this._groups.has(b))return(0,n.warn)(`Optional content group not found: ${b}`),!0;if(!this._groups.get(b).visible)return!1}return!0}else if(w.policy==="AnyOff"){for(const b of w.ids){if(!this._groups.has(b))return(0,n.warn)(`Optional content group not found: ${b}`),!0;if(!this._groups.get(b).visible)return!0}return!1}else if(w.policy==="AllOff"){for(const b of w.ids){if(!this._groups.has(b))return(0,n.warn)(`Optional content group not found: ${b}`),!0;if(this._groups.get(b).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${w.policy}.`),!0}return(0,n.warn)(`Unknown group type ${w.type}.`),!0}setVisibility(w,b=!0){if(!this._groups.has(w)){(0,n.warn)(`Optional content group not found: ${w}`);return}this._groups.get(w).visible=!!b}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,n.objectFromMap)(this._groups):null}getGroup(w){return this._groups.get(w)||null}}e.OptionalContentConfig=F},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=u(1),j=u(5);class F{constructor(d,y){(0,n.assert)(y,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=d.progressiveDone||!1,this._contentDispositionFilename=d.contentDispositionFilename||null;const E=d.initialData;if((E==null?void 0:E.length)>0){const R=new Uint8Array(E).buffer;this._queuedChunks.push(R)}this._pdfDataRangeTransport=y,this._isStreamingSupported=!d.disableStream,this._isRangeSupported=!d.disableRange,this._contentLength=d.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((R,A)=>{this._onReceiveData({begin:R,chunk:A})}),this._pdfDataRangeTransport.addProgressListener((R,A)=>{this._onProgress({loaded:R,total:A})}),this._pdfDataRangeTransport.addProgressiveReadListener(R=>{this._onReceiveData({chunk:R})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(d){const y=new Uint8Array(d.chunk).buffer;if(d.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(y):this._queuedChunks.push(y);else{const E=this._rangeReaders.some(function(R){return R._begin!==d.begin?!1:(R._enqueue(y),!0)});(0,n.assert)(E,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var d,y;return(y=(d=this._fullRequestReader)==null?void 0:d._loaded)!=null?y:0}_onProgress(d){if(d.total===void 0){const y=this._rangeReaders[0];y!=null&&y.onProgress&&y.onProgress({loaded:d.loaded})}else{const y=this._fullRequestReader;y!=null&&y.onProgress&&y.onProgress({loaded:d.loaded,total:d.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(d){const y=this._rangeReaders.indexOf(d);y>=0&&this._rangeReaders.splice(y,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const d=this._queuedChunks;return this._queuedChunks=null,new L(this,d,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(d,y){if(y<=this._progressiveDataLength)return null;const E=new w(this,d,y);return this._pdfDataRangeTransport.requestDataRange(d,y),this._rangeReaders.push(E),E}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);for(const y of this._rangeReaders.slice(0))y.cancel(d);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=F;class L{constructor(d,y,E=!1,R=null){this._stream=d,this._done=E||!1,this._filename=(0,j.isPdfFile)(R)?R:null,this._queuedChunks=y||[],this._loaded=0;for(const A of this._queuedChunks)this._loaded+=A.byteLength;this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}_enqueue(d){this._done||(this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunks.push(d),this._loaded+=d.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=(0,n.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class w{constructor(d,y,E){this._stream=d,this._begin=y,this._end=E,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(d){if(!this._done){if(this._requests.length===0)this._queuedChunk=d;else{this._requests.shift().resolve({value:d,done:!1});for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const y=this._queuedChunk;return this._queuedChunk=null,{value:y,done:!1}}if(this._done)return{value:void 0,done:!0};const d=(0,n.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(I,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class u{static textContent(j){const F=[],L={items:F,styles:Object.create(null)};function w(b){var E;if(!b)return;let d=null;const y=b.name;if(y==="#text")d=b.value;else if(u.shouldBuildText(y))(E=b==null?void 0:b.attributes)!=null&&E.textContent?d=b.attributes.textContent:b.value&&(d=b.value);else return;if(d!==null&&F.push({str:d}),!!b.children)for(const R of b.children)w(R)}return w(j),L}static shouldBuildText(j){return!(j==="textarea"||j==="input"||j==="option"||j==="select")}}e.XfaText=u},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=u(6);const j=function(b){return new Promise((d,y)=>{require$$4.readFile(b,(R,A)=>{if(R||!A){y(new Error(R));return}d(new Uint8Array(A))})})};class F extends n.BaseCanvasFactory{_createCanvas(d,y){return require$$4.createCanvas(d,y)}}e.NodeCanvasFactory=F;class L extends n.BaseCMapReaderFactory{_fetchData(d,y){return j(d).then(E=>({cMapData:E,compressionType:y}))}}e.NodeCMapReaderFactory=L;class w extends n.BaseStandardFontDataFactory{_fetchData(d){return j(d)}}e.NodeStandardFontDataFactory=w},(I,e,u)=>{var h,Vt;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var n=u(1),j=u(5),F=u(8),L=u(21),w=u(22);const b=1e3,d=new WeakSet;function y(m){return{width:m[2]-m[0],height:m[3]-m[1]}}class E{static create(t){switch(t.data.annotationType){case n.AnnotationType.LINK:return new A(t);case n.AnnotationType.TEXT:return new l(t);case n.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new r(t);case"Btn":return t.data.radioButton?new C(t):t.data.checkBox?new _(t):new S(t);case"Ch":return new T(t)}return new g(t);case n.AnnotationType.POPUP:return new s(t);case n.AnnotationType.FREETEXT:return new v(t);case n.AnnotationType.LINE:return new M(t);case n.AnnotationType.SQUARE:return new k(t);case n.AnnotationType.CIRCLE:return new D(t);case n.AnnotationType.POLYLINE:return new N(t);case n.AnnotationType.CARET:return new X(t);case n.AnnotationType.INK:return new V(t);case n.AnnotationType.POLYGON:return new U(t);case n.AnnotationType.HIGHLIGHT:return new K(t);case n.AnnotationType.UNDERLINE:return new Z(t);case n.AnnotationType.SQUIGGLY:return new tt(t);case n.AnnotationType.STRIKEOUT:return new Q(t);case n.AnnotationType.STAMP:return new et(t);case n.AnnotationType.FILEATTACHMENT:return new at(t);default:return new R(t)}}}class R{constructor(t,{isRenderable:i=!1,ignoreBorder:a=!1,createQuadrilaterals:f=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,i&&(this.container=this._createContainer(a)),f&&(this.quadrilaterals=this._createQuadrilaterals(a))}_createContainer(t=!1){const i=this.data,a=this.page,f=this.viewport,p=document.createElement("section");let{width:x,height:O}=y(i.rect);p.setAttribute("data-annotation-id",i.id);const q=n.Util.normalizeRect([i.rect[0],a.view[3]-i.rect[1]+a.view[1],i.rect[2],a.view[3]-i.rect[3]+a.view[1]]);if(i.hasOwnCanvas){const B=f.transform.slice(),[z,W]=n.Util.singularValueDecompose2dScale(B);x=Math.ceil(x*z),O=Math.ceil(O*W),q[0]*=z,q[1]*=W;for(let $=0;$<4;$++)B[$]=Math.sign(B[$]);p.style.transform=`matrix(${B.join(",")})`}else p.style.transform=`matrix(${f.transform.join(",")})`;if(p.style.transformOrigin=`${-q[0]}px ${-q[1]}px`,!t&&i.borderStyle.width>0){p.style.borderWidth=`${i.borderStyle.width}px`,i.borderStyle.style!==n.AnnotationBorderStyleType.UNDERLINE&&(x-=2*i.borderStyle.width,O-=2*i.borderStyle.width);const B=i.borderStyle.horizontalCornerRadius,z=i.borderStyle.verticalCornerRadius;if(B>0||z>0){const $=`${B}px / ${z}px`;p.style.borderRadius=$}switch(i.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:p.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:p.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:p.style.borderBottomStyle="solid";break}i.borderColor||i.color||null?p.style.borderColor=n.Util.makeHexColor(i.color[0]|0,i.color[1]|0,i.color[2]|0):p.style.borderWidth=0}return p.style.left=`${q[0]}px`,p.style.top=`${q[1]}px`,i.hasOwnCanvas?p.style.width=p.style.height="auto":(p.style.width=`${x}px`,p.style.height=`${O}px`),p}get _commonActions(){const t=(i,a,f)=>{const p=f.detail[i];f.target.style[a]=L.ColorConverters[`${p[0]}_HTML`](p.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:i=>{const a=i.detail.display%2===1;i.target.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:a,print:i.detail.display===0||i.detail.display===3})},print:i=>{this.annotationStorage.setValue(this.data.id,{print:i.detail.print})},hidden:i=>{i.target.style.visibility=i.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:i.detail.hidden})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.detail.readonly?i.target.setAttribute("readonly",""):i.target.removeAttribute("readonly")},required:i=>{i.detail.required?i.target.setAttribute("required",""):i.target.removeAttribute("required")},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)}})}_dispatchEventFromSandbox(t,i){const a=this._commonActions;for(const f of Object.keys(i.detail)){const p=t[f]||a[f];p&&p(i)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const a=this._commonActions;for(const[f,p]of Object.entries(i)){const x=a[f];x&&(x({detail:p,target:t}),delete i[f])}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const i=[],a=this.data.rect;for(const f of this.data.quadPoints)this.data.rect=[f[2].x,f[2].y,f[1].x,f[1].y],i.push(this._createContainer(t));return this.data.rect=a,i}_createPopup(t,i){let a=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,a=this.quadrilaterals[0]),t||(t=document.createElement("div"),t.style.height=a.style.height,t.style.width=a.style.width,a.appendChild(t));const p=new c({container:a,trigger:t,color:i.color,titleObj:i.titleObj,modificationDate:i.modificationDate,contentsObj:i.contentsObj,richText:i.richText,hideWrapper:!0}).render();p.style.left=a.style.width,a.appendChild(p)}_renderQuadrilaterals(t){for(const i of this.quadrilaterals)i.className=t;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const a=[];if(this._fieldObjects){const f=this._fieldObjects[t];if(f)for(const{page:p,id:x,exportValues:O}of f){if(p===-1||x===i)continue;const q=typeof O=="string"?O:null,B=document.getElementById(x);if(B&&!d.has(B)){(0,n.warn)(`_getElementsByName - element not allowed: ${x}`);continue}a.push({id:x,exportValue:q,domElement:B})}return a}for(const f of document.getElementsByName(t)){const{id:p,exportValue:x}=f;p!==i&&(!d.has(f)||a.push({id:p,exportValue:x,domElement:f}))}return a}static get platform(){const t=typeof navigator!="undefined"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class A extends R{constructor(t,i=null){const a=!!(t.data.url||t.data.dest||t.data.action||t.data.isTooltipOnly||t.data.resetForm||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"]));super(t,{isRenderable:a,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0})}render(){const{data:t,linkService:i}=this,a=document.createElement("a");if(t.url)i.addLinkAttributes(a,t.url,t.newWindow);else if(t.action)this._bindNamedAction(a,t.action);else if(t.dest)this._bindLink(a,t.dest);else{let f=!1;t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(f=!0,this._bindJSAction(a,t)),t.resetForm?this._bindResetFormAction(a,t.resetForm):f||this._bindLink(a,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((f,p)=>{const x=p===0?a:a.cloneNode();return f.appendChild(x),f}):(this.container.className="linkAnnotation",this.container.appendChild(a),this.container)}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&(t.className="internalLink")}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),t.className="internalLink"}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const f of Object.keys(i.actions)){const p=a.get(f);!p||(t[p]=()=>{var x;return(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:f}}),!1})}t.onclick||(t.onclick=()=>!1),t.className="internalLink"}_bindResetFormAction(t,i){const a=t.onclick;if(a||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(t.onclick=()=>!1);return}t.onclick=()=>{var z;a&&a();const{fields:f,refs:p,include:x}=i,O=[];if(f.length!==0||p.length!==0){const W=new Set(p);for(const $ of f){const st=this._fieldObjects[$]||[];for(const{id:rt}of st)W.add(rt)}for(const $ of Object.values(this._fieldObjects))for(const st of $)W.has(st.id)===x&&O.push(st)}else for(const W of Object.values(this._fieldObjects))O.push(...W);const q=this.annotationStorage,B=[];for(const W of O){const{id:$}=W;switch(B.push($),W.type){case"text":{const rt=W.defaultValue||"";q.setValue($,{value:rt});break}case"checkbox":case"radiobutton":{const rt=W.defaultValue===W.exportValues;q.setValue($,{value:rt});break}case"combobox":case"listbox":{const rt=W.defaultValue||"";q.setValue($,{value:rt});break}default:continue}const st=document.getElementById($);!st||!d.has(st)||st.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:B,name:"ResetForm"}})),!1}}}class l extends R{constructor(t){var a,f,p;const i=!!(t.data.hasPopup||((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i})}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.appendChild(t),this.container}}class g extends R{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){const{isWin:i,isMac:a}=R.platform;return i&&t.ctrlKey||a&&t.metaKey}_setEventListener(t,i,a,f){i.includes("mouse")?t.addEventListener(i,p=>{var x;(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:f(p),shift:p.shiftKey,modifier:this._getKeyModifier(p)}})}):t.addEventListener(i,p=>{var x;(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:f(p)}})})}_setEventListeners(t,i,a){var f;for(const[p,x]of i)(x==="Action"||((f=this.data.actions)==null?void 0:f[x]))&&this._setEventListener(t,p,x,a)}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":n.Util.makeHexColor(i[0],i[1],i[2])}}class r extends g{constructor(t){const i=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,a,f){const p=this.annotationStorage;for(const x of this._getElementsByName(t.name,t.id))x.domElement&&(x.domElement[i]=a),p.setValue(x.id,{[f]:a})}render(){var f;const t=this.annotationStorage,i=this.data.id;this.container.className="textWidgetAnnotation";let a=null;if(this.renderForms){const p=t.getValue(i,{value:this.data.fieldValue}),x=p.formattedValue||p.value||"",O={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(a=document.createElement("textarea"),a.textContent=x):(a=document.createElement("input"),a.type="text",a.setAttribute("value",x)),d.add(a),a.disabled=this.data.readOnly,a.name=this.data.fieldName,a.tabIndex=b,O.userValue=x,a.setAttribute("id",i),a.addEventListener("input",B=>{t.setValue(i,{value:B.target.value}),this.setPropertyOnSiblings(a,"value",B.target.value,"value")}),a.addEventListener("resetform",B=>{var W;const z=(W=this.data.defaultFieldValue)!=null?W:"";a.value=O.userValue=z,O.formattedValue=null});let q=B=>{const{formattedValue:z}=O;z!=null&&(B.target.value=z),B.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){a.addEventListener("focus",z=>{O.userValue&&(z.target.value=O.userValue),O.valueOnFocus=z.target.value}),a.addEventListener("updatefromsandbox",z=>{const W={value($){var st;O.userValue=(st=$.detail.value)!=null?st:"",t.setValue(i,{value:O.userValue.toString()}),$.target.value=O.userValue},formattedValue($){const{formattedValue:st}=$.detail;O.formattedValue=st,st!=null&&$.target!==document.activeElement&&($.target.value=st),t.setValue(i,{formattedValue:st})},selRange($){$.target.setSelectionRange(...$.detail.selRange)}};this._dispatchEventFromSandbox(W,z)}),a.addEventListener("keydown",z=>{var st;let W=-1;if(z.key==="Escape"?W=0:z.key==="Enter"?W=2:z.key==="Tab"&&(W=3),W===-1)return;const{value:$}=z.target;O.valueOnFocus!==$&&(O.userValue=$,(st=this.linkService.eventBus)==null||st.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:$,willCommit:!0,commitKey:W,selStart:z.target.selectionStart,selEnd:z.target.selectionEnd}}))});const B=q;q=null,a.addEventListener("blur",z=>{var $;const{value:W}=z.target;O.userValue=W,this._mouseState.isDown&&O.valueOnFocus!==W&&(($=this.linkService.eventBus)==null||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:W,willCommit:!0,commitKey:1,selStart:z.target.selectionStart,selEnd:z.target.selectionEnd}})),B(z)}),(f=this.data.actions)!=null&&f.Keystroke&&a.addEventListener("beforeinput",z=>{var ct;const{data:W,target:$}=z,{value:st,selectionStart:rt,selectionEnd:it}=$;let nt=rt,lt=it;switch(z.inputType){case"deleteWordBackward":{const J=st.substring(0,rt).match(/\w*[^\w]*$/);J&&(nt-=J[0].length);break}case"deleteWordForward":{const J=st.substring(rt).match(/^[^\w]*\w*/);J&&(lt+=J[0].length);break}case"deleteContentBackward":rt===it&&(nt-=1);break;case"deleteContentForward":rt===it&&(lt+=1);break}z.preventDefault(),(ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:st,change:W||"",willCommit:!1,selStart:nt,selEnd:lt}})}),this._setEventListeners(a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],z=>z.target.value)}if(q&&a.addEventListener("blur",q),this.data.maxLen!==null&&(a.maxLength=this.data.maxLen),this.data.comb){const z=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;a.classList.add("comb"),a.style.letterSpacing=`calc(${z}px - 1ch)`}}else a=document.createElement("div"),a.textContent=this.data.fieldValue,a.style.verticalAlign="middle",a.style.display="table-cell";return this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.appendChild(a),this.container}_setTextStyle(t){const i=["left","center","right"],{fontSize:a,fontColor:f}=this.data.defaultAppearanceData,p=t.style;a&&(p.fontSize=`${a}px`),p.color=n.Util.makeHexColor(f[0],f[1],f[2]),this.data.textAlignment!==null&&(p.textAlign=i[this.data.textAlignment])}}class _ extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,a=i.id;let f=t.getValue(a,{value:i.exportValue===i.fieldValue}).value;typeof f=="string"&&(f=f!=="Off",t.setValue(a,{value:f})),this.container.className="buttonWidgetAnnotation checkBox";const p=document.createElement("input");return d.add(p),p.disabled=i.readOnly,p.type="checkbox",p.name=i.fieldName,f&&p.setAttribute("checked",!0),p.setAttribute("id",a),p.setAttribute("exportValue",i.exportValue),p.tabIndex=b,p.addEventListener("change",x=>{const{name:O,checked:q}=x.target;for(const B of this._getElementsByName(O,a)){const z=q&&B.exportValue===i.exportValue;B.domElement&&(B.domElement.checked=z),t.setValue(B.id,{value:z})}t.setValue(a,{value:q})}),p.addEventListener("resetform",x=>{const O=i.defaultFieldValue||"Off";x.target.checked=O===i.exportValue}),this.enableScripting&&this.hasJSActions&&(p.addEventListener("updatefromsandbox",x=>{const O={value(q){q.target.checked=q.detail.value!=="Off",t.setValue(a,{value:q.target.checked})}};this._dispatchEventFromSandbox(O,x)}),this._setEventListeners(p,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.checked)),this._setBackgroundColor(p),this._setDefaultPropertiesFromJS(p),this.container.appendChild(p),this.container}}class C extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,i=this.data,a=i.id;let f=t.getValue(a,{value:i.fieldValue===i.buttonValue}).value;typeof f=="string"&&(f=f!==i.buttonValue,t.setValue(a,{value:f}));const p=document.createElement("input");if(d.add(p),p.disabled=i.readOnly,p.type="radio",p.name=i.fieldName,f&&p.setAttribute("checked",!0),p.setAttribute("id",a),p.tabIndex=b,p.addEventListener("change",x=>{const{name:O,checked:q}=x.target;for(const B of this._getElementsByName(O,a))t.setValue(B.id,{value:!1});t.setValue(a,{value:q})}),p.addEventListener("resetform",x=>{const O=i.defaultFieldValue;x.target.checked=O!=null&&O===i.buttonValue}),this.enableScripting&&this.hasJSActions){const x=i.buttonValue;p.addEventListener("updatefromsandbox",O=>{const q={value:B=>{const z=x===B.detail.value;for(const W of this._getElementsByName(B.target.name)){const $=z&&W.id===a;W.domElement&&(W.domElement.checked=$),t.setValue(W.id,{value:$})}}};this._dispatchEventFromSandbox(q,O)}),this._setEventListeners(p,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],O=>O.target.checked)}return this._setBackgroundColor(p),this._setDefaultPropertiesFromJS(p),this.container.appendChild(p),this.container}}class S extends A{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();return t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(t),t}}class T extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,i=this.data.id,a=t.getValue(i,{value:this.data.fieldValue});let{fontSize:f}=this.data.defaultAppearanceData;f||(f=9);const p=`calc(${f}px * var(--zoom-factor))`,x=document.createElement("select");d.add(x),x.disabled=this.data.readOnly,x.name=this.data.fieldName,x.setAttribute("id",i),x.tabIndex=b,x.style.fontSize=`${f}px`,this.data.combo||(x.size=this.data.options.length,this.data.multiSelect&&(x.multiple=!0)),x.addEventListener("resetform",B=>{const z=this.data.defaultFieldValue;for(const W of x.options)W.selected=W.value===z});for(const B of this.data.options){const z=document.createElement("option");z.textContent=B.displayValue,z.value=B.exportValue,this.data.combo&&(z.style.fontSize=p),a.value.includes(B.exportValue)&&z.setAttribute("selected",!0),x.appendChild(z)}const O=(B,z)=>{const W=z?"value":"textContent",$=B.target.options;return B.target.multiple?Array.prototype.filter.call($,st=>st.selected).map(st=>st[W]):$.selectedIndex===-1?null:$[$.selectedIndex][W]},q=B=>{const z=B.target.options;return Array.prototype.map.call(z,W=>({displayValue:W.textContent,exportValue:W.value}))};return this.enableScripting&&this.hasJSActions?(x.addEventListener("updatefromsandbox",B=>{const z={value(W){const $=W.detail.value,st=new Set(Array.isArray($)?$:[$]);for(const rt of x.options)rt.selected=st.has(rt.value);t.setValue(i,{value:O(W,!0)})},multipleSelection(W){x.multiple=!0},remove(W){const $=x.options,st=W.detail.remove;$[st].selected=!1,x.remove(st),$.length>0&&Array.prototype.findIndex.call($,it=>it.selected)===-1&&($[0].selected=!0),t.setValue(i,{value:O(W,!0),items:q(W)})},clear(W){for(;x.length!==0;)x.remove(0);t.setValue(i,{value:null,items:[]})},insert(W){const{index:$,displayValue:st,exportValue:rt}=W.detail.insert,it=document.createElement("option");it.textContent=st,it.value=rt,x.insertBefore(it,x.children[$]),t.setValue(i,{value:O(W,!0),items:q(W)})},items(W){const{items:$}=W.detail;for(;x.length!==0;)x.remove(0);for(const st of $){const{displayValue:rt,exportValue:it}=st,nt=document.createElement("option");nt.textContent=rt,nt.value=it,x.appendChild(nt)}x.options.length>0&&(x.options[0].selected=!0),t.setValue(i,{value:O(W,!0),items:q(W)})},indices(W){const $=new Set(W.detail.indices);for(const st of W.target.options)st.selected=$.has(st.index);t.setValue(i,{value:O(W,!0)})},editable(W){W.target.disabled=!W.detail.editable}};this._dispatchEventFromSandbox(z,B)}),x.addEventListener("input",B=>{var $;const z=O(B,!0),W=O(B,!1);t.setValue(i,{value:z}),($=this.linkService.eventBus)==null||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:W,changeEx:z,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(x,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],B=>B.target.checked)):x.addEventListener("input",function(B){t.setValue(i,{value:O(B,!0)})}),this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.appendChild(x),this.container}}class s extends R{constructor(t){var a,f,p;const i=!!(((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i})}render(){const t=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",t.includes(this.data.parentType))return this.container;const i=`[data-annotation-id="${this.data.parentId}"]`,a=this.layer.querySelectorAll(i);if(a.length===0)return this.container;const f=new c({container:this.container,trigger:Array.from(a),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),p=this.page,x=n.Util.normalizeRect([this.data.parentRect[0],p.view[3]-this.data.parentRect[1]+p.view[1],this.data.parentRect[2],p.view[3]-this.data.parentRect[3]+p.view[1]]),O=x[0]+this.data.parentRect[2]-this.data.parentRect[0],q=x[1];return this.container.style.transformOrigin=`${-O}px ${-q}px`,this.container.style.left=`${O}px`,this.container.style.top=`${q}px`,this.container.appendChild(f.render()),this.container}}class c{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){var O,q;const i=document.createElement("div");i.className="popupWrapper",this.hideElement=this.hideWrapper?i:this.container,this.hideElement.hidden=!0;const a=document.createElement("div");a.className="popup";const f=this.color;if(f){const B=.7*(255-f[0])+f[0],z=.7*(255-f[1])+f[1],W=.7*(255-f[2])+f[2];a.style.backgroundColor=n.Util.makeHexColor(B|0,z|0,W|0)}const p=document.createElement("h1");p.dir=this.titleObj.dir,p.textContent=this.titleObj.str,a.appendChild(p);const x=j.PDFDateString.toDateObject(this.modificationDate);if(x){const B=document.createElement("span");B.className="popupDate",B.textContent="{{date}}, {{time}}",B.dataset.l10nId="annotation_date_string",B.dataset.l10nArgs=JSON.stringify({date:x.toLocaleDateString(),time:x.toLocaleTimeString()}),a.appendChild(B)}if(((O=this.richText)==null?void 0:O.str)&&(!((q=this.contentsObj)!=null&&q.str)||this.contentsObj.str===this.richText.str))w.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:a}),a.lastChild.className="richText popupContent";else{const B=this._formatContents(this.contentsObj);a.appendChild(B)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const B of this.trigger)B.addEventListener("click",this._toggle.bind(this)),B.addEventListener("mouseover",this._show.bind(this,!1)),B.addEventListener("mouseout",this._hide.bind(this,!1));return a.addEventListener("click",this._hide.bind(this,!0)),i.appendChild(a),i}_formatContents({str:t,dir:i}){const a=document.createElement("p");a.className="popupContent",a.dir=i;const f=t.split(/(?:\r\n?|\n)/);for(let p=0,x=f.length;p<x;++p){const O=f[p];a.appendChild(document.createTextNode(O)),p<x-1&&a.appendChild(document.createElement("br"))}return a}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class v extends R{constructor(t){var a,f,p;const i=!!(t.data.hasPopup||((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class M extends R{constructor(t){var a,f,p;const i=!!(t.data.hasPopup||((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:i,height:a}=y(t.rect),f=this.svgFactory.create(i,a),p=this.svgFactory.createElement("svg:line");return p.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),p.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),p.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),p.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),p.setAttribute("stroke-width",t.borderStyle.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),f.appendChild(p),this.container.append(f),this._createPopup(p,t),this.container}}class k extends R{constructor(t){var a,f,p;const i=!!(t.data.hasPopup||((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{width:i,height:a}=y(t.rect),f=this.svgFactory.create(i,a),p=t.borderStyle.width,x=this.svgFactory.createElement("svg:rect");return x.setAttribute("x",p/2),x.setAttribute("y",p/2),x.setAttribute("width",i-p),x.setAttribute("height",a-p),x.setAttribute("stroke-width",p||1),x.setAttribute("stroke","transparent"),x.setAttribute("fill","transparent"),f.appendChild(x),this.container.append(f),this._createPopup(x,t),this.container}}class D extends R{constructor(t){var a,f,p;const i=!!(t.data.hasPopup||((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{width:i,height:a}=y(t.rect),f=this.svgFactory.create(i,a),p=t.borderStyle.width,x=this.svgFactory.createElement("svg:ellipse");return x.setAttribute("cx",i/2),x.setAttribute("cy",a/2),x.setAttribute("rx",i/2-p/2),x.setAttribute("ry",a/2-p/2),x.setAttribute("stroke-width",p||1),x.setAttribute("stroke","transparent"),x.setAttribute("fill","transparent"),f.appendChild(x),this.container.append(f),this._createPopup(x,t),this.container}}class N extends R{constructor(t){var a,f,p;const i=!!(t.data.hasPopup||((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:i,height:a}=y(t.rect),f=this.svgFactory.create(i,a);let p=[];for(const O of t.vertices){const q=O.x-t.rect[0],B=t.rect[3]-O.y;p.push(q+","+B)}p=p.join(" ");const x=this.svgFactory.createElement(this.svgElementName);return x.setAttribute("points",p),x.setAttribute("stroke-width",t.borderStyle.width||1),x.setAttribute("stroke","transparent"),x.setAttribute("fill","transparent"),f.appendChild(x),this.container.append(f),this._createPopup(x,t),this.container}}class U extends N{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class X extends R{constructor(t){var a,f,p;const i=!!(t.data.hasPopup||((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class V extends R{constructor(t){var a,f,p;const i=!!(t.data.hasPopup||((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:i,height:a}=y(t.rect),f=this.svgFactory.create(i,a);for(const p of t.inkLists){let x=[];for(const q of p){const B=q.x-t.rect[0],z=t.rect[3]-q.y;x.push(`${B},${z}`)}x=x.join(" ");const O=this.svgFactory.createElement(this.svgElementName);O.setAttribute("points",x),O.setAttribute("stroke-width",t.borderStyle.width||1),O.setAttribute("stroke","transparent"),O.setAttribute("fill","transparent"),this._createPopup(O,t),f.appendChild(O)}return this.container.append(f),this.container}}class K extends R{constructor(t){var a,f,p;const i=!!(t.data.hasPopup||((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class Z extends R{constructor(t){var a,f,p;const i=!!(t.data.hasPopup||((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class tt extends R{constructor(t){var a,f,p;const i=!!(t.data.hasPopup||((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class Q extends R{constructor(t){var a,f,p;const i=!!(t.data.hasPopup||((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class et extends R{constructor(t){var a,f,p;const i=!!(t.data.hasPopup||((a=t.data.titleObj)==null?void 0:a.str)||((f=t.data.contentsObj)==null?void 0:f.str)||((p=t.data.richText)==null?void 0:p.str));super(t,{isRenderable:i,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class at extends R{constructor(t){var f;super(t,{isRenderable:!0});const{filename:i,content:a}=this.data.file;this.filename=(0,j.getFilenameFromUrl)(i),this.content=a,(f=this.linkService.eventBus)==null||f.dispatch("fileattachmentannotation",{source:this,filename:i,content:a})}render(){var i,a;this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((i=this.data.titleObj)==null?void 0:i.str)||((a=this.data.contentsObj)==null?void 0:a.str)||this.data.richText)&&this._createPopup(t,this.data),this.container.appendChild(t),this.container}_download(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.container,this.content,this.filename)}}class P{static render(t){const i=[],a=[];for(const p of t.annotations){if(!p)continue;const{width:x,height:O}=y(p.rect);if(!(x<=0||O<=0)){if(p.annotationType===n.AnnotationType.POPUP){a.push(p);continue}i.push(p)}}a.length&&i.push(...a);const f=t.div;for(const p of i){const x=E.create({data:p,layer:f,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new j.DOMSVGFactory,annotationStorage:t.annotationStorage||new F.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(x.isRenderable){const O=x.render();if(p.hidden&&(O.style.visibility="hidden"),Array.isArray(O))for(const q of O)f.appendChild(q);else x instanceof s?f.prepend(O):f.appendChild(O)}}Lt(this,h,Vt).call(this,f,t.annotationCanvasMap)}static update(t){const{page:i,viewport:a,annotations:f,annotationCanvasMap:p,div:x}=t,O=a.transform,q=`matrix(${O.join(",")})`;let B,z;for(const W of f){const $=x.querySelectorAll(`[data-annotation-id="${W.id}"]`);if($)for(const st of $)if(W.hasOwnCanvas){const rt=n.Util.normalizeRect([W.rect[0],i.view[3]-W.rect[1]+i.view[1],W.rect[2],i.view[3]-W.rect[3]+i.view[1]]);if(!z){B=Math.abs(O[0]||O[1]);const lt=O.slice();for(let ct=0;ct<4;ct++)lt[ct]=Math.sign(lt[ct]);z=`matrix(${lt.join(",")})`}const it=rt[0]*B,nt=rt[1]*B;st.style.left=`${it}px`,st.style.top=`${nt}px`,st.style.transformOrigin=`${-it}px ${-nt}px`,st.style.transform=z}else st.style.transform=q}Lt(this,h,Vt).call(this,x,p),x.hidden=!1}}h=new WeakSet,Vt=function(t,i){if(!!i){for(const[a,f]of i){const p=t.querySelector(`[data-annotation-id="${a}"]`);if(!p)continue;const{firstChild:x}=p;x.nodeName==="CANVAS"?p.replaceChild(f,x):p.insertBefore(f,x)}i.clear()}},xt(P,h),e.AnnotationLayer=P},(I,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function u(j){return Math.floor(Math.max(0,Math.min(1,j))*255).toString(16).padStart(2,"0")}class n{static CMYK_G([F,L,w,b]){return["G",1-Math.min(1,.3*F+.59*w+.11*L+b)]}static G_CMYK([F]){return["CMYK",0,0,0,1-F]}static G_RGB([F]){return["RGB",F,F,F]}static G_HTML([F]){const L=u(F);return`#${L}${L}${L}`}static RGB_G([F,L,w]){return["G",.3*F+.59*L+.11*w]}static RGB_HTML([F,L,w]){const b=u(F),d=u(L),y=u(w);return`#${b}${d}${y}`}static T_HTML(){return"#00000000"}static CMYK_RGB([F,L,w,b]){return["RGB",1-Math.min(1,F+b),1-Math.min(1,w+b),1-Math.min(1,L+b)]}static CMYK_HTML(F){return this.RGB_HTML(this.CMYK_RGB(F))}static RGB_CMYK([F,L,w]){const b=1-F,d=1-L,y=1-w,E=Math.min(b,d,y);return["CMYK",b,d,y,E]}}e.ColorConverters=n},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=u(18);class j{static setupStorage(L,w,b,d,y){const E=d.getValue(w,{value:null});switch(b.name){case"textarea":if(E.value!==null&&(L.textContent=E.value),y==="print")break;L.addEventListener("input",R=>{d.setValue(w,{value:R.target.value})});break;case"input":if(b.attributes.type==="radio"||b.attributes.type==="checkbox"){if(E.value===b.attributes.xfaOn?L.setAttribute("checked",!0):E.value===b.attributes.xfaOff&&L.removeAttribute("checked"),y==="print")break;L.addEventListener("change",R=>{d.setValue(w,{value:R.target.checked?R.target.getAttribute("xfaOn"):R.target.getAttribute("xfaOff")})})}else{if(E.value!==null&&L.setAttribute("value",E.value),y==="print")break;L.addEventListener("input",R=>{d.setValue(w,{value:R.target.value})})}break;case"select":if(E.value!==null)for(const R of b.children)R.attributes.value===E.value&&(R.attributes.selected=!0);L.addEventListener("input",R=>{const A=R.target.options,l=A.selectedIndex===-1?"":A[A.selectedIndex].value;d.setValue(w,{value:l})});break}}static setAttributes({html:L,element:w,storage:b=null,intent:d,linkService:y}){const{attributes:E}=w,R=L instanceof HTMLAnchorElement;E.type==="radio"&&(E.name=`${E.name}-${d}`);for(const[A,l]of Object.entries(E))if(!(l==null||A==="dataId"))if(A!=="style")if(A==="textContent")L.textContent=l;else if(A==="class")l.length&&L.setAttribute(A,l.join(" "));else{if(R&&(A==="href"||A==="newWindow"))continue;L.setAttribute(A,l)}else Object.assign(L.style,l);R&&y.addLinkAttributes(L,E.href,E.newWindow),b&&E.dataId&&this.setupStorage(L,E.dataId,w,b)}static render(L){var g;const w=L.annotationStorage,b=L.linkService,d=L.xfaHtml,y=L.intent||"display",E=document.createElement(d.name);d.attributes&&this.setAttributes({html:E,element:d,intent:y,linkService:b});const R=[[d,-1,E]],A=L.div;if(A.appendChild(E),L.viewport){const r=`matrix(${L.viewport.transform.join(",")})`;A.style.transform=r}y!=="richText"&&A.setAttribute("class","xfaLayer xfaFont");const l=[];for(;R.length>0;){const[r,_,C]=R[R.length-1];if(_+1===r.children.length){R.pop();continue}const S=r.children[++R[R.length-1][1]];if(S===null)continue;const{name:T}=S;if(T==="#text"){const c=document.createTextNode(S.value);l.push(c),C.appendChild(c);continue}let s;if((g=S==null?void 0:S.attributes)!=null&&g.xmlns?s=document.createElementNS(S.attributes.xmlns,T):s=document.createElement(T),C.appendChild(s),S.attributes&&this.setAttributes({html:s,element:S,storage:w,intent:y,linkService:b}),S.children&&S.children.length>0)R.push([S,-1,s]);else if(S.value){const c=document.createTextNode(S.value);n.XfaText.shouldBuildText(T)&&l.push(c),s.appendChild(c)}}for(const r of A.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))r.setAttribute("readOnly",!0);return{textDivs:l}}static update(L){const w=`matrix(${L.viewport.transform.join(",")})`;L.div.style.transform=w,L.div.hidden=!1}}e.XfaLayer=j},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=_;var n=u(1);const j=1e5,F=30,L=.8,w=new Map,b=/^\s+$/g;function d(C,S){const T=w.get(C);if(T)return T;S.save(),S.font=`${F}px ${C}`;const s=S.measureText("");let c=s.fontBoundingBoxAscent,v=Math.abs(s.fontBoundingBoxDescent);if(c){S.restore();const k=c/(c+v);return w.set(C,k),k}S.strokeStyle="red",S.clearRect(0,0,F,F),S.strokeText("g",0,0);let M=S.getImageData(0,0,F,F).data;v=0;for(let k=M.length-1-3;k>=0;k-=4)if(M[k]>0){v=Math.ceil(k/4/F);break}S.clearRect(0,0,F,F),S.strokeText("A",0,F),M=S.getImageData(0,0,F,F).data,c=0;for(let k=0,D=M.length;k<D;k+=4)if(M[k]>0){c=F-Math.floor(k/4/F);break}if(S.restore(),c){const k=c/(c+v);return w.set(C,k),k}return w.set(C,L),L}function y(C,S,T,s){const c=document.createElement("span"),v=C._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:S.str!=="",hasEOL:S.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:S.str!=="",hasEOL:S.hasEOL};C._textDivs.push(c);const M=n.Util.transform(C._viewport.transform,S.transform);let k=Math.atan2(M[1],M[0]);const D=T[S.fontName];D.vertical&&(k+=Math.PI/2);const N=Math.hypot(M[2],M[3]),U=N*d(D.fontFamily,s);let X,V;k===0?(X=M[4],V=M[5]-U):(X=M[4]+U*Math.sin(k),V=M[5]-U*Math.cos(k)),c.style.left=`${X}px`,c.style.top=`${V}px`,c.style.fontSize=`${N}px`,c.style.fontFamily=D.fontFamily,c.setAttribute("role","presentation"),c.textContent=S.str,c.dir=S.dir,C._fontInspectorEnabled&&(c.dataset.fontName=S.fontName),k!==0&&(v.angle=k*(180/Math.PI));let K=!1;if(S.str.length>1||C._enhanceTextSelection&&b.test(S.str))K=!0;else if(S.str!==" "&&S.transform[0]!==S.transform[3]){const Z=Math.abs(S.transform[0]),tt=Math.abs(S.transform[3]);Z!==tt&&Math.max(Z,tt)/Math.min(Z,tt)>1.5&&(K=!0)}if(K&&(D.vertical?v.canvasWidth=S.height*C._viewport.scale:v.canvasWidth=S.width*C._viewport.scale),C._textDivProperties.set(c,v),C._textContentStream&&C._layoutText(c),C._enhanceTextSelection&&v.hasText){let Z=1,tt=0;k!==0&&(Z=Math.cos(k),tt=Math.sin(k));const Q=(D.vertical?S.height:S.width)*C._viewport.scale,et=N;let at,P;k!==0?(at=[Z,tt,-tt,Z,X,V],P=n.Util.getAxialAlignedBoundingBox([0,0,Q,et],at)):P=[X,V,X+Q,V+et],C._bounds.push({left:P[0],top:P[1],right:P[2],bottom:P[3],div:c,size:[Q,et],m:at})}}function E(C){if(C._canceled)return;const S=C._textDivs,T=C._capability,s=S.length;if(s>j){C._renderingDone=!0,T.resolve();return}if(!C._textContentStream)for(let c=0;c<s;c++)C._layoutText(S[c]);C._renderingDone=!0,T.resolve()}function R(C,S,T){let s=0;for(let c=0;c<T;c++){const v=C[S++];v>0&&(s=s?Math.min(v,s):v)}return s}function A(C){const S=C._bounds,T=C._viewport,s=l(T.width,T.height,S);for(let c=0;c<s.length;c++){const v=S[c].div,M=C._textDivProperties.get(v);if(M.angle===0){M.paddingLeft=S[c].left-s[c].left,M.paddingTop=S[c].top-s[c].top,M.paddingRight=s[c].right-S[c].right,M.paddingBottom=s[c].bottom-S[c].bottom,C._textDivProperties.set(v,M);continue}const k=s[c],D=S[c],N=D.m,U=N[0],X=N[1],V=[[0,0],[0,D.size[1]],[D.size[0],0],D.size],K=new Float64Array(64);for(let tt=0,Q=V.length;tt<Q;tt++){const et=n.Util.applyTransform(V[tt],N);K[tt+0]=U&&(k.left-et[0])/U,K[tt+4]=X&&(k.top-et[1])/X,K[tt+8]=U&&(k.right-et[0])/U,K[tt+12]=X&&(k.bottom-et[1])/X,K[tt+16]=X&&(k.left-et[0])/-X,K[tt+20]=U&&(k.top-et[1])/U,K[tt+24]=X&&(k.right-et[0])/-X,K[tt+28]=U&&(k.bottom-et[1])/U,K[tt+32]=U&&(k.left-et[0])/-U,K[tt+36]=X&&(k.top-et[1])/-X,K[tt+40]=U&&(k.right-et[0])/-U,K[tt+44]=X&&(k.bottom-et[1])/-X,K[tt+48]=X&&(k.left-et[0])/X,K[tt+52]=U&&(k.top-et[1])/-U,K[tt+56]=X&&(k.right-et[0])/X,K[tt+60]=U&&(k.bottom-et[1])/-U}const Z=1+Math.min(Math.abs(U),Math.abs(X));M.paddingLeft=R(K,32,16)/Z,M.paddingTop=R(K,48,16)/Z,M.paddingRight=R(K,0,16)/Z,M.paddingBottom=R(K,16,16)/Z,C._textDivProperties.set(v,M)}}function l(C,S,T){const s=T.map(function(v,M){return{x1:v.left,y1:v.top,x2:v.right,y2:v.bottom,index:M,x1New:void 0,x2New:void 0}});g(C,s);const c=new Array(T.length);for(const v of s){const M=v.index;c[M]={left:v.x1New,top:0,right:v.x2New,bottom:0}}T.map(function(v,M){const k=c[M],D=s[M];D.x1=v.top,D.y1=C-k.right,D.x2=v.bottom,D.y2=C-k.left,D.index=M,D.x1New=void 0,D.x2New=void 0}),g(S,s);for(const v of s){const M=v.index;c[M].top=v.x1New,c[M].bottom=v.x2New}return c}function g(C,S){S.sort(function(c,v){return c.x1-v.x1||c.index-v.index});const s=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const c of S){let v=0;for(;v<s.length&&s[v].end<=c.y1;)v++;let M=s.length-1;for(;M>=0&&s[M].start>=c.y2;)M--;let k,D,N,U,X=-1/0;for(N=v;N<=M;N++){k=s[N],D=k.boundary;let Z;D.x2>c.x1?Z=D.index>c.index?D.x1New:c.x1:D.x2New===void 0?Z=(D.x2+c.x1)/2:Z=D.x2New,Z>X&&(X=Z)}for(c.x1New=X,N=v;N<=M;N++)k=s[N],D=k.boundary,D.x2New===void 0?D.x2>c.x1?D.index>c.index&&(D.x2New=D.x2):D.x2New=X:D.x2New>X&&(D.x2New=Math.max(X,D.x2));const V=[];let K=null;for(N=v;N<=M;N++){k=s[N],D=k.boundary;const Z=D.x2>c.x2?D:c;K===Z?V[V.length-1].end=k.end:(V.push({start:k.start,end:k.end,boundary:Z}),K=Z)}for(s[v].start<c.y1&&(V[0].start=c.y1,V.unshift({start:s[v].start,end:c.y1,boundary:s[v].boundary})),c.y2<s[M].end&&(V[V.length-1].end=c.y2,V.push({start:c.y2,end:s[M].end,boundary:s[M].boundary})),N=v;N<=M;N++){if(k=s[N],D=k.boundary,D.x2New!==void 0)continue;let Z=!1;for(U=v-1;!Z&&U>=0&&s[U].start>=D.y1;U--)Z=s[U].boundary===D;for(U=M+1;!Z&&U<s.length&&s[U].end<=D.y2;U++)Z=s[U].boundary===D;for(U=0;!Z&&U<V.length;U++)Z=V[U].boundary===D;Z||(D.x2New=X)}Array.prototype.splice.apply(s,[v,M-v+1].concat(V))}for(const c of s){const v=c.boundary;v.x2New===void 0&&(v.x2New=Math.max(C,v.x2))}}class r{constructor({textContent:S,textContentStream:T,container:s,viewport:c,textDivs:v,textContentItemsStr:M,enhanceTextSelection:k}){var D;this._textContent=S,this._textContentStream=T,this._container=s,this._document=s.ownerDocument,this._viewport=c,this._textDivs=v||[],this._textContentItemsStr=M||[],this._enhanceTextSelection=!!k,this._fontInspectorEnabled=!!((D=globalThis.FontInspector)!=null&&D.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(S,T){for(let s=0,c=S.length;s<c;s++){if(S[s].str===void 0){if(S[s].type==="beginMarkedContentProps"||S[s].type==="beginMarkedContent"){const v=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),S[s].id!==null&&this._container.setAttribute("id",`${S[s].id}`),v.appendChild(this._container)}else S[s].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(S[s].str),y(this,S[s],T,this._layoutTextCtx)}}_layoutText(S){const T=this._textDivProperties.get(S);let s="";if(T.canvasWidth!==0&&T.hasText){const{fontSize:c,fontFamily:v}=S.style;(c!==this._layoutTextLastFontSize||v!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${c} ${v}`,this._layoutTextLastFontSize=c,this._layoutTextLastFontFamily=v);const{width:M}=this._layoutTextCtx.measureText(S.textContent);if(M>0){const k=T.canvasWidth/M;this._enhanceTextSelection&&(T.scale=k),s=`scaleX(${k})`}}if(T.angle!==0&&(s=`rotate(${T.angle}deg) ${s}`),s.length>0&&(this._enhanceTextSelection&&(T.originalTransform=s),S.style.transform=s),T.hasText&&this._container.appendChild(S),T.hasEOL){const c=document.createElement("br");c.setAttribute("role","presentation"),this._container.appendChild(c)}}_render(S=0){const T=(0,n.createPromiseCapability)();let s=Object.create(null);const c=this._document.createElement("canvas");if(c.height=c.width=F,this._layoutTextCtx=c.getContext("2d",{alpha:!1}),this._textContent){const v=this._textContent.items,M=this._textContent.styles;this._processItems(v,M),T.resolve()}else if(this._textContentStream){const v=()=>{this._reader.read().then(({value:M,done:k})=>{if(k){T.resolve();return}Object.assign(s,M.styles),this._processItems(M.items,s),v()},T.reject)};this._reader=this._textContentStream.getReader(),v()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');T.promise.then(()=>{s=null,S?this._renderTimer=setTimeout(()=>{E(this),this._renderTimer=null},S):E(this)},this._capability.reject)}expandTextDivs(S=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(A(this),this._bounds=null);const T=[],s=[];for(let c=0,v=this._textDivs.length;c<v;c++){const M=this._textDivs[c],k=this._textDivProperties.get(M);!k.hasText||(S?(T.length=0,s.length=0,k.originalTransform&&T.push(k.originalTransform),k.paddingTop>0?(s.push(`${k.paddingTop}px`),T.push(`translateY(${-k.paddingTop}px)`)):s.push(0),k.paddingRight>0?s.push(`${k.paddingRight/k.scale}px`):s.push(0),k.paddingBottom>0?s.push(`${k.paddingBottom}px`):s.push(0),k.paddingLeft>0?(s.push(`${k.paddingLeft/k.scale}px`),T.push(`translateX(${-k.paddingLeft/k.scale}px)`)):s.push(0),M.style.padding=s.join(" "),T.length&&(M.style.transform=T.join(" "))):(M.style.padding=null,M.style.transform=k.originalTransform))}}}function _(C){const S=new r({textContent:C.textContent,textContentStream:C.textContentStream,container:C.container,viewport:C.viewport,textDivs:C.textDivs,textContentItemsStr:C.textContentItemsStr,enhanceTextSelection:C.enhanceTextSelection});return S._render(C.timeout),S}},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=u(1),j=u(5),F=u(3);let L=class{constructor(){(0,n.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=L;{let g=function(s){let c=[];const v=[];for(const M of s){if(M.fn==="save"){c.push({fnId:92,fn:"group",items:[]}),v.push(c),c=c[c.length-1].items;continue}M.fn==="restore"?c=v.pop():c.push(M)}return c},r=function(s){if(Number.isInteger(s))return s.toString();const c=s.toFixed(10);let v=c.length-1;if(c[v]!=="0")return c;do v--;while(c[v]==="0");return c.substring(0,c[v]==="."?v:v+1)},_=function(s){if(s[4]===0&&s[5]===0){if(s[1]===0&&s[2]===0)return s[0]===1&&s[3]===1?"":`scale(${r(s[0])} ${r(s[3])})`;if(s[0]===s[3]&&s[1]===-s[2]){const c=Math.acos(s[0])*180/Math.PI;return`rotate(${r(c)})`}}else if(s[0]===1&&s[1]===0&&s[2]===0&&s[3]===1)return`translate(${r(s[4])} ${r(s[5])})`;return`matrix(${r(s[0])} ${r(s[1])} ${r(s[2])} ${r(s[3])} ${r(s[4])} ${r(s[5])})`};const w={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},b="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/1999/xlink",y=["butt","round","square"],E=["miter","round","bevel"],R=function(s,c="",v=!1){if(URL.createObjectURL&&typeof Blob!="undefined"&&!v)return URL.createObjectURL(new Blob([s],{type:c}));const M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let k=`data:${c};base64,`;for(let D=0,N=s.length;D<N;D+=3){const U=s[D]&255,X=s[D+1]&255,V=s[D+2]&255,K=U>>2,Z=(U&3)<<4|X>>4,tt=D+1<N?(X&15)<<2|V>>6:64,Q=D+2<N?V&63:64;k+=M[K]+M[Z]+M[tt]+M[Q]}return k},A=function(){const s=new Uint8Array([137,80,78,71,13,10,26,10]),c=12,v=new Int32Array(256);for(let V=0;V<256;V++){let K=V;for(let Z=0;Z<8;Z++)K&1?K=3988292384^K>>1&2147483647:K=K>>1&2147483647;v[V]=K}function M(V,K,Z){let tt=-1;for(let Q=K;Q<Z;Q++){const et=(tt^V[Q])&255,at=v[et];tt=tt>>>8^at}return tt^-1}function k(V,K,Z,tt){let Q=tt;const et=K.length;Z[Q]=et>>24&255,Z[Q+1]=et>>16&255,Z[Q+2]=et>>8&255,Z[Q+3]=et&255,Q+=4,Z[Q]=V.charCodeAt(0)&255,Z[Q+1]=V.charCodeAt(1)&255,Z[Q+2]=V.charCodeAt(2)&255,Z[Q+3]=V.charCodeAt(3)&255,Q+=4,Z.set(K,Q),Q+=K.length;const at=M(Z,tt+4,Q);Z[Q]=at>>24&255,Z[Q+1]=at>>16&255,Z[Q+2]=at>>8&255,Z[Q+3]=at&255}function D(V,K,Z){let tt=1,Q=0;for(let et=K;et<Z;++et)tt=(tt+(V[et]&255))%65521,Q=(Q+tt)%65521;return Q<<16|tt}function N(V){if(!F.isNodeJS)return U(V);try{let K;parseInt(process.versions.node)>=8?K=V:K=Buffer.from(V);const Z=require("zlib").deflateSync(K,{level:9});return Z instanceof Uint8Array?Z:new Uint8Array(Z)}catch(K){(0,n.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+K)}return U(V)}function U(V){let K=V.length;const Z=65535,tt=Math.ceil(K/Z),Q=new Uint8Array(2+K+tt*5+4);let et=0;Q[et++]=120,Q[et++]=156;let at=0;for(;K>Z;)Q[et++]=0,Q[et++]=255,Q[et++]=255,Q[et++]=0,Q[et++]=0,Q.set(V.subarray(at,at+Z),et),et+=Z,at+=Z,K-=Z;Q[et++]=1,Q[et++]=K&255,Q[et++]=K>>8&255,Q[et++]=~K&65535&255,Q[et++]=(~K&65535)>>8&255,Q.set(V.subarray(at),et),et+=V.length-at;const P=D(V,0,V.length);return Q[et++]=P>>24&255,Q[et++]=P>>16&255,Q[et++]=P>>8&255,Q[et++]=P&255,Q}function X(V,K,Z,tt){const Q=V.width,et=V.height;let at,P,h;const o=V.data;switch(K){case n.ImageKind.GRAYSCALE_1BPP:P=0,at=1,h=Q+7>>3;break;case n.ImageKind.RGB_24BPP:P=2,at=8,h=Q*3;break;case n.ImageKind.RGBA_32BPP:P=6,at=8,h=Q*4;break;default:throw new Error("invalid format")}const m=new Uint8Array((1+h)*et);let t=0,i=0;for(let q=0;q<et;++q)m[t++]=0,m.set(o.subarray(i,i+h),t),i+=h,t+=h;if(K===n.ImageKind.GRAYSCALE_1BPP&&tt){t=0;for(let q=0;q<et;q++){t++;for(let B=0;B<h;B++)m[t++]^=255}}const a=new Uint8Array([Q>>24&255,Q>>16&255,Q>>8&255,Q&255,et>>24&255,et>>16&255,et>>8&255,et&255,at,P,0,0,0]),f=N(m),p=s.length+c*3+a.length+f.length,x=new Uint8Array(p);let O=0;return x.set(s,O),O+=s.length,k("IHDR",a,x,O),O+=c+a.length,k("IDATA",f,x,O),O+=c+f.length,k("IEND",new Uint8Array(0),x,O),R(x,"image/png",Z)}return function(K,Z,tt){const Q=K.kind===void 0?n.ImageKind.GRAYSCALE_1BPP:K.kind;return X(K,Q,Z,tt)}}();class l{constructor(){this.fontSizeScale=1,this.fontWeight=w.fontWeight,this.fontSize=0,this.textMatrix=n.IDENTITY_MATRIX,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=n.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=w.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(c,v){this.x=c,this.y=v}}let C=0,S=0,T=0;e.SVGGraphics=L=class{constructor(s,c,v=!1){this.svgFactory=new j.DOMSVGFactory,this.current=new l,this.transformMatrix=n.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=s,this.objs=c,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!v,this._operatorIdMapping=[];for(const M in n.OPS)this._operatorIdMapping[n.OPS[M]]=M}save(){this.transformStack.push(this.transformMatrix);const s=this.current;this.extraStack.push(s),this.current=s.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(s){this.save(),this.executeOpTree(s),this.restore()}loadDependencies(s){const c=s.fnArray,v=s.argsArray;for(let M=0,k=c.length;M<k;M++)if(c[M]===n.OPS.dependency)for(const D of v[M]){const N=D.startsWith("g_")?this.commonObjs:this.objs,U=new Promise(X=>{N.get(D,X)});this.current.dependencies.push(U)}return Promise.all(this.current.dependencies)}transform(s,c,v,M,k,D){const N=[s,c,v,M,k,D];this.transformMatrix=n.Util.transform(this.transformMatrix,N),this.tgrp=null}getSVG(s,c){this.viewport=c;const v=this._initialize(c);return this.loadDependencies(s).then(()=>(this.transformMatrix=n.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(s)),v))}convertOpList(s){const c=this._operatorIdMapping,v=s.argsArray,M=s.fnArray,k=[];for(let D=0,N=M.length;D<N;D++){const U=M[D];k.push({fnId:U,fn:c[U],args:v[D]})}return g(k)}executeOpTree(s){for(const c of s){const v=c.fn,M=c.fnId,k=c.args;switch(M|0){case n.OPS.beginText:this.beginText();break;case n.OPS.dependency:break;case n.OPS.setLeading:this.setLeading(k);break;case n.OPS.setLeadingMoveText:this.setLeadingMoveText(k[0],k[1]);break;case n.OPS.setFont:this.setFont(k);break;case n.OPS.showText:this.showText(k[0]);break;case n.OPS.showSpacedText:this.showText(k[0]);break;case n.OPS.endText:this.endText();break;case n.OPS.moveText:this.moveText(k[0],k[1]);break;case n.OPS.setCharSpacing:this.setCharSpacing(k[0]);break;case n.OPS.setWordSpacing:this.setWordSpacing(k[0]);break;case n.OPS.setHScale:this.setHScale(k[0]);break;case n.OPS.setTextMatrix:this.setTextMatrix(k[0],k[1],k[2],k[3],k[4],k[5]);break;case n.OPS.setTextRise:this.setTextRise(k[0]);break;case n.OPS.setTextRenderingMode:this.setTextRenderingMode(k[0]);break;case n.OPS.setLineWidth:this.setLineWidth(k[0]);break;case n.OPS.setLineJoin:this.setLineJoin(k[0]);break;case n.OPS.setLineCap:this.setLineCap(k[0]);break;case n.OPS.setMiterLimit:this.setMiterLimit(k[0]);break;case n.OPS.setFillRGBColor:this.setFillRGBColor(k[0],k[1],k[2]);break;case n.OPS.setStrokeRGBColor:this.setStrokeRGBColor(k[0],k[1],k[2]);break;case n.OPS.setStrokeColorN:this.setStrokeColorN(k);break;case n.OPS.setFillColorN:this.setFillColorN(k);break;case n.OPS.shadingFill:this.shadingFill(k[0]);break;case n.OPS.setDash:this.setDash(k[0],k[1]);break;case n.OPS.setRenderingIntent:this.setRenderingIntent(k[0]);break;case n.OPS.setFlatness:this.setFlatness(k[0]);break;case n.OPS.setGState:this.setGState(k[0]);break;case n.OPS.fill:this.fill();break;case n.OPS.eoFill:this.eoFill();break;case n.OPS.stroke:this.stroke();break;case n.OPS.fillStroke:this.fillStroke();break;case n.OPS.eoFillStroke:this.eoFillStroke();break;case n.OPS.clip:this.clip("nonzero");break;case n.OPS.eoClip:this.clip("evenodd");break;case n.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case n.OPS.paintImageXObject:this.paintImageXObject(k[0]);break;case n.OPS.paintInlineImageXObject:this.paintInlineImageXObject(k[0]);break;case n.OPS.paintImageMaskXObject:this.paintImageMaskXObject(k[0]);break;case n.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(k[0],k[1]);break;case n.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case n.OPS.closePath:this.closePath();break;case n.OPS.closeStroke:this.closeStroke();break;case n.OPS.closeFillStroke:this.closeFillStroke();break;case n.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case n.OPS.nextLine:this.nextLine();break;case n.OPS.transform:this.transform(k[0],k[1],k[2],k[3],k[4],k[5]);break;case n.OPS.constructPath:this.constructPath(k[0],k[1]);break;case n.OPS.endPath:this.endPath();break;case 92:this.group(c.items);break;default:(0,n.warn)(`Unimplemented operator ${v}`);break}}}setWordSpacing(s){this.current.wordSpacing=s}setCharSpacing(s){this.current.charSpacing=s}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(s,c,v,M,k,D){const N=this.current;N.textMatrix=N.lineMatrix=[s,c,v,M,k,D],N.textMatrixScale=Math.hypot(s,c),N.x=N.lineX=0,N.y=N.lineY=0,N.xcoords=[],N.ycoords=[],N.tspan=this.svgFactory.createElement("svg:tspan"),N.tspan.setAttributeNS(null,"font-family",N.fontFamily),N.tspan.setAttributeNS(null,"font-size",`${r(N.fontSize)}px`),N.tspan.setAttributeNS(null,"y",r(-N.y)),N.txtElement=this.svgFactory.createElement("svg:text"),N.txtElement.appendChild(N.tspan)}beginText(){const s=this.current;s.x=s.lineX=0,s.y=s.lineY=0,s.textMatrix=n.IDENTITY_MATRIX,s.lineMatrix=n.IDENTITY_MATRIX,s.textMatrixScale=1,s.tspan=this.svgFactory.createElement("svg:tspan"),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtgrp=this.svgFactory.createElement("svg:g"),s.xcoords=[],s.ycoords=[]}moveText(s,c){const v=this.current;v.x=v.lineX+=s,v.y=v.lineY+=c,v.xcoords=[],v.ycoords=[],v.tspan=this.svgFactory.createElement("svg:tspan"),v.tspan.setAttributeNS(null,"font-family",v.fontFamily),v.tspan.setAttributeNS(null,"font-size",`${r(v.fontSize)}px`),v.tspan.setAttributeNS(null,"y",r(-v.y))}showText(s){const c=this.current,v=c.font,M=c.fontSize;if(M===0)return;const k=c.fontSizeScale,D=c.charSpacing,N=c.wordSpacing,U=c.fontDirection,X=c.textHScale*U,V=v.vertical,K=V?1:-1,Z=v.defaultVMetrics,tt=M*c.fontMatrix[0];let Q=0;for(const P of s){if(P===null){Q+=U*N;continue}else if(typeof P=="number"){Q+=K*P*M/1e3;continue}const h=(P.isSpace?N:0)+D,o=P.fontChar;let m,t,i=P.width;if(V){let f;const p=P.vmetric||Z;f=P.vmetric?p[1]:i*.5,f=-f*tt;const x=p[2]*tt;i=p?-p[0]:i,m=f/k,t=(Q+x)/k}else m=Q/k,t=0;(P.isInFont||v.missingFile)&&(c.xcoords.push(c.x+m),V&&c.ycoords.push(-c.y+t),c.tspan.textContent+=o);let a;V?a=i*tt-h*U:a=i*tt+h*U,Q+=a}c.tspan.setAttributeNS(null,"x",c.xcoords.map(r).join(" ")),V?c.tspan.setAttributeNS(null,"y",c.ycoords.map(r).join(" ")):c.tspan.setAttributeNS(null,"y",r(-c.y)),V?c.y-=Q:c.x+=Q*X,c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${r(c.fontSize)}px`),c.fontStyle!==w.fontStyle&&c.tspan.setAttributeNS(null,"font-style",c.fontStyle),c.fontWeight!==w.fontWeight&&c.tspan.setAttributeNS(null,"font-weight",c.fontWeight);const et=c.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;if(et===n.TextRenderingMode.FILL||et===n.TextRenderingMode.FILL_STROKE?(c.fillColor!==w.fillColor&&c.tspan.setAttributeNS(null,"fill",c.fillColor),c.fillAlpha<1&&c.tspan.setAttributeNS(null,"fill-opacity",c.fillAlpha)):c.textRenderingMode===n.TextRenderingMode.ADD_TO_PATH?c.tspan.setAttributeNS(null,"fill","transparent"):c.tspan.setAttributeNS(null,"fill","none"),et===n.TextRenderingMode.STROKE||et===n.TextRenderingMode.FILL_STROKE){const P=1/(c.textMatrixScale||1);this._setStrokeAttributes(c.tspan,P)}let at=c.textMatrix;c.textRise!==0&&(at=at.slice(),at[5]+=c.textRise),c.txtElement.setAttributeNS(null,"transform",`${_(at)} scale(${r(X)}, -1)`),c.txtElement.setAttributeNS(b,"xml:space","preserve"),c.txtElement.appendChild(c.tspan),c.txtgrp.appendChild(c.txtElement),this._ensureTransformGroup().appendChild(c.txtElement)}setLeadingMoveText(s,c){this.setLeading(-c),this.moveText(s,c)}addFontStyle(s){if(!s.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const c=R(s.data,s.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${s.loadedName}"; src: url(${c}); }
`}setFont(s){const c=this.current,v=this.commonObjs.get(s[0]);let M=s[1];c.font=v,this.embedFonts&&!v.missingFile&&!this.embeddedFonts[v.loadedName]&&(this.addFontStyle(v),this.embeddedFonts[v.loadedName]=v),c.fontMatrix=v.fontMatrix||n.FONT_IDENTITY_MATRIX;let k="normal";v.black?k="900":v.bold&&(k="bold");const D=v.italic?"italic":"normal";M<0?(M=-M,c.fontDirection=-1):c.fontDirection=1,c.fontSize=M,c.fontFamily=v.loadedName,c.fontWeight=k,c.fontStyle=D,c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"y",r(-c.y)),c.xcoords=[],c.ycoords=[]}endText(){var c;const s=this.current;s.textRenderingMode&n.TextRenderingMode.ADD_TO_PATH_FLAG&&((c=s.txtElement)==null?void 0:c.hasChildNodes())&&(s.element=s.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(s){s>0&&(this.current.lineWidth=s)}setLineCap(s){this.current.lineCap=y[s]}setLineJoin(s){this.current.lineJoin=E[s]}setMiterLimit(s){this.current.miterLimit=s}setStrokeAlpha(s){this.current.strokeAlpha=s}setStrokeRGBColor(s,c,v){this.current.strokeColor=n.Util.makeHexColor(s,c,v)}setFillAlpha(s){this.current.fillAlpha=s}setFillRGBColor(s,c,v){this.current.fillColor=n.Util.makeHexColor(s,c,v),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(s){this.current.strokeColor=this._makeColorN_Pattern(s)}setFillColorN(s){this.current.fillColor=this._makeColorN_Pattern(s)}shadingFill(s){const c=this.viewport.width,v=this.viewport.height,M=n.Util.inverseTransform(this.transformMatrix),k=n.Util.applyTransform([0,0],M),D=n.Util.applyTransform([0,v],M),N=n.Util.applyTransform([c,0],M),U=n.Util.applyTransform([c,v],M),X=Math.min(k[0],D[0],N[0],U[0]),V=Math.min(k[1],D[1],N[1],U[1]),K=Math.max(k[0],D[0],N[0],U[0]),Z=Math.max(k[1],D[1],N[1],U[1]),tt=this.svgFactory.createElement("svg:rect");tt.setAttributeNS(null,"x",X),tt.setAttributeNS(null,"y",V),tt.setAttributeNS(null,"width",K-X),tt.setAttributeNS(null,"height",Z-V),tt.setAttributeNS(null,"fill",this._makeShadingPattern(s)),this.current.fillAlpha<1&&tt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(tt)}_makeColorN_Pattern(s){return s[0]==="TilingPattern"?this._makeTilingPattern(s):this._makeShadingPattern(s)}_makeTilingPattern(s){const c=s[1],v=s[2],M=s[3]||n.IDENTITY_MATRIX,[k,D,N,U]=s[4],X=s[5],V=s[6],K=s[7],Z=`shading${T++}`,[tt,Q,et,at]=n.Util.normalizeRect([...n.Util.applyTransform([k,D],M),...n.Util.applyTransform([N,U],M)]),[P,h]=n.Util.singularValueDecompose2dScale(M),o=X*P,m=V*h,t=this.svgFactory.createElement("svg:pattern");t.setAttributeNS(null,"id",Z),t.setAttributeNS(null,"patternUnits","userSpaceOnUse"),t.setAttributeNS(null,"width",o),t.setAttributeNS(null,"height",m),t.setAttributeNS(null,"x",`${tt}`),t.setAttributeNS(null,"y",`${Q}`);const i=this.svg,a=this.transformMatrix,f=this.current.fillColor,p=this.current.strokeColor,x=this.svgFactory.create(et-tt,at-Q);if(this.svg=x,this.transformMatrix=M,K===2){const O=n.Util.makeHexColor(...c);this.current.fillColor=O,this.current.strokeColor=O}return this.executeOpTree(this.convertOpList(v)),this.svg=i,this.transformMatrix=a,this.current.fillColor=f,this.current.strokeColor=p,t.appendChild(x.childNodes[0]),this.defs.appendChild(t),`url(#${Z})`}_makeShadingPattern(s){switch(typeof s=="string"&&(s=this.objs.get(s)),s[0]){case"RadialAxial":const c=`shading${T++}`,v=s[3];let M;switch(s[1]){case"axial":const k=s[4],D=s[5];M=this.svgFactory.createElement("svg:linearGradient"),M.setAttributeNS(null,"id",c),M.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),M.setAttributeNS(null,"x1",k[0]),M.setAttributeNS(null,"y1",k[1]),M.setAttributeNS(null,"x2",D[0]),M.setAttributeNS(null,"y2",D[1]);break;case"radial":const N=s[4],U=s[5],X=s[6],V=s[7];M=this.svgFactory.createElement("svg:radialGradient"),M.setAttributeNS(null,"id",c),M.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),M.setAttributeNS(null,"cx",U[0]),M.setAttributeNS(null,"cy",U[1]),M.setAttributeNS(null,"r",V),M.setAttributeNS(null,"fx",N[0]),M.setAttributeNS(null,"fy",N[1]),M.setAttributeNS(null,"fr",X);break;default:throw new Error(`Unknown RadialAxial type: ${s[1]}`)}for(const k of v){const D=this.svgFactory.createElement("svg:stop");D.setAttributeNS(null,"offset",k[0]),D.setAttributeNS(null,"stop-color",k[1]),M.appendChild(D)}return this.defs.appendChild(M),`url(#${c})`;case"Mesh":return(0,n.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${s[0]}`)}}setDash(s,c){this.current.dashArray=s,this.current.dashPhase=c}constructPath(s,c){const v=this.current;let M=v.x,k=v.y,D=[],N=0;for(const U of s)switch(U|0){case n.OPS.rectangle:M=c[N++],k=c[N++];const X=c[N++],V=c[N++],K=M+X,Z=k+V;D.push("M",r(M),r(k),"L",r(K),r(k),"L",r(K),r(Z),"L",r(M),r(Z),"Z");break;case n.OPS.moveTo:M=c[N++],k=c[N++],D.push("M",r(M),r(k));break;case n.OPS.lineTo:M=c[N++],k=c[N++],D.push("L",r(M),r(k));break;case n.OPS.curveTo:M=c[N+4],k=c[N+5],D.push("C",r(c[N]),r(c[N+1]),r(c[N+2]),r(c[N+3]),r(M),r(k)),N+=6;break;case n.OPS.curveTo2:D.push("C",r(M),r(k),r(c[N]),r(c[N+1]),r(c[N+2]),r(c[N+3])),M=c[N+2],k=c[N+3],N+=4;break;case n.OPS.curveTo3:M=c[N+2],k=c[N+3],D.push("C",r(c[N]),r(c[N+1]),r(M),r(k),r(M),r(k)),N+=4;break;case n.OPS.closePath:D.push("Z");break}D=D.join(" "),v.path&&s.length>0&&s[0]!==n.OPS.rectangle&&s[0]!==n.OPS.moveTo?D=v.path.getAttributeNS(null,"d")+D:(v.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(v.path)),v.path.setAttributeNS(null,"d",D),v.path.setAttributeNS(null,"fill","none"),v.element=v.path,v.setCurrentPoint(M,k)}endPath(){const s=this.current;if(s.path=null,!this.pendingClip)return;if(!s.element){this.pendingClip=null;return}const c=`clippath${C++}`,v=this.svgFactory.createElement("svg:clipPath");v.setAttributeNS(null,"id",c),v.setAttributeNS(null,"transform",_(this.transformMatrix));const M=s.element.cloneNode(!0);if(this.pendingClip==="evenodd"?M.setAttributeNS(null,"clip-rule","evenodd"):M.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,v.appendChild(M),this.defs.appendChild(v),s.activeClipUrl){s.clipGroup=null;for(const k of this.extraStack)k.clipGroup=null;v.setAttributeNS(null,"clip-path",s.activeClipUrl)}s.activeClipUrl=`url(#${c})`,this.tgrp=null}clip(s){this.pendingClip=s}closePath(){const s=this.current;if(s.path){const c=`${s.path.getAttributeNS(null,"d")}Z`;s.path.setAttributeNS(null,"d",c)}}setLeading(s){this.current.leading=-s}setTextRise(s){this.current.textRise=s}setTextRenderingMode(s){this.current.textRenderingMode=s}setHScale(s){this.current.textHScale=s/100}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[c,v]of s)switch(c){case"LW":this.setLineWidth(v);break;case"LC":this.setLineCap(v);break;case"LJ":this.setLineJoin(v);break;case"ML":this.setMiterLimit(v);break;case"D":this.setDash(v[0],v[1]);break;case"RI":this.setRenderingIntent(v);break;case"FL":this.setFlatness(v);break;case"Font":this.setFont(v);break;case"CA":this.setStrokeAlpha(v);break;case"ca":this.setFillAlpha(v);break;default:(0,n.warn)(`Unimplemented graphic state operator ${c}`);break}}fill(){const s=this.current;s.element&&(s.element.setAttributeNS(null,"fill",s.fillColor),s.element.setAttributeNS(null,"fill-opacity",s.fillAlpha),this.endPath())}stroke(){const s=this.current;s.element&&(this._setStrokeAttributes(s.element),s.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(s,c=1){const v=this.current;let M=v.dashArray;c!==1&&M.length>0&&(M=M.map(function(k){return c*k})),s.setAttributeNS(null,"stroke",v.strokeColor),s.setAttributeNS(null,"stroke-opacity",v.strokeAlpha),s.setAttributeNS(null,"stroke-miterlimit",r(v.miterLimit)),s.setAttributeNS(null,"stroke-linecap",v.lineCap),s.setAttributeNS(null,"stroke-linejoin",v.lineJoin),s.setAttributeNS(null,"stroke-width",r(c*v.lineWidth)+"px"),s.setAttributeNS(null,"stroke-dasharray",M.map(r).join(" ")),s.setAttributeNS(null,"stroke-dashoffset",r(c*v.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width","1px"),s.setAttributeNS(null,"height","1px"),s.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(s)}paintImageXObject(s){const c=s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s);if(!c){(0,n.warn)(`Dependent image with object ID ${s} is not ready yet`);return}this.paintInlineImageXObject(c)}paintInlineImageXObject(s,c){const v=s.width,M=s.height,k=A(s,this.forceDataSchema,!!c),D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y","0"),D.setAttributeNS(null,"width",r(v)),D.setAttributeNS(null,"height",r(M)),this.current.element=D,this.clip("nonzero");const N=this.svgFactory.createElement("svg:image");N.setAttributeNS(d,"xlink:href",k),N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y",r(-M)),N.setAttributeNS(null,"width",r(v)+"px"),N.setAttributeNS(null,"height",r(M)+"px"),N.setAttributeNS(null,"transform",`scale(${r(1/v)} ${r(-1/M)})`),c?c.appendChild(N):this._ensureTransformGroup().appendChild(N)}paintImageMaskXObject(s){const c=this.current,v=s.width,M=s.height,k=c.fillColor;c.maskId=`mask${S++}`;const D=this.svgFactory.createElement("svg:mask");D.setAttributeNS(null,"id",c.maskId);const N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",r(v)),N.setAttributeNS(null,"height",r(M)),N.setAttributeNS(null,"fill",k),N.setAttributeNS(null,"mask",`url(#${c.maskId})`),this.defs.appendChild(D),this._ensureTransformGroup().appendChild(N),this.paintInlineImageXObject(s,D)}paintFormXObjectBegin(s,c){if(Array.isArray(s)&&s.length===6&&this.transform(s[0],s[1],s[2],s[3],s[4],s[5]),c){const v=c[2]-c[0],M=c[3]-c[1],k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x",c[0]),k.setAttributeNS(null,"y",c[1]),k.setAttributeNS(null,"width",r(v)),k.setAttributeNS(null,"height",r(M)),this.current.element=k,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(s){const c=this.svgFactory.create(s.width,s.height),v=this.svgFactory.createElement("svg:defs");c.appendChild(v),this.defs=v;const M=this.svgFactory.createElement("svg:g");return M.setAttributeNS(null,"transform",_(s.transform)),c.appendChild(M),this.svg=M,c}_ensureClipGroup(){if(!this.current.clipGroup){const s=this.svgFactory.createElement("svg:g");s.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(s),this.current.clipGroup=s}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",_(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=u(1),j=u(26);const F=require$$4,L=require$$4,w=require$$4,b=require$$4,d=/^file:\/\/\/[a-zA-Z]:\//;function y(S){const T=b.parse(S);return T.protocol==="file:"||T.host?T:/^[a-z]:[/\\]/i.test(S)?b.parse(`file:///${S}`):(T.host||(T.protocol="file:"),T)}class E{constructor(T){this.source=T,this.url=y(T.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&T.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var T,s;return(s=(T=this._fullRequestReader)==null?void 0:T._loaded)!=null?s:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new _(this):new g(this),this._fullRequestReader}getRangeReader(T,s){if(s<=this._progressiveDataLength)return null;const c=this.isFsUrl?new C(this,T,s):new r(this,T,s);return this._rangeRequestReaders.push(c),c}cancelAllRequests(T){this._fullRequestReader&&this._fullRequestReader.cancel(T);for(const s of this._rangeRequestReaders.slice(0))s.cancel(T)}}e.PDFNodeStream=E;class R{constructor(T){this._url=T.url,this._done=!1,this._storedError=null,this.onProgress=null;const s=T.source;this._contentLength=s.length,this._loaded=0,this._filename=null,this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const T=this._readableStream.read();return T===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=T.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(T).buffer,done:!1})}cancel(T){if(!this._readableStream){this._error(T);return}this._readableStream.destroy(T)}_error(T){this._storedError=T,this._readCapability.resolve()}_setReadableStream(T){this._readableStream=T,T.on("readable",()=>{this._readCapability.resolve()}),T.on("end",()=>{T.destroy(),this._done=!0,this._readCapability.resolve()}),T.on("error",s=>{this._error(s)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class A{constructor(T){this._url=T.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)();const s=T.source;this._isStreamingSupported=!s.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const T=this._readableStream.read();return T===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=T.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(T).buffer,done:!1})}cancel(T){if(!this._readableStream){this._error(T);return}this._readableStream.destroy(T)}_error(T){this._storedError=T,this._readCapability.resolve()}_setReadableStream(T){this._readableStream=T,T.on("readable",()=>{this._readCapability.resolve()}),T.on("end",()=>{T.destroy(),this._done=!0,this._readCapability.resolve()}),T.on("error",s=>{this._error(s)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(S,T){return{protocol:S.protocol,auth:S.auth,host:S.hostname,port:S.port,path:S.path,method:"GET",headers:T}}class g extends R{constructor(T){super(T);const s=c=>{if(c.statusCode===404){const D=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=D,this._headersCapability.reject(D);return}this._headersCapability.resolve(),this._setReadableStream(c);const v=D=>this._readableStream.headers[D.toLowerCase()],{allowRangeRequests:M,suggestedLength:k}=(0,j.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:T.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=M,this._contentLength=k||this._contentLength,this._filename=(0,j.extractFilenameFromHeader)(v)};this._request=null,this._url.protocol==="http:"?this._request=L.request(l(this._url,T.httpHeaders),s):this._request=w.request(l(this._url,T.httpHeaders),s),this._request.on("error",c=>{this._storedError=c,this._headersCapability.reject(c)}),this._request.end()}}class r extends A{constructor(T,s,c){super(T),this._httpHeaders={};for(const M in T.httpHeaders){const k=T.httpHeaders[M];typeof k!="undefined"&&(this._httpHeaders[M]=k)}this._httpHeaders.Range=`bytes=${s}-${c-1}`;const v=M=>{if(M.statusCode===404){const k=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=k;return}this._setReadableStream(M)};this._request=null,this._url.protocol==="http:"?this._request=L.request(l(this._url,this._httpHeaders),v):this._request=w.request(l(this._url,this._httpHeaders),v),this._request.on("error",M=>{this._storedError=M}),this._request.end()}}class _ extends R{constructor(T){super(T);let s=decodeURIComponent(this._url.path);d.test(this._url.href)&&(s=s.replace(/^\//,"")),F.lstat(s,(c,v)=>{if(c){c.code==="ENOENT"&&(c=new n.MissingPDFException(`Missing PDF "${s}".`)),this._storedError=c,this._headersCapability.reject(c);return}this._contentLength=v.size,this._setReadableStream(F.createReadStream(s)),this._headersCapability.resolve()})}}class C extends A{constructor(T,s,c){super(T);let v=decodeURIComponent(this._url.path);d.test(this._url.href)&&(v=v.replace(/^\//,"")),this._setReadableStream(F.createReadStream(v,{start:s,end:c-1}))}}},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=b,e.extractFilenameFromHeader=w,e.validateRangeRequestCapabilities=L,e.validateResponseStatus=d;var n=u(1),j=u(27),F=u(5);function L({getResponseHeader:y,isHttp:E,rangeChunkSize:R,disableRange:A}){const l={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(y("Content-Length"),10);return!Number.isInteger(g)||(l.suggestedLength=g,g<=2*R)||A||!E||y("Accept-Ranges")!=="bytes"||(y("Content-Encoding")||"identity")!=="identity"||(l.allowRangeRequests=!0),l}function w(y){const E=y("Content-Disposition");if(E){let R=(0,j.getFilenameFromContentDispositionHeader)(E);if(R.includes("%"))try{R=decodeURIComponent(R)}catch{}if((0,F.isPdfFile)(R))return R}return null}function b(y,E){return y===404||y===0&&E.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+E+'".'):new n.UnexpectedResponseException(`Unexpected server response (${y}) while retrieving PDF "${E}".`,y)}function d(y){return y===200||y===206}},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=j;var n=u(1);function j(F){let L=!0,w=b("filename\\*","i").exec(F);if(w){w=w[1];let g=R(w);return g=unescape(g),g=A(g),g=l(g),y(g)}if(w=E(F),w){const g=l(w);return y(g)}if(w=b("filename","i").exec(F),w){w=w[1];let g=R(w);return g=l(g),y(g)}function b(g,r){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',r)}function d(g,r){if(g){if(!/^[\x00-\xFF]+$/.test(r))return r;try{const _=new TextDecoder(g,{fatal:!0}),C=(0,n.stringToBytes)(r);r=_.decode(C),L=!1}catch{}}return r}function y(g){return L&&/[\x80-\xff]/.test(g)&&(g=d("utf-8",g),L&&(g=d("iso-8859-1",g))),g}function E(g){const r=[];let _;const C=b("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_=C.exec(g))!==null;){let[,T,s,c]=_;if(T=parseInt(T,10),T in r){if(T===0)break;continue}r[T]=[s,c]}const S=[];for(let T=0;T<r.length&&T in r;++T){let[s,c]=r[T];c=R(c),s&&(c=unescape(c),T===0&&(c=A(c))),S.push(c)}return S.join("")}function R(g){if(g.startsWith('"')){const r=g.slice(1).split('\\"');for(let _=0;_<r.length;++_){const C=r[_].indexOf('"');C!==-1&&(r[_]=r[_].slice(0,C),r.length=_+1),r[_]=r[_].replace(/\\(.)/g,"$1")}g=r.join('"')}return g}function A(g){const r=g.indexOf("'");if(r===-1)return g;const _=g.slice(0,r),S=g.slice(r+1).replace(/^[^']*'/,"");return d(_,S)}function l(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(r,_,C,S){if(C==="q"||C==="Q")return S=S.replace(/_/g," "),S=S.replace(/=([0-9a-fA-F]{2})/g,function(T,s){return String.fromCharCode(parseInt(s,16))}),d(_,S);try{S=atob(S)}catch{}return d(_,S)})}return""}},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=u(1),j=u(26);const F=200,L=206;function w(R){const A=R.response;return typeof A!="string"?A:(0,n.stringToBytes)(A).buffer}class b{constructor(A,l={}){this.url=A,this.isHttp=/^https?:/i.test(A),this.httpHeaders=this.isHttp&&l.httpHeaders||Object.create(null),this.withCredentials=l.withCredentials||!1,this.getXhr=l.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(A,l,g){const r={begin:A,end:l};for(const _ in g)r[_]=g[_];return this.request(r)}requestFull(A){return this.request(A)}request(A){const l=this.getXhr(),g=this.currXhrId++,r=this.pendingRequests[g]={xhr:l};l.open("GET",this.url),l.withCredentials=this.withCredentials;for(const _ in this.httpHeaders){const C=this.httpHeaders[_];typeof C!="undefined"&&l.setRequestHeader(_,C)}return this.isHttp&&"begin"in A&&"end"in A?(l.setRequestHeader("Range",`bytes=${A.begin}-${A.end-1}`),r.expectedStatus=L):r.expectedStatus=F,l.responseType="arraybuffer",A.onError&&(l.onerror=function(_){A.onError(l.status)}),l.onreadystatechange=this.onStateChange.bind(this,g),l.onprogress=this.onProgress.bind(this,g),r.onHeadersReceived=A.onHeadersReceived,r.onDone=A.onDone,r.onError=A.onError,r.onProgress=A.onProgress,l.send(null),g}onProgress(A,l){var r;const g=this.pendingRequests[A];!g||(r=g.onProgress)==null||r.call(g,l)}onStateChange(A,l){var T,s,c;const g=this.pendingRequests[A];if(!g)return;const r=g.xhr;if(r.readyState>=2&&g.onHeadersReceived&&(g.onHeadersReceived(),delete g.onHeadersReceived),r.readyState!==4||!(A in this.pendingRequests))return;if(delete this.pendingRequests[A],r.status===0&&this.isHttp){(T=g.onError)==null||T.call(g,r.status);return}const _=r.status||F;if(!(_===F&&g.expectedStatus===L)&&_!==g.expectedStatus){(s=g.onError)==null||s.call(g,r.status);return}const S=w(r);if(_===L){const v=r.getResponseHeader("Content-Range"),M=/bytes (\d+)-(\d+)\/(\d+)/.exec(v);g.onDone({begin:parseInt(M[1],10),chunk:S})}else S?g.onDone({begin:0,chunk:S}):(c=g.onError)==null||c.call(g,r.status)}getRequestXhr(A){return this.pendingRequests[A].xhr}isPendingRequest(A){return A in this.pendingRequests}abortRequest(A){const l=this.pendingRequests[A].xhr;delete this.pendingRequests[A],l.abort()}}class d{constructor(A){this._source=A,this._manager=new b(A.url,{httpHeaders:A.httpHeaders,withCredentials:A.withCredentials}),this._rangeChunkSize=A.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(A){const l=this._rangeRequestReaders.indexOf(A);l>=0&&this._rangeRequestReaders.splice(l,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new y(this._manager,this._source),this._fullRequestReader}getRangeReader(A,l){const g=new E(this._manager,A,l);return g.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(g),g}cancelAllRequests(A){var l;(l=this._fullRequestReader)==null||l.cancel(A);for(const g of this._rangeRequestReaders.slice(0))g.cancel(A)}}e.PDFNetworkStream=d;class y{constructor(A,l){this._manager=A;const g={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=l.url,this._fullRequestId=A.requestFull(g),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=l.disableRange||!1,this._contentLength=l.length,this._rangeChunkSize=l.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const A=this._fullRequestId,l=this._manager.getRequestXhr(A),g=C=>l.getResponseHeader(C),{allowRangeRequests:r,suggestedLength:_}=(0,j.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=_||this._contentLength,this._filename=(0,j.extractFilenameFromHeader)(g),this._isRangeSupported&&this._manager.abortRequest(A),this._headersReceivedCapability.resolve()}_onDone(A){if(A&&(this._requests.length>0?this._requests.shift().resolve({value:A.chunk,done:!1}):this._cachedChunks.push(A.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(A){this._storedError=(0,j.createResponseStatusError)(A,this._url),this._headersReceivedCapability.reject(this._storedError);for(const l of this._requests)l.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(A){var l;(l=this.onProgress)==null||l.call(this,{loaded:A.loaded,total:A.lengthComputable?A.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const A=(0,n.createPromiseCapability)();return this._requests.push(A),A.promise}cancel(A){this._done=!0,this._headersReceivedCapability.reject(A);for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class E{constructor(A,l,g){this._manager=A;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._requestId=A.requestRange(l,g,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var A;(A=this.onClosed)==null||A.call(this,this)}_onDone(A){const l=A.chunk;this._requests.length>0?this._requests.shift().resolve({value:l,done:!1}):this._queuedChunk=l,this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(A){this._storedError=(0,j.createResponseStatusError)(A,this._url);for(const l of this._requests)l.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(A){var l;this.isStreamingSupported||(l=this.onProgress)==null||l.call(this,{loaded:A.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const A=(0,n.createPromiseCapability)();return this._requests.push(A),A.promise}cancel(A){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(I,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=u(1),j=u(26);function F(y,E,R){return{method:"GET",headers:y,signal:R==null?void 0:R.signal,mode:"cors",credentials:E?"include":"same-origin",redirect:"follow"}}function L(y){const E=new Headers;for(const R in y){const A=y[R];typeof A!="undefined"&&E.append(R,A)}return E}class w{constructor(E){this.source=E,this.isHttp=/^https?:/i.test(E.url),this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var E,R;return(R=(E=this._fullRequestReader)==null?void 0:E._loaded)!=null?R:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b(this),this._fullRequestReader}getRangeReader(E,R){if(R<=this._progressiveDataLength)return null;const A=new d(this,E,R);return this._rangeRequestReaders.push(A),A}cancelAllRequests(E){this._fullRequestReader&&this._fullRequestReader.cancel(E);for(const R of this._rangeRequestReaders.slice(0))R.cancel(E)}}e.PDFFetchStream=w;class b{constructor(E){this._stream=E,this._reader=null,this._loaded=0,this._filename=null;const R=E.source;this._withCredentials=R.withCredentials||!1,this._contentLength=R.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=R.disableRange||!1,this._rangeChunkSize=R.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!R.disableStream,this._isRangeSupported=!R.disableRange,this._headers=L(this._stream.httpHeaders);const A=R.url;fetch(A,F(this._headers,this._withCredentials,this._abortController)).then(l=>{if(!(0,j.validateResponseStatus)(l.status))throw(0,j.createResponseStatusError)(l.status,A);this._reader=l.body.getReader(),this._headersCapability.resolve();const g=C=>l.headers.get(C),{allowRangeRequests:r,suggestedLength:_}=(0,j.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=_||this._contentLength,this._filename=(0,j.extractFilenameFromHeader)(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:E,done:R}=await this._reader.read();return R?{value:E,done:R}:(this._loaded+=E.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){this._reader&&this._reader.cancel(E),this._abortController&&this._abortController.abort()}}class d{constructor(E,R,A){this._stream=E,this._reader=null,this._loaded=0;const l=E.source;this._withCredentials=l.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!l.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=L(this._stream.httpHeaders),this._headers.append("Range",`bytes=${R}-${A-1}`);const g=l.url;fetch(g,F(this._headers,this._withCredentials,this._abortController)).then(r=>{if(!(0,j.validateResponseStatus)(r.status))throw(0,j.createResponseStatusError)(r.status,g);this._readCapability.resolve(),this._reader=r.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:E,done:R}=await this._reader.read();return R?{value:E,done:R}:(this._loaded+=E.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){this._reader&&this._reader.cancel(E),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(I){var e=__webpack_module_cache__[I];if(e!==void 0)return e.exports;var u=__webpack_module_cache__[I]={exports:{}};return __webpack_modules__[I](u,u.exports,__w_pdfjs_require__),u.exports}var __webpack_exports__={};return(()=>{var I=__webpack_exports__;Object.defineProperty(I,"__esModule",{value:!0}),Object.defineProperty(I,"AnnotationLayer",{enumerable:!0,get:function(){return j.AnnotationLayer}}),Object.defineProperty(I,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(I,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(I,"GlobalWorkerOptions",{enumerable:!0,get:function(){return F.GlobalWorkerOptions}}),Object.defineProperty(I,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(I,"LoopbackPort",{enumerable:!0,get:function(){return u.LoopbackPort}}),Object.defineProperty(I,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(I,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(I,"PDFDataRangeTransport",{enumerable:!0,get:function(){return u.PDFDataRangeTransport}}),Object.defineProperty(I,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(I,"PDFWorker",{enumerable:!0,get:function(){return u.PDFWorker}}),Object.defineProperty(I,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(I,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(I,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(I,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(I,"SVGGraphics",{enumerable:!0,get:function(){return b.SVGGraphics}}),Object.defineProperty(I,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(I,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(I,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(I,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(I,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}}),Object.defineProperty(I,"build",{enumerable:!0,get:function(){return u.build}}),Object.defineProperty(I,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(I,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(I,"getDocument",{enumerable:!0,get:function(){return u.getDocument}}),Object.defineProperty(I,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(I,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(I,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(I,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(I,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(I,"renderTextLayer",{enumerable:!0,get:function(){return w.renderTextLayer}}),Object.defineProperty(I,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(I,"version",{enumerable:!0,get:function(){return u.version}});var e=__w_pdfjs_require__(1),u=__w_pdfjs_require__(4),n=__w_pdfjs_require__(5),j=__w_pdfjs_require__(20),F=__w_pdfjs_require__(13),L=__w_pdfjs_require__(3),w=__w_pdfjs_require__(23),b=__w_pdfjs_require__(24),d=__w_pdfjs_require__(22);if(L.isNodeJS){const{PDFNodeStream:y}=__w_pdfjs_require__(25);(0,u.setPDFNetworkStreamFactory)(E=>new y(E))}else{const{PDFNetworkStream:y}=__w_pdfjs_require__(28),{PDFFetchStream:E}=__w_pdfjs_require__(29);(0,u.setPDFNetworkStreamFactory)(R=>(0,n.isValidFetchUrl)(R.url)?new E(R):new y(R))}})(),__webpack_exports__})())})(pdf);var workerSrc="/_app/assets/pdf.worker.min-4ac4c8ea.js",FileSaver_min={exports:{}};(function(I,e){(function(u,n){n()})(commonjsGlobal,function(){function u(d,y){return typeof y=="undefined"?y={autoBom:!1}:typeof y!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),y={autoBom:!y}),y.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function n(d,y,E){var R=new XMLHttpRequest;R.open("GET",d),R.responseType="blob",R.onload=function(){b(R.response,y,E)},R.onerror=function(){console.error("could not download file")},R.send()}function j(d){var y=new XMLHttpRequest;y.open("HEAD",d,!1);try{y.send()}catch{}return 200<=y.status&&299>=y.status}function F(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(y)}}var L=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,w=L.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=L.saveAs||(typeof window!="object"||window!==L?function(){}:"download"in HTMLAnchorElement.prototype&&!w?function(d,y,E){var R=L.URL||L.webkitURL,A=document.createElement("a");y=y||d.name||"download",A.download=y,A.rel="noopener",typeof d=="string"?(A.href=d,A.origin===location.origin?F(A):j(A.href)?n(d,y,E):F(A,A.target="_blank")):(A.href=R.createObjectURL(d),setTimeout(function(){R.revokeObjectURL(A.href)},4e4),setTimeout(function(){F(A)},0))}:"msSaveOrOpenBlob"in navigator?function(d,y,E){if(y=y||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(u(d,E),y);else if(j(d))n(d,y,E);else{var R=document.createElement("a");R.href=d,R.target="_blank",setTimeout(function(){F(R)})}}:function(d,y,E,R){if(R=R||open("","_blank"),R&&(R.document.title=R.document.body.innerText="downloading..."),typeof d=="string")return n(d,y,E);var A=d.type==="application/octet-stream",l=/constructor/i.test(L.HTMLElement)||L.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||A&&l||w)&&typeof FileReader!="undefined"){var r=new FileReader;r.onloadend=function(){var S=r.result;S=g?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),R?R.location.href=S:location=S,R=null},r.readAsDataURL(d)}else{var _=L.URL||L.webkitURL,C=_.createObjectURL(d);R?R.location=C:location.href=C,R=null,setTimeout(function(){_.revokeObjectURL(C)},4e4)}});L.saveAs=b.saveAs=b,I.exports=b})})(FileSaver_min);var FileSaver=FileSaver_min.exports;const onPrint=I=>{let e;e||(e=document.createElement("iframe"),document.body.appendChild(e),e.style.display="none",e.onload=function(){setTimeout(function(){e.focus(),e.contentWindow.print()},1)}),e.src=I},calcRT=I=>{let u=I.split(" ").length;if(u>0)return Math.ceil(u/200)},getPageText=(I,e)=>new Promise(function(u,n){e.getPage(I).then(function(j){j.getTextContent().then(function(F){for(var L=F.items,w="",b=0;b<L.length;b++){var d=L[b];w+=d.str+" "}u(w)})})});function cubicOut(I){const e=I-1;return e*e*e+1}function scale(I,{delay:e=0,duration:u=400,easing:n=cubicOut,start:j=0,opacity:F=0}={}){const L=getComputedStyle(I),w=+L.opacity,b=L.transform==="none"?"":L.transform,d=1-j,y=w*(1-F);return{delay:e,duration:u,easing:n,css:(E,R)=>`
			transform: ${b} scale(${1-d*R});
			opacity: ${w-y*R}
		`}}class ClassBuilder{constructor(e,u){this.defaults=typeof e=="function"?e(u):e,this.classes=this.defaults}flush(){return this.classes=this.defaults,this}extend(...e){return this}get(){return this.classes}replace(e,u=!0){return u&&e&&(this.classes=Object.keys(e).reduce((n,j)=>n.replace(new RegExp(j,"g"),e[j]),this.classes)),this}remove(e,u=!0){return u&&e&&(this.classes=e.split(" ").reduce((n,j)=>n.replace(new RegExp(j,"g"),""),this.classes)),this}add(e,u=!0,n){if(!u||!e)return this;switch(typeof e){case"string":default:return this.classes+=` ${e} `,this;case"function":return this.classes+=` ${e(n||this.classes)} `,this}}}var Tooltip_svelte_svelte_type_style_lang="";const get_activator_slot_changes=I=>({}),get_activator_slot_context=I=>({});function create_if_block$1(I){let e,u,n,j,F;const L=I[8].default,w=create_slot(L,I,I[7],null);return{c(){e=element("div"),w&&w.c(),this.h()},l(b){e=claim_element(b,"DIV",{class:!0});var d=children(e);w&&w.l(d),d.forEach(detach),this.h()},h(){attr(e,"class",u=null_to_empty(I[1])+" svelte-1sbj3n6")},m(b,d){insert_hydration(b,e,d),w&&w.m(e,null),F=!0},p(b,d){w&&w.p&&(!F||d&128)&&update_slot_base(w,L,b,b[7],F?get_slot_changes(L,b[7],d,null):get_all_dirty_from_scope(b[7]),null),(!F||d&2&&u!==(u=null_to_empty(b[1])+" svelte-1sbj3n6"))&&attr(e,"class",u)},i(b){F||(transition_in(w,b),add_render_callback(()=>{j&&j.end(1),n=create_in_transition(e,scale,{duration:150}),n.start()}),F=!0)},o(b){transition_out(w,b),n&&n.invalidate(),j=create_out_transition(e,scale,{duration:150,delay:100}),F=!1},d(b){b&&detach(e),w&&w.d(b),b&&j&&j.end()}}}function create_fragment$1(I){let e,u,n,j,F,L;const w=I[8].activator,b=create_slot(w,I,I[7],get_activator_slot_context);let d=I[0]&&create_if_block$1(I);return{c(){e=element("div"),u=element("div"),b&&b.c(),n=space(),d&&d.c(),this.h()},l(y){e=claim_element(y,"DIV",{class:!0});var E=children(e);u=claim_element(E,"DIV",{});var R=children(u);b&&b.l(R),R.forEach(detach),n=claim_space(E),d&&d.l(E),E.forEach(detach),this.h()},h(){attr(e,"class","activator svelte-1sbj3n6")},m(y,E){insert_hydration(y,e,E),append_hydration(e,u),b&&b.m(u,null),append_hydration(e,n),d&&d.m(e,null),j=!0,F||(L=[listen(u,"mouseenter",debounce(I[2],100)),listen(u,"mouseleave",debounce(I[3],500)),listen(u,"mouseenter",I[9]),listen(u,"mouseleave",I[10]),listen(u,"focus",I[11]),listen(u,"blur",I[12])],F=!0)},p(y,[E]){b&&b.p&&(!j||E&128)&&update_slot_base(b,w,y,y[7],j?get_slot_changes(w,y[7],E,get_activator_slot_changes):get_all_dirty_from_scope(y[7]),get_activator_slot_context),y[0]?d?(d.p(y,E),E&1&&transition_in(d,1)):(d=create_if_block$1(y),d.c(),transition_in(d,1),d.m(e,null)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros())},i(y){j||(transition_in(b,y),transition_in(d),j=!0)},o(y){transition_out(b,y),transition_out(d),j=!1},d(y){y&&detach(e),b&&b.d(y),d&&d.d(),F=!1,run_all(L)}}}const classesDefault="tooltip";function debounce(I,e,u){let n;return function(){let j=this,F=arguments,L=function(){n=null,u||I.apply(j,F)},w=u&&!n;clearTimeout(n),n=setTimeout(L,e),w&&I.apply(j,F)}}function instance$1(I,e,u){let n,{$$slots:j={},$$scope:F}=e,{class:L=""}=e,{classes:w=classesDefault}=e,{show:b=!1}=e,{timeout:d=null}=e;const y=new ClassBuilder(w,classesDefault);function E(){b||(u(0,b=!0),d&&u(4,d=setTimeout(()=>{u(0,b=!1)},d)))}function R(){!b||(u(0,b=!1),clearTimeout(d))}function A(_){bubble.call(this,I,_)}function l(_){bubble.call(this,I,_)}function g(_){bubble.call(this,I,_)}function r(_){bubble.call(this,I,_)}return I.$$set=_=>{"class"in _&&u(5,L=_.class),"classes"in _&&u(6,w=_.classes),"show"in _&&u(0,b=_.show),"timeout"in _&&u(4,d=_.timeout),"$$scope"in _&&u(7,F=_.$$scope)},I.$$.update=()=>{I.$$.dirty&96&&u(1,n=y.flush().add(w,!0,classesDefault).add(L).get())},[b,n,E,R,d,L,w,F,j,A,l,g,r]}class Tooltip extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{class:5,classes:6,show:0,timeout:4})}}var PdfViewer_svelte_svelte_type_style_lang="";const{window:window_1}=globals;function create_else_block_1(I){let e,u,n;return{c(){e=element("div"),u=element("canvas"),this.h()},l(j){e=claim_element(j,"DIV",{class:!0});var F=children(e);u=claim_element(F,"CANVAS",{class:!0}),children(u).forEach(detach),F.forEach(detach),this.h()},h(){attr(u,"class","svelte-m8wnul"),attr(e,"class",n=null_to_empty(I[5]===!0?"viewer":"null")+" svelte-m8wnul")},m(j,F){insert_hydration(j,e,F),append_hydration(e,u),I[43](u)},p(j,F){F[0]&32&&n!==(n=null_to_empty(j[5]===!0?"viewer":"null")+" svelte-m8wnul")&&attr(e,"class",n)},i:noop,o:noop,d(j){j&&detach(e),I[43](null)}}}function create_if_block_1(I){let e,u,n,j,F,L,w,b,d,y,E,R,A,l,g,r,_,C,S,T,s,c,v,M,k,D,N,U,X,V,K,Z,tt,Q,et,at,P,h,o,m,t,i;return n=new Tooltip({props:{$$slots:{activator:[create_activator_slot_8],default:[create_default_slot_8]},$$scope:{ctx:I}}}),F=new Tooltip({props:{$$slots:{activator:[create_activator_slot_7],default:[create_default_slot_7]},$$scope:{ctx:I}}}),w=new Tooltip({props:{$$slots:{activator:[create_activator_slot_6],default:[create_default_slot_6]},$$scope:{ctx:I}}}),d=new Tooltip({props:{$$slots:{activator:[create_activator_slot_5],default:[create_default_slot_5]},$$scope:{ctx:I}}}),E=new Tooltip({props:{$$slots:{activator:[create_activator_slot_4],default:[create_default_slot_4]},$$scope:{ctx:I}}}),A=new Tooltip({props:{$$slots:{activator:[create_activator_slot_3],default:[create_default_slot_3]},$$scope:{ctx:I}}}),g=new Tooltip({props:{$$slots:{activator:[create_activator_slot_2],default:[create_default_slot_2]},$$scope:{ctx:I}}}),_=new Tooltip({props:{$$slots:{activator:[create_activator_slot_1],default:[create_default_slot_1]},$$scope:{ctx:I}}}),S=new Tooltip({props:{$$slots:{activator:[create_activator_slot],default:[create_default_slot]},$$scope:{ctx:I}}}),{c(){e=element("div"),u=element("div"),create_component(n.$$.fragment),j=space(),create_component(F.$$.fragment),L=space(),create_component(w.$$.fragment),b=space(),create_component(d.$$.fragment),y=space(),create_component(E.$$.fragment),R=space(),create_component(A.$$.fragment),l=space(),create_component(g.$$.fragment),r=space(),create_component(_.$$.fragment),C=space(),create_component(S.$$.fragment),T=space(),s=element("span"),c=svg_element("svg"),v=svg_element("path"),M=space(),k=element("span"),D=text(I[9]),N=text(" min read"),U=space(),X=element("span"),V=svg_element("svg"),K=svg_element("path"),Z=space(),tt=element("div"),Q=text(`Page :
              `),et=element("span"),at=text(`
              /
              `),P=element("span"),h=space(),o=element("div"),m=element("canvas"),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var f=children(e);u=claim_element(f,"DIV",{class:!0});var p=children(u);claim_component(n.$$.fragment,p),j=claim_space(p),claim_component(F.$$.fragment,p),L=claim_space(p),claim_component(w.$$.fragment,p),b=claim_space(p),claim_component(d.$$.fragment,p),y=claim_space(p),claim_component(E.$$.fragment,p),R=claim_space(p),claim_component(A.$$.fragment,p),l=claim_space(p),claim_component(g.$$.fragment,p),r=claim_space(p),claim_component(_.$$.fragment,p),C=claim_space(p),claim_component(S.$$.fragment,p),T=claim_space(p),s=claim_element(p,"SPAN",{class:!0});var x=children(s);c=claim_svg_element(x,"svg",{class:!0,xmlns:!0,viewBox:!0});var O=children(c);v=claim_svg_element(O,"path",{d:!0}),children(v).forEach(detach),O.forEach(detach),M=claim_space(x),k=claim_element(x,"SPAN",{class:!0});var q=children(k);D=claim_text(q,I[9]),N=claim_text(q," min read"),q.forEach(detach),x.forEach(detach),U=claim_space(p),X=claim_element(p,"SPAN",{class:!0});var B=children(X);V=claim_svg_element(B,"svg",{class:!0,xmlns:!0,viewBox:!0});var z=children(V);K=claim_svg_element(z,"path",{d:!0}),children(K).forEach(detach),z.forEach(detach),Z=claim_space(B),tt=claim_element(B,"DIV",{class:!0});var W=children(tt);Q=claim_text(W,`Page :
              `),et=claim_element(W,"SPAN",{}),children(et).forEach(detach),at=claim_text(W,`
              /
              `),P=claim_element(W,"SPAN",{}),children(P).forEach(detach),W.forEach(detach),B.forEach(detach),p.forEach(detach),h=claim_space(f),o=claim_element(f,"DIV",{class:!0});var $=children(o);m=claim_element($,"CANVAS",{width:!0,height:!0,class:!0}),children(m).forEach(detach),$.forEach(detach),f.forEach(detach),this.h()},h(){attr(v,"d",`M16.32 7.1A8 8 0 1 1 9 4.06V2h2v2.06c1.46.18 2.8.76 3.9
                1.62l1.46-1.46 1.42 1.42-1.46 1.45zM10 18a6 6 0 1 0 0-12 6 6 0 0
                0 0 12zM7 0h6v2H7V0zm5.12 8.46l1.42 1.42L10 13.4 8.59
                12l3.53-3.54z`),attr(c,"class","icon svelte-m8wnul"),attr(c,"xmlns","http://www.w3.org/2000/svg"),attr(c,"viewBox","0 0 20 20"),attr(k,"class","text svelte-m8wnul"),attr(s,"class","page-info svelte-m8wnul"),attr(K,"d",`M16 2h4v15a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V0h16v2zm0 2v13a1 1 0
                0 0 1 1 1 1 0 0 0 1-1V4h-2zM2 2v15a1 1 0 0 0 1 1h11.17a2.98 2.98
                0 0 1-.17-1V2H2zm2 8h8v2H4v-2zm0 4h8v2H4v-2zM4 4h8v4H4V4z`),attr(V,"class","icon svelte-m8wnul"),attr(V,"xmlns","http://www.w3.org/2000/svg"),attr(V,"viewBox","0 0 20 20"),attr(tt,"class","text svelte-m8wnul"),attr(X,"class","page-info svelte-m8wnul"),attr(u,"class","line svelte-m8wnul"),attr(m,"width",I[15]),attr(m,"height",I[16]),attr(m,"class","svelte-m8wnul"),attr(o,"class",t=null_to_empty(I[5]===!0?"viewer":"null")+" svelte-m8wnul"),attr(e,"class","control-start svelte-m8wnul")},m(a,f){insert_hydration(a,e,f),append_hydration(e,u),mount_component(n,u,null),append_hydration(u,j),mount_component(F,u,null),append_hydration(u,L),mount_component(w,u,null),append_hydration(u,b),mount_component(d,u,null),append_hydration(u,y),mount_component(E,u,null),append_hydration(u,R),mount_component(A,u,null),append_hydration(u,l),mount_component(g,u,null),append_hydration(u,r),mount_component(_,u,null),append_hydration(u,C),mount_component(S,u,null),append_hydration(u,T),append_hydration(u,s),append_hydration(s,c),append_hydration(c,v),append_hydration(s,M),append_hydration(s,k),append_hydration(k,D),append_hydration(k,N),append_hydration(u,U),append_hydration(u,X),append_hydration(X,V),append_hydration(V,K),append_hydration(X,Z),append_hydration(X,tt),append_hydration(tt,Q),append_hydration(tt,et),I[40](et),append_hydration(tt,at),append_hydration(tt,P),I[41](P),append_hydration(e,h),append_hydration(e,o),append_hydration(o,m),I[42](m),i=!0},p(a,f){const p={};f[0]&1|f[1]&67108864&&(p.$$scope={dirty:f,ctx:a}),n.$set(p);const x={};f[0]&9|f[1]&67108864&&(x.$$scope={dirty:f,ctx:a}),F.$set(x);const O={};f[0]&4|f[1]&67108864&&(O.$$scope={dirty:f,ctx:a}),w.$set(O);const q={};f[0]&4|f[1]&67108864&&(q.$$scope={dirty:f,ctx:a}),d.$set(q);const B={};f[0]&2|f[1]&67108864&&(B.$$scope={dirty:f,ctx:a}),E.$set(B);const z={};f[1]&67108864&&(z.$$scope={dirty:f,ctx:a}),A.$set(z);const W={};f[1]&67108864&&(W.$$scope={dirty:f,ctx:a}),g.$set(W);const $={};f[0]&2|f[1]&67108864&&($.$$scope={dirty:f,ctx:a}),_.$set($);const st={};f[0]&3072|f[1]&67108864&&(st.$$scope={dirty:f,ctx:a}),S.$set(st),(!i||f[0]&512)&&set_data(D,a[9]),(!i||f[0]&32768)&&attr(m,"width",a[15]),(!i||f[0]&65536)&&attr(m,"height",a[16]),(!i||f[0]&32&&t!==(t=null_to_empty(a[5]===!0?"viewer":"null")+" svelte-m8wnul"))&&attr(o,"class",t)},i(a){i||(transition_in(n.$$.fragment,a),transition_in(F.$$.fragment,a),transition_in(w.$$.fragment,a),transition_in(d.$$.fragment,a),transition_in(E.$$.fragment,a),transition_in(A.$$.fragment,a),transition_in(g.$$.fragment,a),transition_in(_.$$.fragment,a),transition_in(S.$$.fragment,a),i=!0)},o(a){transition_out(n.$$.fragment,a),transition_out(F.$$.fragment,a),transition_out(w.$$.fragment,a),transition_out(d.$$.fragment,a),transition_out(E.$$.fragment,a),transition_out(A.$$.fragment,a),transition_out(g.$$.fragment,a),transition_out(_.$$.fragment,a),transition_out(S.$$.fragment,a),i=!1},d(a){a&&detach(e),destroy_component(n),destroy_component(F),destroy_component(w),destroy_component(d),destroy_component(E),destroy_component(A),destroy_component(g),destroy_component(_),destroy_component(S),I[40](null),I[41](null),I[42](null)}}}function create_if_block(I){let e,u,n,j,F,L,w,b,d,y,E,R,A,l;return{c(){e=element("div"),u=element("p"),n=text("This document requires a password to open:"),j=space(),F=element("p"),L=text(I[14]),w=space(),b=element("div"),d=element("input"),y=space(),E=element("button"),R=text("Submit"),this.h()},l(g){e=claim_element(g,"DIV",{class:!0});var r=children(e);u=claim_element(r,"P",{});var _=children(u);n=claim_text(_,"This document requires a password to open:"),_.forEach(detach),j=claim_space(r),F=claim_element(r,"P",{class:!0});var C=children(F);L=claim_text(C,I[14]),C.forEach(detach),w=claim_space(r),b=claim_element(r,"DIV",{class:!0});var S=children(b);d=claim_element(S,"INPUT",{type:!0,class:!0}),y=claim_space(S),E=claim_element(S,"BUTTON",{class:!0});var T=children(E);R=claim_text(T,"Submit"),T.forEach(detach),S.forEach(detach),r.forEach(detach),this.h()},h(){attr(F,"class","password-message svelte-m8wnul"),attr(d,"type","password"),attr(d,"class","password-input svelte-m8wnul"),attr(E,"class","password-button svelte-m8wnul"),attr(b,"class","password-container svelte-m8wnul"),attr(e,"class","password-viewer svelte-m8wnul")},m(g,r){insert_hydration(g,e,r),append_hydration(e,u),append_hydration(u,n),append_hydration(e,j),append_hydration(e,F),append_hydration(F,L),append_hydration(e,w),append_hydration(e,b),append_hydration(b,d),set_input_value(d,I[12]),append_hydration(b,y),append_hydration(b,E),append_hydration(E,R),A||(l=[listen(d,"input",I[30]),listen(E,"click",I[24])],A=!0)},p(g,r){r[0]&16384&&set_data(L,g[14]),r[0]&4096&&d.value!==g[12]&&set_input_value(d,g[12])},i:noop,o:noop,d(g){g&&detach(e),A=!1,run_all(l)}}}function create_default_slot_8(I){let e;return{c(){e=text("Prevoius")},l(u){e=claim_text(u,"Prevoius")},m(u,n){insert_hydration(u,e,n)},d(u){u&&detach(e)}}}function create_activator_slot_8(I){let e,u,n,j,F,L;return{c(){e=element("span"),u=svg_element("svg"),n=svg_element("polygon"),this.h()},l(w){e=claim_element(w,"SPAN",{slot:!0,class:!0});var b=children(e);u=claim_svg_element(b,"svg",{class:!0,xmlns:!0,viewBox:!0});var d=children(u);n=claim_svg_element(d,"polygon",{points:!0}),children(n).forEach(detach),d.forEach(detach),b.forEach(detach),this.h()},h(){attr(n,"points",`3.828 9 9.899 2.929 8.485 1.515 0 10 .707 10.707 8.485
                  18.485 9.899 17.071 3.828 11 20 11 20 9 3.828 9`),attr(u,"class","icon svelte-m8wnul"),attr(u,"xmlns","http://www.w3.org/2000/svg"),attr(u,"viewBox","0 0 20 20"),attr(e,"slot","activator"),attr(e,"class",j="button-control "+(I[0]<=1?"disabled":null)+" svelte-m8wnul")},m(w,b){insert_hydration(w,e,b),append_hydration(e,u),append_hydration(u,n),F||(L=listen(e,"click",I[31]),F=!0)},p(w,b){b[0]&1&&j!==(j="button-control "+(w[0]<=1?"disabled":null)+" svelte-m8wnul")&&attr(e,"class",j)},d(w){w&&detach(e),F=!1,L()}}}function create_default_slot_7(I){let e;return{c(){e=text("Next")},l(u){e=claim_text(u,"Next")},m(u,n){insert_hydration(u,e,n)},d(u){u&&detach(e)}}}function create_activator_slot_7(I){let e,u,n,j,F,L;return{c(){e=element("span"),u=svg_element("svg"),n=svg_element("polygon"),this.h()},l(w){e=claim_element(w,"SPAN",{slot:!0,class:!0});var b=children(e);u=claim_svg_element(b,"svg",{class:!0,xmlns:!0,viewBox:!0});var d=children(u);n=claim_svg_element(d,"polygon",{points:!0}),children(n).forEach(detach),d.forEach(detach),b.forEach(detach),this.h()},h(){attr(n,"points",`16.172 9 10.101 2.929 11.515 1.515 20 10 19.293 10.707
                  11.515 18.485 10.101 17.071 16.172 11 0 11 0 9`),attr(u,"class","icon svelte-m8wnul"),attr(u,"xmlns","http://www.w3.org/2000/svg"),attr(u,"viewBox","0 0 20 20"),attr(e,"slot","activator"),attr(e,"class",j="button-control "+(I[0]>=I[3]?"disabled":null)+" svelte-m8wnul")},m(w,b){insert_hydration(w,e,b),append_hydration(e,u),append_hydration(u,n),F||(L=listen(e,"click",I[32]),F=!0)},p(w,b){b[0]&9&&j!==(j="button-control "+(w[0]>=w[3]?"disabled":null)+" svelte-m8wnul")&&attr(e,"class",j)},d(w){w&&detach(e),F=!1,L()}}}function create_default_slot_6(I){let e;return{c(){e=text("Zoom In")},l(u){e=claim_text(u,"Zoom In")},m(u,n){insert_hydration(u,e,n)},d(u){u&&detach(e)}}}function create_activator_slot_6(I){let e,u,n,j,F,L;return{c(){e=element("span"),u=svg_element("svg"),n=svg_element("path"),this.h()},l(w){e=claim_element(w,"SPAN",{slot:!0,class:!0});var b=children(e);u=claim_svg_element(b,"svg",{class:!0,xmlns:!0,viewBox:!0});var d=children(u);n=claim_svg_element(d,"path",{"fill-rule":!0,d:!0}),children(n).forEach(detach),d.forEach(detach),b.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d",`M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42
                  1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM7
                  7V5h2v2h2v2H9v2H7V9H5V7h2z`),attr(u,"class","icon svelte-m8wnul"),attr(u,"xmlns","http://www.w3.org/2000/svg"),attr(u,"viewBox","0 0 20 20"),attr(e,"slot","activator"),attr(e,"class",j="button-control "+(I[2]>=maxScale?"disabled":null)+" svelte-m8wnul")},m(w,b){insert_hydration(w,e,b),append_hydration(e,u),append_hydration(u,n),F||(L=listen(e,"click",I[33]),F=!0)},p(w,b){b[0]&4&&j!==(j="button-control "+(w[2]>=maxScale?"disabled":null)+" svelte-m8wnul")&&attr(e,"class",j)},d(w){w&&detach(e),F=!1,L()}}}function create_default_slot_5(I){let e;return{c(){e=text("Zoom Out")},l(u){e=claim_text(u,"Zoom Out")},m(u,n){insert_hydration(u,e,n)},d(u){u&&detach(e)}}}function create_activator_slot_5(I){let e,u,n,j,F,L;return{c(){e=element("span"),u=svg_element("svg"),n=svg_element("path"),this.h()},l(w){e=claim_element(w,"SPAN",{slot:!0,class:!0});var b=children(e);u=claim_svg_element(b,"svg",{class:!0,xmlns:!0,viewBox:!0});var d=children(u);n=claim_svg_element(d,"path",{"fill-rule":!0,d:!0}),children(n).forEach(detach),d.forEach(detach),b.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d",`M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42
                  1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM5
                  7h6v2H5V7z`),attr(u,"class","icon svelte-m8wnul"),attr(u,"xmlns","http://www.w3.org/2000/svg"),attr(u,"viewBox","0 0 20 20"),attr(e,"slot","activator"),attr(e,"class",j="button-control "+(I[2]<=minScale?"disabled":null)+" svelte-m8wnul")},m(w,b){insert_hydration(w,e,b),append_hydration(e,u),append_hydration(u,n),F||(L=listen(e,"click",I[34]),F=!0)},p(w,b){b[0]&4&&j!==(j="button-control "+(w[2]<=minScale?"disabled":null)+" svelte-m8wnul")&&attr(e,"class",j)},d(w){w&&detach(e),F=!1,L()}}}function create_default_slot_4(I){let e;return{c(){e=text("Print")},l(u){e=claim_text(u,"Print")},m(u,n){insert_hydration(u,e,n)},d(u){u&&detach(e)}}}function create_activator_slot_4(I){let e,u,n,j,F;return{c(){e=element("span"),u=svg_element("svg"),n=svg_element("path"),this.h()},l(L){e=claim_element(L,"SPAN",{slot:!0,class:!0});var w=children(e);u=claim_svg_element(w,"svg",{class:!0,xmlns:!0,viewBox:!0});var b=children(u);n=claim_svg_element(b,"path",{d:!0}),children(n).forEach(detach),b.forEach(detach),w.forEach(detach),this.h()},h(){attr(n,"d",`M4 16H0V6h20v10h-4v4H4v-4zm2-4v6h8v-6H6zM4 0h12v5H4V0zM2
                  8v2h2V8H2zm4 0v2h2V8H6z`),attr(u,"class","icon svelte-m8wnul"),attr(u,"xmlns","http://www.w3.org/2000/svg"),attr(u,"viewBox","0 0 20 20"),attr(e,"slot","activator"),attr(e,"class","button-control svelte-m8wnul")},m(L,w){insert_hydration(L,e,w),append_hydration(e,u),append_hydration(u,n),j||(F=listen(e,"click",I[35]),j=!0)},p:noop,d(L){L&&detach(e),j=!1,F()}}}function create_default_slot_3(I){let e;return{c(){e=text("Anti-Clockwise")},l(u){e=claim_text(u,"Anti-Clockwise")},m(u,n){insert_hydration(u,e,n)},d(u){u&&detach(e)}}}function create_activator_slot_3(I){let e,u,n,j,F;return{c(){e=element("span"),u=svg_element("svg"),n=svg_element("path"),this.h()},l(L){e=claim_element(L,"SPAN",{slot:!0,class:!0});var w=children(e);u=claim_svg_element(w,"svg",{class:!0,xmlns:!0,viewBox:!0});var b=children(u);n=claim_svg_element(b,"path",{d:!0}),children(n).forEach(detach),b.forEach(detach),w.forEach(detach),this.h()},h(){attr(n,"d",`M14.66 15.66A8 8 0 1 1 17 10h-2a6 6 0 1 0-1.76 4.24l1.42
                  1.42zM12 10h8l-4 4-4-4z`),attr(u,"class","icon rot-icon svelte-m8wnul"),attr(u,"xmlns","http://www.w3.org/2000/svg"),attr(u,"viewBox","0 0 20 20"),attr(e,"slot","activator"),attr(e,"class","button-control svelte-m8wnul")},m(L,w){insert_hydration(L,e,w),append_hydration(e,u),append_hydration(u,n),j||(F=listen(e,"click",I[36]),j=!0)},p:noop,d(L){L&&detach(e),j=!1,F()}}}function create_default_slot_2(I){let e;return{c(){e=text("Clockwise")},l(u){e=claim_text(u,"Clockwise")},m(u,n){insert_hydration(u,e,n)},d(u){u&&detach(e)}}}function create_activator_slot_2(I){let e,u,n,j,F;return{c(){e=element("span"),u=svg_element("svg"),n=svg_element("path"),this.h()},l(L){e=claim_element(L,"SPAN",{slot:!0,class:!0});var w=children(e);u=claim_svg_element(w,"svg",{class:!0,xmlns:!0,viewBox:!0});var b=children(u);n=claim_svg_element(b,"path",{d:!0}),children(n).forEach(detach),b.forEach(detach),w.forEach(detach),this.h()},h(){attr(n,"d",`M14.66 15.66A8 8 0 1 1 17 10h-2a6 6 0 1 0-1.76 4.24l1.42
                  1.42zM12 10h8l-4 4-4-4z`),attr(u,"class","icon svelte-m8wnul"),attr(u,"xmlns","http://www.w3.org/2000/svg"),attr(u,"viewBox","0 0 20 20"),attr(e,"slot","activator"),attr(e,"class","button-control svelte-m8wnul")},m(L,w){insert_hydration(L,e,w),append_hydration(e,u),append_hydration(u,n),j||(F=listen(e,"click",I[37]),j=!0)},p:noop,d(L){L&&detach(e),j=!1,F()}}}function create_default_slot_1(I){let e;return{c(){e=text("Download")},l(u){e=claim_text(u,"Download")},m(u,n){insert_hydration(u,e,n)},d(u){u&&detach(e)}}}function create_activator_slot_1(I){let e,u,n,j,F;return{c(){e=element("span"),u=svg_element("svg"),n=svg_element("path"),this.h()},l(L){e=claim_element(L,"SPAN",{slot:!0,class:!0});var w=children(e);u=claim_svg_element(w,"svg",{class:!0,xmlns:!0,viewBox:!0});var b=children(u);n=claim_svg_element(b,"path",{d:!0}),children(n).forEach(detach),b.forEach(detach),w.forEach(detach),this.h()},h(){attr(n,"d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"),attr(u,"class","icon svelte-m8wnul"),attr(u,"xmlns","http://www.w3.org/2000/svg"),attr(u,"viewBox","0 0 20 20"),attr(e,"slot","activator"),attr(e,"class","button-control svelte-m8wnul")},m(L,w){insert_hydration(L,e,w),append_hydration(e,u),append_hydration(u,n),j||(F=listen(e,"click",I[38]),j=!0)},p:noop,d(L){L&&detach(e),j=!1,F()}}}function create_default_slot(I){let e=(I[10]===!0?I[11]:"Auto Turn Page")+"",u;return{c(){u=text(e)},l(n){u=claim_text(n,e)},m(n,j){insert_hydration(n,u,j)},p(n,j){j[0]&3072&&e!==(e=(n[10]===!0?n[11]:"Auto Turn Page")+"")&&set_data(u,e)},d(n){n&&detach(u)}}}function create_else_block(I){let e;return{c(){e=svg_element("path"),this.h()},l(u){e=claim_svg_element(u,"path",{d:!0}),children(e).forEach(detach),this.h()},h(){attr(e,"d",`M9.896,3.838L0.792,1.562v14.794l9.104,2.276L19,16.356V1.562L9.896,3.838z
                    M9.327,17.332L1.93,15.219V3.27 l7.397,1.585V17.332z
                    M17.862,15.219l-7.397,2.113V4.855l7.397-1.585V15.219z`)},m(u,n){insert_hydration(u,e,n)},d(u){u&&detach(e)}}}function create_if_block_2(I){let e;return{c(){e=svg_element("path"),this.h()},l(u){e=claim_svg_element(u,"path",{d:!0}),children(e).forEach(detach),this.h()},h(){attr(e,"d","M4 18h12V6h-4V2H4v16zm-2 1V0h12l4 4v16H2v-1z")},m(u,n){insert_hydration(u,e,n)},d(u){u&&detach(e)}}}function create_activator_slot(I){let e,u,n,j;function F(b,d){return b[10]===!0?create_if_block_2:create_else_block}let L=F(I),w=L(I);return{c(){e=element("span"),u=svg_element("svg"),w.c(),this.h()},l(b){e=claim_element(b,"SPAN",{slot:!0,class:!0});var d=children(e);u=claim_svg_element(d,"svg",{class:!0,xmlns:!0,viewBox:!0});var y=children(u);w.l(y),y.forEach(detach),d.forEach(detach),this.h()},h(){attr(u,"class","icon svelte-m8wnul"),attr(u,"xmlns","http://www.w3.org/2000/svg"),attr(u,"viewBox","0 0 20 20"),attr(e,"slot","activator"),attr(e,"class","page-info button-control svelte-m8wnul")},m(b,d){insert_hydration(b,e,d),append_hydration(e,u),w.m(u,null),n||(j=listen(e,"click",I[39]),n=!0)},p(b,d){L!==(L=F(b))&&(w.d(1),w=L(b),w&&(w.c(),w.m(u,null)))},d(b){b&&detach(e),w.d(),n=!1,j()}}}function create_fragment(I){let e,u,n,j,F,L,w,b,d,y,E,R;add_render_callback(I[29]);const A=[create_if_block,create_if_block_1,create_else_block_1],l=[];function g(r,_){return r[13]===!0?0:r[4]===!0?1:2}return n=g(I),j=l[n]=A[n](I),{c(){e=element("div"),u=element("div"),j.c(),L=space(),w=element("button"),b=svg_element("svg"),d=svg_element("path"),this.h()},l(r){e=claim_element(r,"DIV",{class:!0});var _=children(e);u=claim_element(_,"DIV",{class:!0});var C=children(u);j.l(C),C.forEach(detach),L=claim_space(_),w=claim_element(_,"BUTTON",{id:!0,class:!0});var S=children(w);b=claim_svg_element(S,"svg",{class:!0,xmlns:!0,viewBox:!0});var T=children(b);d=claim_svg_element(T,"path",{d:!0}),children(d).forEach(detach),T.forEach(detach),S.forEach(detach),_.forEach(detach),this.h()},h(){attr(u,"class",F=null_to_empty(I[5]===!0?"control":"null")+" svelte-m8wnul"),attr(d,"d","M7 10v8h6v-8h5l-8-8-8 8h5z"),attr(b,"class","icon svelte-m8wnul"),attr(b,"xmlns","http://www.w3.org/2000/svg"),attr(b,"viewBox","0 0 20 20"),attr(w,"id","topBtn"),attr(w,"class","svelte-m8wnul"),attr(e,"class","parent svelte-m8wnul")},m(r,_){insert_hydration(r,e,_),append_hydration(e,u),l[n].m(u,null),append_hydration(e,L),append_hydration(e,w),append_hydration(w,b),append_hydration(b,d),y=!0,E||(R=[listen(window_1,"resize",I[29]),listen(w,"click",I[44])],E=!0)},p(r,_){let C=n;n=g(r),n===C?l[n].p(r,_):(group_outros(),transition_out(l[C],1,1,()=>{l[C]=null}),check_outros(),j=l[n],j?j.p(r,_):(j=l[n]=A[n](r),j.c()),transition_in(j,1),j.m(u,null)),(!y||_[0]&32&&F!==(F=null_to_empty(r[5]===!0?"control":"null")+" svelte-m8wnul"))&&attr(u,"class",F)},i(r){y||(transition_in(j),y=!0)},o(r){transition_out(j),y=!1},d(r){r&&detach(e),l[n].d(),E=!1,run_all(R)}}}const minScale=1,maxScale=2.3;function instance(I,e,u){let{url:n}=e,{scale:j=1.8}=e,{pageNum:F=1}=e,{flipTime:L=120}=e,{showButtons:w=!0}=e,{showBorder:b=!0}=e,{totalPage:d=0}=e;pdf.exports.GlobalWorkerOptions&&(pdf.exports.GlobalWorkerOptions.workerSrc=workerSrc);let y,E=0,R=0,A=null,l=!1,g=null,r=0,_="",C=0,S=!1,T,s,c=L,v=[],M="",k=!1,D="",N=!1;const U=J=>{l=!0,A.getPage(J).then(function(ft){let pt=ft.getViewport({scale:j,rotation:r});const ut=y.getContext("2d");u(6,y.height=pt.height,y),u(6,y.width=pt.width,y);let mt={canvasContext:ut,viewport:pt};ft.render(mt).promise.then(function(){if(l=!1,g!==null){if(F<A.totalPage)v[F]=y,u(0,F++,F),A.getPage(F).then(U);else for(let yt=1;yt<v.length;yt++)y.appendChild(v[yt]);g=null}})}),w===!0&&u(7,E.textContent=J,E)},X=J=>{l?g=J:U(J)},V=()=>{F<=1||(u(0,F--,F),X(F))},K=()=>{F>=A.numPages||(u(0,F++,F),X(F))},Z=()=>{j<=maxScale&&(u(2,j=j+.1),X(F))},tt=()=>{j>=minScale&&(u(2,j=j-.1),X(F))},Q=J=>{onPrint(J)},et=()=>{r=r+90,X(F)},at=()=>{r=r-90,X(F)},P=()=>{h()},h=async()=>{pdf.exports.getDocument({url:n,password:M}).promise.then(async function(ft){if(A=ft,u(13,k=!1),await tick(),w===!0&&u(8,R.textContent=A.numPages,R),u(3,d=A.numPages),w===!0)for(let pt=1;pt<=d;pt++)getPageText(pt,A).then(function(ut){_=_.concat(ut),u(9,C=calcRT(_))});u(28,N=!0)}).catch(function(ft){u(13,k=!0),u(14,D=ft.message),D==="Failed to fetch"&&(u(1,n=`https://cors-anywhere.herokuapp.com/${n}`),h())})};h();const o=()=>{u(10,S=!S),S===!1&&(clearInterval(T),clearInterval(s)),S===!0&&F<=d&&(s=setInterval(()=>{u(11,c=c-1)},1e3),T=setInterval(()=>{u(11,c=L),K()},L*1e3))},m=J=>{let ft=J.substring(J.lastIndexOf("/")+1);FileSaver.saveAs(J,ft)};onDestroy(()=>{clearInterval(T),clearInterval(s)});let t,i;function a(){u(15,t=window_1.innerWidth),u(16,i=window_1.innerHeight)}function f(){M=this.value,u(12,M)}const p=()=>V(),x=()=>K(),O=()=>Z(),q=()=>tt(),B=()=>Q(n),z=()=>at(),W=()=>et(),$=()=>m(n),st=()=>o();function rt(J){binding_callbacks[J?"unshift":"push"](()=>{E=J,u(7,E)})}function it(J){binding_callbacks[J?"unshift":"push"](()=>{R=J,u(8,R)})}function nt(J){binding_callbacks[J?"unshift":"push"](()=>{y=J,u(6,y)})}function lt(J){binding_callbacks[J?"unshift":"push"](()=>{y=J,u(6,y)})}const ct=()=>window.scrollTo(0,0);return I.$$set=J=>{"url"in J&&u(1,n=J.url),"scale"in J&&u(2,j=J.scale),"pageNum"in J&&u(0,F=J.pageNum),"flipTime"in J&&u(27,L=J.flipTime),"showButtons"in J&&u(4,w=J.showButtons),"showBorder"in J&&u(5,b=J.showBorder),"totalPage"in J&&u(3,d=J.totalPage)},I.$$.update=()=>{I.$$.dirty[0]&268435457&&N&&X(F)},[F,n,j,d,w,b,y,E,R,C,S,c,M,k,D,t,i,V,K,Z,tt,Q,et,at,P,o,m,L,N,a,f,p,x,O,q,B,z,W,$,st,rt,it,nt,lt,ct]}class PdfViewer extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{url:1,scale:2,pageNum:0,flipTime:27,showButtons:4,showBorder:5,totalPage:3},null,[-1,-1])}}var PdfViewer$1=PdfViewer;export{PdfViewer$1 as default};
